import{_ as Kn}from"./ActionCard.vue_vue_type_script_setup_true_lang-dc5c9802.js";import{f as ht,c as Ee,m as le,a as Dn,b as Tn,e as En}from"./storage-30a36547.js";import{d as z,m as C,n as bt,p as D,q as L,v as X,x as T,y as et,z as V,c as $,A as Fe,B as Ot,C as tt,D as mt,E as yt,G as H,H as Pn,I,J as Ln,K as $n,L as Ut,M as Fn,O as Y,P as Ne,Q as In,S as Tt,T as Mt,U as An,V as ce,W as zn,X as Bn,Y as On,Z as Pe,_ as Un,$ as Mn,a0 as st,a1 as Vn,a2 as jn,a3 as ct,a4 as Hn,a5 as Wn,a6 as qn,a7 as Xn,a8 as ut,w as he,e as Ue,a9 as Gn,aa as Et,ab as Yn,ac as Ze,a as Vt,s as ne,ad as Pt,ae,h as oe,af as jt,ag as Ht,ah as Jn,ai as Zn,o as G,g as N,b as _,u as m,k as O,f as $e,aj as gt,F as vt,t as te,i as Qn,j as ft,ak as eo,al as to,am as no,l as Oe}from"./index-e9b790e6.js";import{e as Me,C as oo,f as ro,g as lo,h as ao,i as Lt,V as io,j as so,k as $t,l as co,m as uo,n as Le,o as fo,p as ho,c as Ft,q as It,r as go,N as vo,a as po,s as pt,t as At,v as bo}from"./node-a1fce241.js";import{e as mo,a as yo,p as xo,u as ko}from"./index-91046263.js";import{_ as Co}from"./_plugin-vue_export-helper-c27b6911.js";import"./file_type-ca8ce176.js";function Wt(e){return typeof e=="string"?`s-${e}`:`n-${e}`}const wo=z({name:"ChevronLeft",render(){return C("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},C("path",{d:"M10.3536 3.14645C10.5488 3.34171 10.5488 3.65829 10.3536 3.85355L6.20711 8L10.3536 12.1464C10.5488 12.3417 10.5488 12.6583 10.3536 12.8536C10.1583 13.0488 9.84171 13.0488 9.64645 12.8536L5.14645 8.35355C4.95118 8.15829 4.95118 7.84171 5.14645 7.64645L9.64645 3.14645C9.84171 2.95118 10.1583 2.95118 10.3536 3.14645Z",fill:"currentColor"}))}}),No=z({name:"Switcher",render(){return C("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},C("path",{d:"M12 8l10 8l-10 8z"}))}}),So=e=>{const{fontWeight:t,textColor1:s,textColor2:i,textColorDisabled:d,dividerColor:o,fontSize:c}=e;return{titleFontSize:c,titleFontWeight:t,dividerColor:o,titleTextColor:s,titleTextColorDisabled:d,fontSize:c,textColor:i,arrowColor:i,arrowColorDisabled:d,itemMargin:"16px 0 0 0",titlePadding:"16px 0 0 0"}},Ro={name:"Collapse",common:bt,self:So},_o=Ro,Ko=D("collapse","width: 100%;",[D("collapse-item",`
 font-size: var(--n-font-size);
 color: var(--n-text-color);
 transition:
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 margin: var(--n-item-margin);
 `,[L("disabled",[X("header","cursor: not-allowed;",[X("header-main",`
 color: var(--n-title-text-color-disabled);
 `),D("collapse-item-arrow",`
 color: var(--n-arrow-color-disabled);
 `)])]),D("collapse-item","margin-left: 32px;"),T("&:first-child","margin-top: 0;"),T("&:first-child >",[X("header","padding-top: 0;")]),L("left-arrow-placement",[X("header",[D("collapse-item-arrow","margin-right: 4px;")])]),L("right-arrow-placement",[X("header",[D("collapse-item-arrow","margin-left: 4px;")])]),X("content-wrapper",[X("content-inner","padding-top: 16px;"),ht({duration:"0.15s"})]),L("active",[X("header",[L("active",[D("collapse-item-arrow","transform: rotate(90deg);")])])]),T("&:not(:first-child)","border-top: 1px solid var(--n-divider-color);"),X("header",`
 font-size: var(--n-title-font-size);
 display: flex;
 flex-wrap: nowrap;
 align-items: center;
 transition: color .3s var(--n-bezier);
 position: relative;
 padding: var(--n-title-padding);
 color: var(--n-title-text-color);
 cursor: pointer;
 `,[X("header-main",`
 display: flex;
 flex-wrap: nowrap;
 align-items: center;
 font-weight: var(--n-title-font-weight);
 transition: color .3s var(--n-bezier);
 flex: 1;
 color: var(--n-title-text-color);
 `),X("header-extra",`
 display: flex;
 align-items: center;
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
 `),D("collapse-item-arrow",`
 display: flex;
 transition:
 transform .15s var(--n-bezier),
 color .3s var(--n-bezier);
 font-size: 18px;
 color: var(--n-arrow-color);
 `)])])]),Do=Object.assign(Object.assign({},Fe.props),{defaultExpandedNames:{type:[Array,String],default:null},expandedNames:[Array,String],arrowPlacement:{type:String,default:"left"},accordion:{type:Boolean,default:!1},displayDirective:{type:String,default:"if"},onItemHeaderClick:[Function,Array],"onUpdate:expandedNames":[Function,Array],onUpdateExpandedNames:[Function,Array],onExpandedNamesChange:{type:[Function,Array],validator:()=>!0,default:void 0}}),qt=yt("n-collapse"),To=z({name:"Collapse",props:Do,setup(e,{slots:t}){const{mergedClsPrefixRef:s,inlineThemeDisabled:i,mergedRtlRef:d}=et(e),o=V(e.defaultExpandedNames),c=$(()=>e.expandedNames),u=Me(c,o),a=Fe("Collapse","-collapse",Ko,_o,e,s);function r(R){const{"onUpdate:expandedNames":w,onUpdateExpandedNames:k,onExpandedNamesChange:K}=e;k&&H(k,R),w&&H(w,R),K&&H(K,R),o.value=R}function f(R){const{onItemHeaderClick:w}=e;w&&H(w,R)}function h(R,w,k){const{accordion:K}=e,{value:A}=u;if(K)R?(r([w]),f({name:w,expanded:!0,event:k})):(r([]),f({name:w,expanded:!1,event:k}));else if(!Array.isArray(A))r([w]),f({name:w,expanded:!0,event:k});else{const P=A.slice(),M=P.findIndex(Z=>w===Z);~M?(P.splice(M,1),r(P),f({name:w,expanded:!1,event:k})):(P.push(w),r(P),f({name:w,expanded:!0,event:k}))}}Ot(qt,{props:e,mergedClsPrefixRef:s,expandedNamesRef:u,slots:t,toggleItem:h});const p=tt("Collapse",d,s),v=$(()=>{const{common:{cubicBezierEaseInOut:R},self:{titleFontWeight:w,dividerColor:k,titlePadding:K,titleTextColor:A,titleTextColorDisabled:P,textColor:M,arrowColor:Z,fontSize:ge,titleFontSize:re,arrowColorDisabled:ke,itemMargin:ie}}=a.value;return{"--n-font-size":ge,"--n-bezier":R,"--n-text-color":M,"--n-divider-color":k,"--n-title-padding":K,"--n-title-font-size":re,"--n-title-text-color":A,"--n-title-text-color-disabled":P,"--n-title-font-weight":w,"--n-arrow-color":Z,"--n-arrow-color-disabled":ke,"--n-item-margin":ie}}),S=i?mt("collapse",void 0,v,e):void 0;return{rtlEnabled:p,mergedTheme:a,mergedClsPrefix:s,cssVars:i?void 0:v,themeClass:S==null?void 0:S.themeClass,onRender:S==null?void 0:S.onRender}},render(){var e;return(e=this.onRender)===null||e===void 0||e.call(this),C("div",{class:[`${this.mergedClsPrefix}-collapse`,this.rtlEnabled&&`${this.mergedClsPrefix}-collapse--rtl`,this.themeClass],style:this.cssVars},this.$slots)}}),Eo=z({name:"CollapseItemContent",props:{displayDirective:{type:String,required:!0},show:Boolean,clsPrefix:{type:String,required:!0}},setup(e){return{onceTrue:Pn(I(e,"show"))}},render(){return C(Ut,null,{default:()=>{const{show:e,displayDirective:t,onceTrue:s,clsPrefix:i}=this,d=t==="show"&&s,o=C("div",{class:`${i}-collapse-item__content-wrapper`},C("div",{class:`${i}-collapse-item__content-inner`},this.$slots));return d?Ln(o,[[$n,e]]):e?o:null}})}}),Po={title:String,name:[String,Number],disabled:Boolean,displayDirective:String},Lo=z({name:"CollapseItem",props:Po,setup(e){const{mergedRtlRef:t}=et(e),s=Fn(),i=Y(()=>{var h;return(h=e.name)!==null&&h!==void 0?h:s}),d=Ne(qt);d||In("collapse-item","`n-collapse-item` must be placed inside `n-collapse`.");const{expandedNamesRef:o,props:c,mergedClsPrefixRef:u,slots:a}=d,r=$(()=>{const{value:h}=o;if(Array.isArray(h)){const{value:p}=i;return!~h.findIndex(v=>v===p)}else if(h){const{value:p}=i;return p!==h}return!0});return{rtlEnabled:tt("Collapse",t,u),collapseSlots:a,randomName:s,mergedClsPrefix:u,collapsed:r,mergedDisplayDirective:$(()=>{const{displayDirective:h}=e;return h||c.displayDirective}),arrowPlacement:$(()=>c.arrowPlacement),handleClick(h){d&&!e.disabled&&d.toggleItem(r.value,i.value,h)}}},render(){const{collapseSlots:e,$slots:t,arrowPlacement:s,collapsed:i,mergedDisplayDirective:d,mergedClsPrefix:o,disabled:c}=this,u=Tt(t.header,{collapsed:i},()=>[this.title]),a=t["header-extra"]||e["header-extra"],r=t.arrow||e.arrow;return C("div",{class:[`${o}-collapse-item`,`${o}-collapse-item--${s}-arrow-placement`,c&&`${o}-collapse-item--disabled`,!i&&`${o}-collapse-item--active`]},C("div",{class:[`${o}-collapse-item__header`,!i&&`${o}-collapse-item__header--active`]},C("div",{class:`${o}-collapse-item__header-main`,onClick:this.handleClick},s==="right"&&u,C("div",{class:`${o}-collapse-item-arrow`,key:this.rtlEnabled?0:1},Tt(r,{collapsed:i},()=>{var f;return[C(Mt,{clsPrefix:o},{default:(f=e.expandIcon)!==null&&f!==void 0?f:()=>this.rtlEnabled?C(wo,null):C(oo,null)})]})),s==="left"&&u),An(a,{collapsed:i},f=>C("div",{class:`${o}-collapse-item__header-extra`,onClick:this.handleClick},f))),C(Eo,{clsPrefix:o,displayDirective:d,show:!i},t))}}),$o={thPaddingSmall:"6px",thPaddingMedium:"12px",thPaddingLarge:"12px",tdPaddingSmall:"6px",tdPaddingMedium:"12px",tdPaddingLarge:"12px"},Fo=e=>{const{dividerColor:t,cardColor:s,modalColor:i,popoverColor:d,tableHeaderColor:o,tableColorStriped:c,textColor1:u,textColor2:a,borderRadius:r,fontWeightStrong:f,lineHeight:h,fontSizeSmall:p,fontSizeMedium:v,fontSizeLarge:S}=e;return Object.assign(Object.assign({},$o),{fontSizeSmall:p,fontSizeMedium:v,fontSizeLarge:S,lineHeight:h,borderRadius:r,borderColor:ce(s,t),borderColorModal:ce(i,t),borderColorPopover:ce(d,t),tdColor:s,tdColorModal:i,tdColorPopover:d,tdColorStriped:ce(s,c),tdColorStripedModal:ce(i,c),tdColorStripedPopover:ce(d,c),thColor:ce(s,o),thColorModal:ce(i,o),thColorPopover:ce(d,o),thTextColor:u,tdTextColor:a,thFontWeight:f})},Io={name:"Table",common:bt,self:Fo},Ao=Io,zo=e=>{const{borderRadiusSmall:t,hoverColor:s,pressedColor:i,primaryColor:d,textColor3:o,textColor2:c,textColorDisabled:u,fontSize:a}=e;return{fontSize:a,nodeBorderRadius:t,nodeColorHover:s,nodeColorPressed:i,nodeColorActive:On(d,{alpha:.1}),arrowColor:o,nodeTextColor:c,nodeTextColorDisabled:u,loadingColor:d,dropMarkColor:d}},Bo=zn({name:"Tree",common:bt,peers:{Checkbox:ro,Scrollbar:Bn,Empty:lo},self:zo}),Oo=Bo,Uo=T([D("table",`
 font-size: var(--n-font-size);
 font-variant-numeric: tabular-nums;
 line-height: var(--n-line-height);
 width: 100%;
 border-radius: var(--n-border-radius) var(--n-border-radius) 0 0;
 text-align: left;
 border-collapse: separate;
 border-spacing: 0;
 overflow: hidden;
 background-color: var(--n-td-color);
 border-color: var(--n-merged-border-color);
 transition:
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 --n-merged-border-color: var(--n-border-color);
 `,[T("th",`
 white-space: nowrap;
 transition:
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 text-align: inherit;
 padding: var(--n-th-padding);
 vertical-align: inherit;
 text-transform: none;
 border: 0px solid var(--n-merged-border-color);
 font-weight: var(--n-th-font-weight);
 color: var(--n-th-text-color);
 background-color: var(--n-th-color);
 border-bottom: 1px solid var(--n-merged-border-color);
 border-right: 1px solid var(--n-merged-border-color);
 `,[T("&:last-child",`
 border-right: 0px solid var(--n-merged-border-color);
 `)]),T("td",`
 transition:
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 padding: var(--n-td-padding);
 color: var(--n-td-text-color);
 background-color: var(--n-td-color);
 border: 0px solid var(--n-merged-border-color);
 border-right: 1px solid var(--n-merged-border-color);
 border-bottom: 1px solid var(--n-merged-border-color);
 `,[T("&:last-child",`
 border-right: 0px solid var(--n-merged-border-color);
 `)]),L("bordered",`
 border: 1px solid var(--n-merged-border-color);
 border-radius: var(--n-border-radius);
 `,[T("tr",[T("&:last-child",[T("td",`
 border-bottom: 0 solid var(--n-merged-border-color);
 `)])])]),L("single-line",[T("th",`
 border-right: 0px solid var(--n-merged-border-color);
 `),T("td",`
 border-right: 0px solid var(--n-merged-border-color);
 `)]),L("single-column",[T("tr",[T("&:not(:last-child)",[T("td",`
 border-bottom: 0px solid var(--n-merged-border-color);
 `)])])]),L("striped",[T("tr:nth-of-type(even)",[T("td","background-color: var(--n-td-color-striped)")])]),Pe("bottom-bordered",[T("tr",[T("&:last-child",[T("td",`
 border-bottom: 0px solid var(--n-merged-border-color);
 `)])])])]),Un(D("table",`
 background-color: var(--n-td-color-modal);
 --n-merged-border-color: var(--n-border-color-modal);
 `,[T("th",`
 background-color: var(--n-th-color-modal);
 `),T("td",`
 background-color: var(--n-td-color-modal);
 `)])),Mn(D("table",`
 background-color: var(--n-td-color-popover);
 --n-merged-border-color: var(--n-border-color-popover);
 `,[T("th",`
 background-color: var(--n-th-color-popover);
 `),T("td",`
 background-color: var(--n-td-color-popover);
 `)]))]),Mo=Object.assign(Object.assign({},Fe.props),{bordered:{type:Boolean,default:!0},bottomBordered:{type:Boolean,default:!0},singleLine:{type:Boolean,default:!0},striped:Boolean,singleColumn:Boolean,size:{type:String,default:"medium"}}),Xt=z({name:"Table",props:Mo,setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:s,mergedRtlRef:i}=et(e),d=Fe("Table","-table",Uo,Ao,e,t),o=tt("Table",i,t),c=$(()=>{const{size:a}=e,{self:{borderColor:r,tdColor:f,tdColorModal:h,tdColorPopover:p,thColor:v,thColorModal:S,thColorPopover:R,thTextColor:w,tdTextColor:k,borderRadius:K,thFontWeight:A,lineHeight:P,borderColorModal:M,borderColorPopover:Z,tdColorStriped:ge,tdColorStripedModal:re,tdColorStripedPopover:ke,[st("fontSize",a)]:ie,[st("tdPadding",a)]:ve,[st("thPadding",a)]:Se},common:{cubicBezierEaseInOut:Ie}}=d.value;return{"--n-bezier":Ie,"--n-td-color":f,"--n-td-color-modal":h,"--n-td-color-popover":p,"--n-td-text-color":k,"--n-border-color":r,"--n-border-color-modal":M,"--n-border-color-popover":Z,"--n-border-radius":K,"--n-font-size":ie,"--n-th-color":v,"--n-th-color-modal":S,"--n-th-color-popover":R,"--n-th-font-weight":A,"--n-th-text-color":w,"--n-line-height":P,"--n-td-padding":ve,"--n-th-padding":Se,"--n-td-color-striped":ge,"--n-td-color-striped-modal":re,"--n-td-color-striped-popover":ke}}),u=s?mt("table",$(()=>e.size[0]),c,e):void 0;return{rtlEnabled:o,mergedClsPrefix:t,cssVars:s?void 0:c,themeClass:u==null?void 0:u.themeClass,onRender:u==null?void 0:u.onRender}},render(){var e;const{mergedClsPrefix:t}=this;return(e=this.onRender)===null||e===void 0||e.call(this),C("table",{class:[`${t}-table`,this.themeClass,{[`${t}-table--rtl`]:this.rtlEnabled,[`${t}-table--bottom-bordered`]:this.bottomBordered,[`${t}-table--bordered`]:this.bordered,[`${t}-table--single-line`]:this.singleLine,[`${t}-table--single-column`]:this.singleColumn,[`${t}-table--striped`]:this.striped}],style:this.cssVars},this.$slots)}}),ue=z({name:"Th",render(){return C("th",null,this.$slots)}}),Qe=z({name:"Tr",render(){return C("tr",null,this.$slots)}}),fe=z({name:"Td",render(){return C("td",null,this.$slots)}}),Vo=z({name:"Thead",render(){return C("thead",null,this.$slots)}}),Gt=z({name:"Tbody",render(){return C("tbody",null,this.$slots)}}),Yt=yt("n-tree-select"),Ve=yt("n-tree"),jo=z({name:"NTreeSwitcher",props:{clsPrefix:{type:String,required:!0},expanded:Boolean,selected:Boolean,hide:Boolean,loading:Boolean,onClick:Function},setup(e){const{renderSwitcherIconRef:t}=Ne(Ve,null);return()=>{const{clsPrefix:s}=e;return C("span",{"data-switcher":!0,class:[`${s}-tree-node-switcher`,e.expanded&&`${s}-tree-node-switcher--expanded`,e.hide&&`${s}-tree-node-switcher--hide`],onClick:e.onClick},C("div",{class:`${s}-tree-node-switcher__icon`},C(Vn,null,{default:()=>{if(e.loading)return C(jn,{clsPrefix:s,key:"loading",radius:85,strokeWidth:20});const{value:i}=t;return i?i({expanded:e.expanded,selected:e.selected}):C(Mt,{clsPrefix:s,key:"switcher"},{default:()=>C(No,null)})}})))}}}),Ho=z({name:"NTreeNodeCheckbox",props:{clsPrefix:{type:String,required:!0},right:Boolean,focusable:Boolean,disabled:Boolean,checked:Boolean,indeterminate:Boolean,onCheck:Function},setup(e){const t=Ne(Ve);function s(d){const{onCheck:o}=e;o&&o(d)}function i(d){e.indeterminate?s(!1):s(d)}return{handleUpdateValue:i,mergedTheme:t.mergedThemeRef}},render(){const{clsPrefix:e,mergedTheme:t,checked:s,indeterminate:i,disabled:d,focusable:o,handleUpdateValue:c}=this;return C("span",{class:[`${e}-tree-node-checkbox`,this.right&&`${e}-tree-node-checkbox--right`],"data-checkbox":!0},C(ao,{focusable:o,disabled:d,theme:t.peers.Checkbox,themeOverrides:t.peerOverrides.Checkbox,checked:s,indeterminate:i,onUpdateChecked:c}))}}),Wo=z({name:"TreeNodeContent",props:{clsPrefix:{type:String,required:!0},disabled:Boolean,checked:Boolean,selected:Boolean,onClick:Function,onDragstart:Function,tmNode:{type:Object,required:!0},nodeProps:Object},setup(e){const{renderLabelRef:t,renderPrefixRef:s,renderSuffixRef:i,labelFieldRef:d}=Ne(Ve),o=V(null);function c(a){const{onClick:r}=e;r&&r(a)}function u(a){c(a)}return{selfRef:o,renderLabel:t,renderPrefix:s,renderSuffix:i,labelField:d,handleClick:u}},render(){const{clsPrefix:e,labelField:t,nodeProps:s,checked:i=!1,selected:d=!1,renderLabel:o,renderPrefix:c,renderSuffix:u,handleClick:a,onDragstart:r,tmNode:{rawNode:f,rawNode:{prefix:h,suffix:p,[t]:v}}}=this;return C("span",Object.assign({},s,{ref:"selfRef",class:[`${e}-tree-node-content`,s==null?void 0:s.class],onClick:a,draggable:r===void 0?void 0:!0,onDragstart:r}),c||h?C("div",{class:`${e}-tree-node-content__prefix`},c?c({option:f,selected:d,checked:i}):ct(h)):null,C("div",{class:`${e}-tree-node-content__text`},o?o({option:f,selected:d,checked:i}):ct(v)),u||p?C("div",{class:`${e}-tree-node-content__suffix`},u?u({option:f,selected:d,checked:i}):ct(p)):null)}});function zt({position:e,offsetLevel:t,indent:s,el:i}){const d={position:"absolute",boxSizing:"border-box",right:0};if(e==="inside")d.left=0,d.top=0,d.bottom=0,d.borderRadius="inherit",d.boxShadow="inset 0 0 0 2px var(--n-drop-mark-color)";else{const o=e==="before"?"top":"bottom";d[o]=0,d.left=`${i.offsetLeft+6-t*s}px`,d.height="2px",d.backgroundColor="var(--n-drop-mark-color)",d.transformOrigin=o,d.borderRadius="1px",d.transform=e==="before"?"translateY(-4px)":"translateY(4px)"}return C("div",{style:d})}function qo({dropPosition:e,node:t}){return t.isLeaf===!1||t.children?!0:e!=="inside"}function Xo(e){return $(()=>e.leafOnly?"child":e.checkStrategy)}function xe(e,t){return!!e.rawNode[t]}function Jt(e,t,s,i){e==null||e.forEach(d=>{s(d),Jt(d[t],t,s,i),i(d)})}function Go(e,t,s,i,d){const o=new Set,c=new Set,u=[];return Jt(e,i,a=>{if(u.push(a),d(t,a)){c.add(a[s]);for(let r=u.length-2;r>=0;--r)if(!o.has(u[r][s]))o.add(u[r][s]);else return}},()=>{u.pop()}),{expandedKeys:Array.from(o),highlightKeySet:c}}if(Hn&&Image){const e=new Image;e.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}function Yo(e,t,s,i,d){const o=new Set,c=new Set,u=new Set,a=[],r=[],f=[];function h(v){v.forEach(S=>{if(f.push(S),t(s,S)){o.add(S[i]),u.add(S[i]);for(let w=f.length-2;w>=0;--w){const k=f[w][i];if(!c.has(k))c.add(k),o.has(k)&&o.delete(k);else break}}const R=S[d];R&&h(R),f.pop()})}h(e);function p(v,S){v.forEach(R=>{const w=R[i],k=o.has(w),K=c.has(w);if(!k&&!K)return;const A=R[d];if(A)if(k)S.push(R);else{a.push(w);const P=Object.assign(Object.assign({},R),{[d]:[]});S.push(P),p(A,P[d])}else S.push(R)})}return p(e,r),{filteredTree:r,highlightKeySet:u,expandedKeys:a}}const Jo=z({name:"TreeNode",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(e){const t=Ne(Ve),{droppingNodeParentRef:s,droppingMouseNodeRef:i,draggingNodeRef:d,droppingPositionRef:o,droppingOffsetLevelRef:c,nodePropsRef:u,indentRef:a,blockLineRef:r,checkboxPlacementRef:f,checkOnClickRef:h,disabledFieldRef:p}=t,v=Y(()=>!!e.tmNode.rawNode.checkboxDisabled),S=Y(()=>xe(e.tmNode,p.value)),R=Y(()=>t.disabledRef.value||S.value),w=$(()=>{const{value:b}=u;if(b)return b({option:e.tmNode.rawNode})}),k=V(null),K={value:null};Wn(()=>{K.value=k.value.$el});function A(){const{tmNode:b}=e;if(!b.isLeaf&&!b.shallowLoaded){if(!t.loadingKeysRef.value.has(b.key))t.loadingKeysRef.value.add(b.key);else return;const{onLoadRef:{value:E}}=t;E&&E(b.rawNode).then(B=>{B!==!1&&t.handleSwitcherClick(b)}).finally(()=>{t.loadingKeysRef.value.delete(b.key)})}else t.handleSwitcherClick(b)}const P=Y(()=>!S.value&&t.selectableRef.value&&(t.internalTreeSelect?t.mergedCheckStrategyRef.value!=="child"||t.multipleRef.value&&t.cascadeRef.value||e.tmNode.isLeaf:!0)),M=Y(()=>t.checkableRef.value&&(t.cascadeRef.value||t.mergedCheckStrategyRef.value!=="child"||e.tmNode.isLeaf)),Z=Y(()=>t.displayedCheckedKeysRef.value.includes(e.tmNode.key)),ge=Y(()=>{const{value:b}=M;if(!b)return!1;const{value:E}=h;return typeof E=="boolean"?E:E(e.tmNode.rawNode)});function re(b){const{value:E}=t.expandOnClickRef,{value:B}=P,{value:Re}=ge;if(!B&&!E&&!Re||Lt(b,"checkbox")||Lt(b,"switcher"))return;const{tmNode:je}=e;B&&t.handleSelect(je),E&&!je.isLeaf&&A(),Re&&ve(!Z.value)}function ke(b){var E,B;r.value||(R.value||re(b),(B=(E=w.value)===null||E===void 0?void 0:E.onClick)===null||B===void 0||B.call(E,b))}function ie(b){var E,B;r.value&&(R.value||re(b),(B=(E=w.value)===null||E===void 0?void 0:E.onClick)===null||B===void 0||B.call(E,b))}function ve(b){t.handleCheck(e.tmNode,b)}function Se(b){t.handleDragStart({event:b,node:e.tmNode})}function Ie(b){b.currentTarget===b.target&&t.handleDragEnter({event:b,node:e.tmNode})}function ee(b){b.preventDefault(),t.handleDragOver({event:b,node:e.tmNode})}function pe(b){t.handleDragEnd({event:b,node:e.tmNode})}function be(b){b.currentTarget===b.target&&t.handleDragLeave({event:b,node:e.tmNode})}function nt(b){b.preventDefault(),o.value!==null&&t.handleDrop({event:b,node:e.tmNode,dropPosition:o.value})}return{showDropMark:Y(()=>{const{value:b}=d;if(!b)return;const{value:E}=o;if(!E)return;const{value:B}=i;if(!B)return;const{tmNode:Re}=e;return Re.key===B.key}),showDropMarkAsParent:Y(()=>{const{value:b}=s;if(!b)return!1;const{tmNode:E}=e,{value:B}=o;return B==="before"||B==="after"?b.key===E.key:!1}),pending:Y(()=>t.pendingNodeKeyRef.value===e.tmNode.key),loading:Y(()=>t.loadingKeysRef.value.has(e.tmNode.key)),highlight:Y(()=>{var b;return(b=t.highlightKeySetRef.value)===null||b===void 0?void 0:b.has(e.tmNode.key)}),checked:Z,indeterminate:Y(()=>t.displayedIndeterminateKeysRef.value.includes(e.tmNode.key)),selected:Y(()=>t.mergedSelectedKeysRef.value.includes(e.tmNode.key)),expanded:Y(()=>t.mergedExpandedKeysRef.value.includes(e.tmNode.key)),disabled:R,checkable:M,mergedCheckOnClick:ge,checkboxDisabled:v,selectable:P,expandOnClick:t.expandOnClickRef,internalScrollable:t.internalScrollableRef,draggable:t.draggableRef,blockLine:r,nodeProps:w,checkboxFocusable:t.internalCheckboxFocusableRef,droppingPosition:o,droppingOffsetLevel:c,indent:a,checkboxPlacement:f,contentInstRef:k,contentElRef:K,handleCheck:ve,handleDrop:nt,handleDragStart:Se,handleDragEnter:Ie,handleDragOver:ee,handleDragEnd:pe,handleDragLeave:be,handleLineClick:ie,handleContentClick:ke,handleSwitcherClick:A}},render(){const{tmNode:e,clsPrefix:t,checkable:s,expandOnClick:i,selectable:d,selected:o,checked:c,highlight:u,draggable:a,blockLine:r,indent:f,disabled:h,pending:p,internalScrollable:v,nodeProps:S,checkboxPlacement:R}=this,w=a&&!h?{onDragenter:this.handleDragEnter,onDragleave:this.handleDragLeave,onDragend:this.handleDragEnd,onDrop:this.handleDrop,onDragover:this.handleDragOver}:void 0,k=v?Wt(e.key):void 0,K=R==="right",A=s?C(Ho,{right:K,focusable:this.checkboxFocusable,disabled:h||this.checkboxDisabled,clsPrefix:t,checked:this.checked,indeterminate:this.indeterminate,onCheck:this.handleCheck}):null;return C("div",Object.assign({class:`${t}-tree-node-wrapper`},w),C("div",Object.assign({},r?S:void 0,{class:[`${t}-tree-node`,{[`${t}-tree-node--selected`]:o,[`${t}-tree-node--checkable`]:s,[`${t}-tree-node--highlight`]:u,[`${t}-tree-node--pending`]:p,[`${t}-tree-node--disabled`]:h,[`${t}-tree-node--selectable`]:d,[`${t}-tree-node--clickable`]:d||i||this.mergedCheckOnClick},S==null?void 0:S.class],"data-key":k,draggable:a&&r,onClick:this.handleLineClick,onDragstart:a&&r&&!h?this.handleDragStart:void 0}),qn(e.level,C("div",{class:`${t}-tree-node-indent`},C("div",{style:{width:`${f}px`}}))),C(jo,{clsPrefix:t,expanded:this.expanded,selected:o,loading:this.loading,hide:e.isLeaf,onClick:this.handleSwitcherClick}),K?null:A,C(Wo,{ref:"contentInstRef",clsPrefix:t,checked:c,selected:o,onClick:this.handleContentClick,nodeProps:r?void 0:S,onDragstart:a&&!r&&!h?this.handleDragStart:void 0,tmNode:e}),a?this.showDropMark?zt({el:this.contentElRef.value,position:this.droppingPosition,offsetLevel:this.droppingOffsetLevel,indent:f}):this.showDropMarkAsParent?zt({el:this.contentElRef.value,position:"inside",offsetLevel:this.droppingOffsetLevel,indent:f}):null:null,K?A:null))}}),Zt=Jo;function Zo({props:e,fNodesRef:t,mergedExpandedKeysRef:s,mergedSelectedKeysRef:i,handleSelect:d,handleSwitcherClick:o}){const{value:c}=i,u=Ne(Yt,null),a=u?u.pendingNodeKeyRef:V(c.length?c[c.length-1]:null);function r(f){if(!e.keyboard)return;const{value:h}=a;if(h===null){if((f.key==="ArrowDown"||f.key==="ArrowUp")&&f.preventDefault(),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(f.key)&&h===null){const{value:p}=t;let v=0;for(;v<p.length;){if(!p[v].disabled){a.value=p[v].key;break}v+=1}}}else{const{value:p}=t;let v=p.findIndex(S=>S.key===h);if(!~v)return;if(f.key==="Enter")d(p[v]);else if(f.key==="ArrowDown")for(f.preventDefault(),v+=1;v<p.length;){if(!p[v].disabled){a.value=p[v].key;break}v+=1}else if(f.key==="ArrowUp")for(f.preventDefault(),v-=1;v>=0;){if(!p[v].disabled){a.value=p[v].key;break}v-=1}else if(f.key==="ArrowLeft"){const S=p[v];if(S.isLeaf||!s.value.includes(h)){const R=S.getParent();R&&(a.value=R.key)}else o(S)}else if(f.key==="ArrowRight"){const S=p[v];if(S.isLeaf)return;if(!s.value.includes(h))o(S);else for(v+=1;v<p.length;){if(!p[v].disabled){a.value=p[v].key;break}v+=1}}}}return{pendingNodeKeyRef:a,handleKeydown:r}}const Qo=z({name:"TreeMotionWrapper",props:{clsPrefix:{type:String,required:!0},height:Number,nodes:{type:Array,required:!0},mode:{type:String,required:!0},onAfterEnter:{type:Function,required:!0}},render(){const{clsPrefix:e}=this;return C(Ut,{onAfterEnter:this.onAfterEnter,appear:!0,reverse:this.mode==="collapse"},{default:()=>C("div",{class:[`${e}-tree-motion-wrapper`,`${e}-tree-motion-wrapper--${this.mode}`],style:{height:Xn(this.height)}},this.nodes.map(t=>C(Zt,{clsPrefix:e,tmNode:t})))})}}),er=D("tree",`
 font-size: var(--n-font-size);
 outline: none;
`,[T("ul, li",`
 margin: 0;
 padding: 0;
 list-style: none;
 `),T(">",[D("tree-node",[T("&:first-child",{marginTop:0})])]),D("tree-node-indent",`
 flex-grow: 0;
 flex-shrink: 0;
 height: 0;
 `),D("tree-motion-wrapper",[L("expand",[ht({duration:"0.2s"})]),L("collapse",[ht({duration:"0.2s",reverse:!0})])]),D("tree-node-wrapper",`
 box-sizing: border-box;
 padding: 3px 0;
 `),D("tree-node",`
 transform: translate3d(0,0,0);
 position: relative;
 display: flex;
 border-radius: var(--n-node-border-radius);
 transition: background-color .3s var(--n-bezier);
 `,[L("highlight",[D("tree-node-content",[X("text",{borderBottomColor:"var(--n-node-text-color-disabled)"})])]),L("disabled",[D("tree-node-content",`
 color: var(--n-node-text-color-disabled);
 cursor: not-allowed;
 `)]),Pe("disabled",[L("clickable",[D("tree-node-content",`
 cursor: pointer;
 `)])])]),L("block-node",[D("tree-node-content",`
 flex: 1;
 min-width: 0;
 `)]),Pe("block-line",[D("tree-node",[Pe("disabled",[D("tree-node-content",[T("&:hover",{backgroundColor:"var(--n-node-color-hover)"})]),L("selectable",[D("tree-node-content",[T("&:active",{backgroundColor:"var(--n-node-color-pressed)"})])]),L("pending",[D("tree-node-content",`
 background-color: var(--n-node-color-hover);
 `)]),L("selected",[D("tree-node-content",{backgroundColor:"var(--n-node-color-active)"})])])])]),L("block-line",[D("tree-node",[Pe("disabled",[T("&:hover",{backgroundColor:"var(--n-node-color-hover)"}),L("pending",`
 background-color: var(--n-node-color-hover);
 `),L("selectable",[Pe("selected",[T("&:active",{backgroundColor:"var(--n-node-color-pressed)"})])]),L("selected",{backgroundColor:"var(--n-node-color-active)"})]),L("disabled",`
 cursor: not-allowed;
 `)])]),D("tree-node-switcher",`
 cursor: pointer;
 display: inline-flex;
 flex-shrink: 0;
 height: 24px;
 width: 24px;
 align-items: center;
 justify-content: center;
 transition: transform .15s var(--n-bezier);
 vertical-align: bottom;
 `,[X("icon",`
 position: relative;
 height: 14px;
 width: 14px;
 display: flex;
 color: var(--n-arrow-color);
 transition: color .3s var(--n-bezier);
 font-size: 14px;
 `,[D("icon",[ut()]),D("base-loading",`
 color: var(--n-loading-color);
 position: absolute;
 left: 0;
 top: 0;
 right: 0;
 bottom: 0;
 `,[ut()]),D("base-icon",[ut()])]),L("hide",{visibility:"hidden"}),L("expanded",{transform:"rotate(90deg)"})]),D("tree-node-checkbox",`
 display: inline-flex;
 height: 24px;
 width: 16px;
 vertical-align: bottom;
 align-items: center;
 justify-content: center;
 margin-right: 4px;
 `,[L("right","margin-left: 4px;")]),L("checkable",[D("tree-node-content",`
 padding: 0 6px;
 `)]),D("tree-node-content",`
 position: relative;
 display: inline-flex;
 align-items: center;
 min-height: 24px;
 box-sizing: border-box;
 line-height: 1.5;
 vertical-align: bottom;
 padding: 0 6px 0 4px;
 cursor: default;
 border-radius: var(--n-node-border-radius);
 text-decoration-color: #0000;
 text-decoration-line: underline;
 color: var(--n-node-text-color);
 transition:
 color .3s var(--n-bezier),
 text-decoration-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[T("&:last-child",{marginBottom:0}),X("prefix",`
 display: inline-flex;
 margin-right: 8px;
 `),X("text",`
 border-bottom: 1px solid #0000;
 transition: border-color .3s var(--n-bezier);
 flex-grow: 1;
 max-width: 100%;
 `),X("suffix",`
 display: inline-flex;
 `)]),X("empty","margin: auto;")]);var tr=globalThis&&globalThis.__awaiter||function(e,t,s,i){function d(o){return o instanceof s?o:new s(function(c){c(o)})}return new(s||(s=Promise))(function(o,c){function u(f){try{r(i.next(f))}catch(h){c(h)}}function a(f){try{r(i.throw(f))}catch(h){c(h)}}function r(f){f.done?o(f.value):d(f.value).then(u,a)}r((i=i.apply(e,t||[])).next())})};const Je=30;function nr(e,t,s,i){return{getIsGroup(){return!1},getKey(o){return o[e]},getChildren:i||(o=>o[t]),getDisabled(o){return!!(o[s]||o.checkboxDisabled)}}}const or={allowCheckingNotLoaded:Boolean,filter:Function,defaultExpandAll:Boolean,expandedKeys:Array,keyField:{type:String,default:"key"},labelField:{type:String,default:"label"},childrenField:{type:String,default:"children"},disabledField:{type:String,default:"disabled"},defaultExpandedKeys:{type:Array,default:()=>[]},indeterminateKeys:Array,renderSwitcherIcon:Function,onUpdateIndeterminateKeys:[Function,Array],"onUpdate:indeterminateKeys":[Function,Array],onUpdateExpandedKeys:[Function,Array],"onUpdate:expandedKeys":[Function,Array]},rr=Object.assign(Object.assign(Object.assign(Object.assign({},Fe.props),{accordion:Boolean,showIrrelevantNodes:{type:Boolean,default:!0},data:{type:Array,default:()=>[]},expandOnDragenter:{type:Boolean,default:!0},expandOnClick:Boolean,checkOnClick:{type:[Boolean,Function],default:!1},cancelable:{type:Boolean,default:!0},checkable:Boolean,draggable:Boolean,blockNode:Boolean,blockLine:Boolean,disabled:Boolean,checkedKeys:Array,defaultCheckedKeys:{type:Array,default:()=>[]},selectedKeys:Array,defaultSelectedKeys:{type:Array,default:()=>[]},multiple:Boolean,pattern:{type:String,default:""},onLoad:Function,cascade:Boolean,selectable:{type:Boolean,default:!0},indent:{type:Number,default:16},allowDrop:{type:Function,default:qo},animated:{type:Boolean,default:!0},checkboxPlacement:{type:String,default:"left"},virtualScroll:Boolean,watchProps:Array,renderLabel:Function,renderPrefix:Function,renderSuffix:Function,nodeProps:Function,keyboard:{type:Boolean,default:!0},getChildren:Function,onDragenter:[Function,Array],onDragleave:[Function,Array],onDragend:[Function,Array],onDragstart:[Function,Array],onDragover:[Function,Array],onDrop:[Function,Array],onUpdateCheckedKeys:[Function,Array],"onUpdate:checkedKeys":[Function,Array],onUpdateSelectedKeys:[Function,Array],"onUpdate:selectedKeys":[Function,Array]}),or),{internalTreeSelect:Boolean,internalScrollable:Boolean,internalScrollablePadding:String,internalRenderEmpty:Function,internalHighlightKeySet:Object,internalUnifySelectCheck:Boolean,internalCheckboxFocusable:{type:Boolean,default:!0},internalFocusable:{type:Boolean,default:!0},checkStrategy:{type:String,default:"all"},leafOnly:Boolean}),lr=z({name:"Tree",props:rr,setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:s,mergedRtlRef:i}=et(e),d=tt("Tree",i,t),o=Fe("Tree","-tree",er,Oo,e,t),c=V(null),u=V(null),a=V(null);function r(){var n;return(n=a.value)===null||n===void 0?void 0:n.listElRef}function f(){var n;return(n=a.value)===null||n===void 0?void 0:n.itemsElRef}const h=$(()=>{const{filter:n}=e;if(n)return n;const{labelField:l}=e;return(g,y)=>{if(!g.length)return!0;const x=y[l];return typeof x=="string"?x.toLowerCase().includes(g.toLowerCase()):!1}}),p=$(()=>{const{pattern:n}=e;return n?!n.length||!h.value?{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}:Yo(e.data,h.value,n,e.keyField,e.childrenField):{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}}),v=$(()=>so(e.showIrrelevantNodes?e.data:p.value.filteredTree,nr(e.keyField,e.childrenField,e.disabledField,e.getChildren))),S=Ne(Yt,null),R=e.internalTreeSelect?S.dataTreeMate:v,{watchProps:w}=e,k=V([]);w!=null&&w.includes("defaultCheckedKeys")?he(()=>{k.value=e.defaultCheckedKeys}):k.value=e.defaultCheckedKeys;const K=I(e,"checkedKeys"),A=Me(K,k),P=$(()=>R.value.getCheckedKeys(A.value,{cascade:e.cascade,allowNotLoaded:e.allowCheckingNotLoaded})),M=Xo(e),Z=$(()=>P.value.checkedKeys),ge=$(()=>{const{indeterminateKeys:n}=e;return n!==void 0?n:P.value.indeterminateKeys}),re=V([]);w!=null&&w.includes("defaultSelectedKeys")?he(()=>{re.value=e.defaultSelectedKeys}):re.value=e.defaultSelectedKeys;const ke=I(e,"selectedKeys"),ie=Me(ke,re),ve=V([]),Se=n=>{ve.value=e.defaultExpandAll?R.value.getNonLeafKeys():n===void 0?e.defaultExpandedKeys:n};w!=null&&w.includes("defaultExpandedKeys")?he(()=>{Se(void 0)}):he(()=>{Se(e.defaultExpandedKeys)});const Ie=I(e,"expandedKeys"),ee=Me(Ie,ve),pe=$(()=>v.value.getFlattenedNodes(ee.value)),{pendingNodeKeyRef:be,handleKeydown:nt}=Zo({props:e,mergedSelectedKeysRef:ie,fNodesRef:pe,mergedExpandedKeysRef:ee,handleSelect:at,handleSwitcherClick:Nt});let b=null,E=null;const B=V(new Set),Re=$(()=>e.internalHighlightKeySet||p.value.highlightKeySet),je=Me(Re,B),He=V(new Set),en=$(()=>ee.value.filter(n=>!He.value.has(n)));let xt=0;const Ae=V(null),We=V(null),qe=V(null),Xe=V(null),Ge=V(0),tn=$(()=>{const{value:n}=We;return n?n.parent:null});Ue(I(e,"data"),()=>{He.value.clear(),be.value=null,Be()},{deep:!1});let ot=!1;const rt=()=>{ot=!0,Ze(()=>{ot=!1})};let ze;Ue(I(e,"pattern"),(n,l)=>{if(e.showIrrelevantNodes)if(ze=void 0,n){const{expandedKeys:g,highlightKeySet:y}=Go(e.data,e.pattern,e.keyField,e.childrenField,h.value);B.value=y,rt(),Ke(g,Q(g),{node:null,action:"filter"})}else B.value=new Set;else if(!n.length)ze!==void 0&&(rt(),Ke(ze,Q(ze),{node:null,action:"filter"}));else{l.length||(ze=ee.value);const{expandedKeys:g}=p.value;g!==void 0&&(rt(),Ke(g,Q(g),{node:null,action:"filter"}))}});function kt(n){return tr(this,void 0,void 0,function*(){const{onLoad:l}=e;if(!l){yield Promise.resolve();return}const{value:g}=He;if(!g.has(n.key)){g.add(n.key);try{(yield l(n.rawNode))===!1&&De()}catch(y){console.error(y),De()}g.delete(n.key)}})}he(()=>{var n;const{value:l}=v;if(!l)return;const{getNode:g}=l;(n=ee.value)===null||n===void 0||n.forEach(y=>{const x=g(y);x&&!x.shallowLoaded&&kt(x)})});const _e=V(!1),me=V([]);Ue(en,(n,l)=>{if(!e.animated||ot){Ze(Ye);return}const g=new Set(l);let y=null,x=null;for(const U of n)if(!g.has(U)){if(y!==null)return;y=U}const W=new Set(n);for(const U of l)if(!W.has(U)){if(x!==null)return;x=U}if(y===null&&x===null)return;const{virtualScroll:j}=e,se=(j?a.value.listElRef:c.value).offsetHeight,we=Math.ceil(se/Je)+1;let de;if(y!==null&&(de=l),x!==null&&(de===void 0?de=n:de=de.filter(U=>U!==x)),_e.value=!0,me.value=v.value.getFlattenedNodes(de),y!==null){const U=me.value.findIndex(q=>q.key===y);if(~U){const q=me.value[U].children;if(q){const ye=$t(q,n);me.value.splice(U+1,0,{__motion:!0,mode:"expand",height:j?ye.length*Je:void 0,nodes:j?ye.slice(0,we):ye})}}}if(x!==null){const U=me.value.findIndex(q=>q.key===x);if(~U){const q=me.value[U].children;if(!q)return;_e.value=!0;const ye=$t(q,n);me.value.splice(U+1,0,{__motion:!0,mode:"collapse",height:j?ye.length*Je:void 0,nodes:j?ye.slice(0,we):ye})}}});const nn=$(()=>co(pe.value)),on=$(()=>_e.value?me.value:pe.value);function Ye(){const{value:n}=u;n&&n.sync()}function rn(){_e.value=!1,e.virtualScroll&&Ze(Ye)}function Q(n){const{getNode:l}=R.value;return n.map(g=>{var y;return((y=l(g))===null||y===void 0?void 0:y.rawNode)||null})}function Ke(n,l,g){const{"onUpdate:expandedKeys":y,onUpdateExpandedKeys:x}=e;ve.value=n,y&&H(y,n,l,g),x&&H(x,n,l,g)}function Ct(n,l,g){const{"onUpdate:checkedKeys":y,onUpdateCheckedKeys:x}=e;k.value=n,x&&H(x,n,l,g),y&&H(y,n,l,g)}function ln(n,l){const{"onUpdate:indeterminateKeys":g,onUpdateIndeterminateKeys:y}=e;g&&H(g,n,l),y&&H(y,n,l)}function lt(n,l,g){const{"onUpdate:selectedKeys":y,onUpdateSelectedKeys:x}=e;re.value=n,x&&H(x,n,l,g),y&&H(y,n,l,g)}function an(n){const{onDragenter:l}=e;l&&H(l,n)}function dn(n){const{onDragleave:l}=e;l&&H(l,n)}function sn(n){const{onDragend:l}=e;l&&H(l,n)}function cn(n){const{onDragstart:l}=e;l&&H(l,n)}function un(n){const{onDragover:l}=e;l&&H(l,n)}function fn(n){const{onDrop:l}=e;l&&H(l,n)}function Be(){hn(),Ce()}function hn(){Ae.value=null}function Ce(){Ge.value=0,We.value=null,qe.value=null,Xe.value=null,De()}function De(){b&&(window.clearTimeout(b),b=null),E=null}function wt(n,l){if(e.disabled||xe(n,e.disabledField))return;if(e.internalUnifySelectCheck&&!e.multiple){at(n);return}const g=l?"check":"uncheck",{checkedKeys:y,indeterminateKeys:x}=R.value[g](n.key,Z.value,{cascade:e.cascade,checkStrategy:M.value,allowNotLoaded:e.allowCheckingNotLoaded});Ct(y,Q(y),{node:n.rawNode,action:g}),ln(x,Q(x))}function gn(n){if(e.disabled)return;const{key:l}=n,{value:g}=ee,y=g.findIndex(x=>x===l);if(~y){const x=Array.from(g);x.splice(y,1),Ke(x,Q(x),{node:n.rawNode,action:"collapse"})}else{const x=v.value.getNode(l);if(!x||x.isLeaf)return;let W;if(e.accordion){const j=new Set(n.siblings.map(({key:se})=>se));W=g.filter(se=>!j.has(se)),W.push(l)}else W=g.concat(l);Ke(W,Q(W),{node:n.rawNode,action:"expand"})}}function Nt(n){e.disabled||_e.value||gn(n)}function at(n){if(!(e.disabled||!e.selectable)){if(be.value=n.key,e.internalUnifySelectCheck){const{value:{checkedKeys:l,indeterminateKeys:g}}=P;e.multiple?wt(n,!(l.includes(n.key)||g.includes(n.key))):Ct([n.key],Q([n.key]),{node:n.rawNode,action:"check"})}if(e.multiple){const l=Array.from(ie.value),g=l.findIndex(y=>y===n.key);~g?e.cancelable&&l.splice(g,1):~g||l.push(n.key),lt(l,Q(l),{node:n.rawNode,action:~g?"unselect":"select"})}else ie.value.includes(n.key)?e.cancelable&&lt([],[],{node:n.rawNode,action:"unselect"}):lt([n.key],Q([n.key]),{node:n.rawNode,action:"select"})}}function vn(n){if(b&&(window.clearTimeout(b),b=null),n.isLeaf)return;E=n.key;const l=()=>{if(E!==n.key)return;const{value:g}=qe;if(g&&g.key===n.key&&!ee.value.includes(n.key)){const y=ee.value.concat(n.key);Ke(y,Q(y),{node:n.rawNode,action:"expand"})}b=null,E=null};n.shallowLoaded?b=window.setTimeout(()=>{l()},1e3):b=window.setTimeout(()=>{kt(n).then(()=>{l()})},1e3)}function pn({event:n,node:l}){!e.draggable||e.disabled||xe(l,e.disabledField)||(St({event:n,node:l},!1),an({event:n,node:l.rawNode}))}function bn({event:n,node:l}){!e.draggable||e.disabled||xe(l,e.disabledField)||dn({event:n,node:l.rawNode})}function mn(n){n.target===n.currentTarget&&Ce()}function yn({event:n,node:l}){Be(),!(!e.draggable||e.disabled||xe(l,e.disabledField))&&sn({event:n,node:l.rawNode})}function xn({event:n,node:l}){!e.draggable||e.disabled||xe(l,e.disabledField)||(xt=n.clientX,Ae.value=l,cn({event:n,node:l.rawNode}))}function St({event:n,node:l},g=!0){var y;if(!e.draggable||e.disabled||xe(l,e.disabledField))return;const{value:x}=Ae;if(!x)return;const{allowDrop:W,indent:j}=e;g&&un({event:n,node:l.rawNode});const se=n.currentTarget,{height:we,top:de}=se.getBoundingClientRect(),U=n.clientY-de;let q;W({node:l.rawNode,dropPosition:"inside",phase:"drag"})?U<=8?q="before":U>=we-8?q="after":q="inside":U<=we/2?q="before":q="after";const{value:_n}=nn;let F,J;const it=_n(l.key);if(it===null){Ce();return}let _t=!1;q==="inside"?(F=l,J="inside"):q==="before"?l.isFirstChild?(F=l,J="before"):(F=pe.value[it-1],J="after"):(F=l,J="after"),!F.isLeaf&&ee.value.includes(F.key)&&(_t=!0,J==="after"&&(F=pe.value[it+1],F?J="before":(F=l,J="inside")));const Kt=F;if(qe.value=Kt,!_t&&x.isLastChild&&x.key===F.key&&(J="after"),J==="after"){let Dt=xt-n.clientX,dt=0;for(;Dt>=j/2&&F.parent!==null&&F.isLastChild&&dt<1;)Dt-=j,dt+=1,F=F.parent;Ge.value=dt}else Ge.value=0;if((x.contains(F)||J==="inside"&&((y=x.parent)===null||y===void 0?void 0:y.key)===F.key)&&!(x.key===Kt.key&&x.key===F.key)){Ce();return}if(!W({node:F.rawNode,dropPosition:J,phase:"drag"})){Ce();return}if(x.key===F.key)De();else if(E!==F.key)if(J==="inside"){if(e.expandOnDragenter){if(vn(F),!F.shallowLoaded&&E!==F.key){Be();return}}else if(!F.shallowLoaded){Be();return}}else De();else J!=="inside"&&De();Xe.value=J,We.value=F}function kn({event:n,node:l,dropPosition:g}){if(!e.draggable||e.disabled||xe(l,e.disabledField))return;const{value:y}=Ae,{value:x}=We,{value:W}=Xe;if(!(!y||!x||!W)&&e.allowDrop({node:x.rawNode,dropPosition:W,phase:"drag"})&&y.key!==x.key){if(W==="before"){const j=y.getNext({includeDisabled:!0});if(j&&j.key===x.key){Ce();return}}if(W==="after"){const j=y.getPrev({includeDisabled:!0});if(j&&j.key===x.key){Ce();return}}fn({event:n,node:x.rawNode,dragNode:y.rawNode,dropPosition:g}),Be()}}function Cn(){Ye()}function wn(){Ye()}function Nn(n){var l;if(e.virtualScroll||e.internalScrollable){const{value:g}=u;if(!((l=g==null?void 0:g.containerRef)===null||l===void 0)&&l.contains(n.relatedTarget))return;be.value=null}else{const{value:g}=c;if(g!=null&&g.contains(n.relatedTarget))return;be.value=null}}Ue(be,n=>{var l,g;if(n!==null){if(e.virtualScroll)(l=a.value)===null||l===void 0||l.scrollTo({key:n});else if(e.internalScrollable){const{value:y}=u;if(y===null)return;const x=(g=y.contentRef)===null||g===void 0?void 0:g.querySelector(`[data-key="${Wt(n)}"]`);if(!x)return;y.scrollTo({el:x})}}}),Ot(Ve,{loadingKeysRef:He,highlightKeySetRef:je,displayedCheckedKeysRef:Z,displayedIndeterminateKeysRef:ge,mergedSelectedKeysRef:ie,mergedExpandedKeysRef:ee,mergedThemeRef:o,mergedCheckStrategyRef:M,nodePropsRef:I(e,"nodeProps"),disabledRef:I(e,"disabled"),checkableRef:I(e,"checkable"),selectableRef:I(e,"selectable"),expandOnClickRef:I(e,"expandOnClick"),onLoadRef:I(e,"onLoad"),draggableRef:I(e,"draggable"),blockLineRef:I(e,"blockLine"),indentRef:I(e,"indent"),cascadeRef:I(e,"cascade"),checkOnClickRef:I(e,"checkOnClick"),checkboxPlacementRef:e.checkboxPlacement,droppingMouseNodeRef:qe,droppingNodeParentRef:tn,draggingNodeRef:Ae,droppingPositionRef:Xe,droppingOffsetLevelRef:Ge,fNodesRef:pe,pendingNodeKeyRef:be,disabledFieldRef:I(e,"disabledField"),internalScrollableRef:I(e,"internalScrollable"),internalCheckboxFocusableRef:I(e,"internalCheckboxFocusable"),internalTreeSelect:e.internalTreeSelect,renderLabelRef:I(e,"renderLabel"),renderPrefixRef:I(e,"renderPrefix"),renderSuffixRef:I(e,"renderSuffix"),renderSwitcherIconRef:I(e,"renderSwitcherIcon"),labelFieldRef:I(e,"labelField"),multipleRef:I(e,"multiple"),handleSwitcherClick:Nt,handleDragEnd:yn,handleDragEnter:pn,handleDragLeave:bn,handleDragStart:xn,handleDrop:kn,handleDragOver:St,handleSelect:at,handleCheck:wt});function Sn(n){var l;(l=a.value)===null||l===void 0||l.scrollTo(n)}const Rn={handleKeydown:nt,scrollTo:Sn,getCheckedData:()=>{if(!e.checkable)return{keys:[],options:[]};const{checkedKeys:n}=P.value;return{keys:n,options:Q(n)}},getIndeterminateData:()=>{if(!e.checkable)return{keys:[],options:[]};const{indeterminateKeys:n}=P.value;return{keys:n,options:Q(n)}}},Rt=$(()=>{const{common:{cubicBezierEaseInOut:n},self:{fontSize:l,nodeBorderRadius:g,nodeColorHover:y,nodeColorPressed:x,nodeColorActive:W,arrowColor:j,loadingColor:se,nodeTextColor:we,nodeTextColorDisabled:de,dropMarkColor:U}}=o.value;return{"--n-arrow-color":j,"--n-loading-color":se,"--n-bezier":n,"--n-font-size":l,"--n-node-border-radius":g,"--n-node-color-active":W,"--n-node-color-hover":y,"--n-node-color-pressed":x,"--n-node-text-color":we,"--n-node-text-color-disabled":de,"--n-drop-mark-color":U}}),Te=s?mt("tree",void 0,Rt,e):void 0;return Object.assign(Object.assign({},Rn),{mergedClsPrefix:t,mergedTheme:o,rtlEnabled:d,fNodes:on,aip:_e,selfElRef:c,virtualListInstRef:a,scrollbarInstRef:u,handleFocusout:Nn,handleDragLeaveTree:mn,handleScroll:Cn,getScrollContainer:r,getScrollContent:f,handleAfterEnter:rn,handleResize:wn,cssVars:s?void 0:Rt,themeClass:Te==null?void 0:Te.themeClass,onRender:Te==null?void 0:Te.onRender})},render(){var e;const{fNodes:t,internalRenderEmpty:s}=this;if(!t.length&&s)return s();const{mergedClsPrefix:i,blockNode:d,blockLine:o,draggable:c,disabled:u,internalFocusable:a,checkable:r,handleKeydown:f,rtlEnabled:h,handleFocusout:p}=this,v=a&&!u,S=v?"0":void 0,R=[`${i}-tree`,h&&`${i}-tree--rtl`,r&&`${i}-tree--checkable`,(o||d)&&`${i}-tree--block-node`,o&&`${i}-tree--block-line`],w=K=>"__motion"in K?C(Qo,{height:K.height,nodes:K.nodes,clsPrefix:i,mode:K.mode,onAfterEnter:this.handleAfterEnter}):C(Zt,{key:K.key,tmNode:K,clsPrefix:i});if(this.virtualScroll){const{mergedTheme:K,internalScrollablePadding:A}=this,P=Gn(A||"0");return C(Et,{ref:"scrollbarInstRef",onDragleave:c?this.handleDragLeaveTree:void 0,container:this.getScrollContainer,content:this.getScrollContent,class:R,theme:K.peers.Scrollbar,themeOverrides:K.peerOverrides.Scrollbar,tabindex:S,onKeydown:v?f:void 0,onFocusout:v?p:void 0},{default:()=>{var M;return(M=this.onRender)===null||M===void 0||M.call(this),C(io,{ref:"virtualListInstRef",items:this.fNodes,itemSize:Je,ignoreItemResize:this.aip,paddingTop:P.top,paddingBottom:P.bottom,class:this.themeClass,style:[this.cssVars,{paddingLeft:P.left,paddingRight:P.right}],onScroll:this.handleScroll,onResize:this.handleResize,showScrollbar:!1,itemResizable:!0},{default:({item:Z})=>w(Z)})}})}const{internalScrollable:k}=this;return R.push(this.themeClass),(e=this.onRender)===null||e===void 0||e.call(this),k?C(Et,{class:R,tabindex:S,onKeydown:v?f:void 0,onFocusout:v?p:void 0,style:this.cssVars,contentStyle:{padding:this.internalScrollablePadding}},{default:()=>C("div",{onDragleave:c?this.handleDragLeaveTree:void 0,ref:"selfElRef"},this.fNodes.map(w))}):C("div",{class:R,tabindex:S,ref:"selfElRef",style:this.cssVars,onKeydown:v?f:void 0,onFocusout:v?p:void 0,onDragleave:c?this.handleDragLeaveTree:void 0},t.length?t.map(w):Yn(this.$slots.empty,()=>[C(uo,{class:`${i}-tree__empty`,theme:this.mergedTheme.peers.Empty,themeOverrides:this.mergedTheme.peerOverrides.Empty})]))}}),Qt=z({__name:"DraggableCard",props:{initialValue:{default:()=>({})}},setup(e){const t=e,s=t.initialValue.left!==void 0,i=t.initialValue.top!==void 0,d={x:(s?t.initialValue.left:t.initialValue.right)??0,y:(i?t.initialValue.top:t.initialValue.bottom)??0},o=Vt({...d}),c=$(()=>{const k=s?`left:${o.x}px;`:`right:${o.x}px;`,K=i?`top:${o.y}px;`:`bottom:${o.y}px;`;return k+K});let u;const a=k=>{u=k,d.x=o.x,d.y=o.y},r=k=>{if(!p.value||!u)return;const K=k.clientX-u.clientX,A=k.clientY-u.clientY;o.x=d.x+(s?K:-K),o.y=d.y+(i?A:-A)},f=()=>{u=void 0},h=ne(),p=ne(),v=k=>{u&&k.preventDefault()},S=["transition-top,bottom,left,right-500"],R=()=>{if(!p.value)return;const{top:k,bottom:K,left:A,right:P}=p.value.getBoundingClientRect();if(P<0||A>window.innerWidth||K<0||k>window.innerHeight){o.x=d.x,o.y=d.y,f();const M=h.value;M&&(M.classList.add(...S),setTimeout(()=>{M.classList.remove(...S)},550))}};window.addEventListener("pointermove",r),window.addEventListener("pointerup",R),document.addEventListener("selectstart",v),Pt(()=>{window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",R),document.removeEventListener("selectstart",v),f()}),Ue(p,(k,K)=>{k&&(k.addEventListener("pointerdown",a),k.addEventListener("pointerup",f)),K&&(K.removeEventListener("pointerdown",a),K.removeEventListener("pointerup",f))}),Pt(()=>{p.value&&(p.value.removeEventListener("pointerdown",a),p.value.removeEventListener("pointerup",f))});const w=k=>{k instanceof HTMLElement?p.value=k:p.value=void 0};return(k,K)=>(G(),ae(Zn,{to:"body"},[oe("div",{fixed:"",ref_key:"box",ref:h,style:Ht([k.$attrs.style,c.value]),class:Jn(k.$attrs.class)},[jt(k.$slots,"default",{onRef:w})],6)]))}});const ar=["onClick"],ir=z({__name:"AttrCard",props:{focusNode:{}},setup(e){const t=e,s=["text","desc"],i=$(()=>Object.entries(t.focusNode.attr).map(([d,o])=>{const c={name:d,value:JSON.stringify(o)};return s.includes(d)?[c,{name:d+".length",value:JSON.stringify((o==null?void 0:o.length)??null)}]:c}).flat());return(d,o)=>(G(),ae(Qt,{initialValue:{top:90,right:10}},{default:N(({onRef:c})=>[_(m(Xt),{size:"small",striped:"",singleLine:!1,class:"gkd_code"},{default:N(()=>[oe("thead",{"cursor-move":"",ref:c},[_(m(Qe),null,{default:N(()=>[_(m(ue),null,{default:N(()=>[O(" Name ")]),_:1}),_(m(ue),null,{default:N(()=>[O(" Value ")]),_:1})]),_:1})],512),_(m(Gt),null,{default:N(()=>[(G(!0),$e(vt,null,gt(i.value,u=>(G(),ae(m(Qe),{key:u.name},{default:N(()=>[_(m(fe),null,{default:N(()=>[oe("span",{onClick:a=>m(Ee)(`${u.name}=${u.value}`)},te(u.name),9,ar)]),_:2},1024),_(m(fe),null,{default:N(()=>[_(m(Le),{style:{width:"250px"}},{default:N(()=>[O(te(u.value),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:2},1024)]),_:1}))}}),dr={flex:"","flex-col":"",relative:"","h-full":""},sr=["src"],cr=oe("div",{absolute:"","left--2px":"","top--2px":"","b-1px":"","b-red":"","b-solid":"",style:{height:"calc(100% + 2px)",width:"calc(100% + 2px)"}},null,-1),ur=[cr],fr=z({__name:"ScreenshotCard",props:{url:{},snapshot:{},rootNode:{},focusNode:{},onUpdateFocusNode:{type:Function,default:()=>()=>{}}},setup(e){const t=e,s=ne();he(async()=>{s.value=await fo(t.url)});const i=ne();he(()=>{if(!t.rootNode)return;const o=i.value,c=o==null?void 0:o.target;if(!o||!c||!(c instanceof HTMLImageElement))return;const u=c.getBoundingClientRect(),a=(o.clientX-u.left)/c.offsetWidth*c.naturalWidth,r=(o.clientY-u.top)/c.offsetHeight*c.naturalHeight,f=ho(t.snapshot.nodes,a,r);f&&t.onUpdateFocusNode(f)});const d=$(()=>{const o=s.value;if(!o||!t.focusNode)return"";const c=t.focusNode.attr;return{left:`calc(${100*c.left/o.width+"%"} - 1px)`,top:`calc(${100*c.top/o.height+"%"} - 1px)`,width:100*(c.right-c.left)/o.width+"%",height:100*(c.bottom-c.top)/o.height+"%"}});return(o,c)=>(G(),$e("div",dr,[oe("img",{src:o.url,onClick:c[0]||(c[0]=u=>i.value=u),"h-full":"","cursor-crosshair":""},null,8,sr),oe("div",{style:Ht(d.value),absolute:"","pointer-events-none":"","transition-all-300":"","b-1px":"","b-blue":"","b-solid":""},ur,4)]))}}),hr={"w-500px":"","bg-white":"","b-1px":"","b-solid":"","b-gray-200":"","rounded-4px":"","p-8px":""},gr={flex:"","m-b-4px":""},vr=oe("div",{"p-5px":""},null,-1),pr={"break-all":""},br=oe("div",{"p-l-8px":""},null,-1),mr=z({__name:"SearchCard",props:{rootNode:{},onUpdateFocusNode:{type:Function,default:()=>()=>{}}},setup(e){const t=e,s=ne(""),i=Vt([]),d=mo(()=>{if(!t.rootNode){le.error("根节点不存在");return}const c=s.value.trim();if(c)if(o.value){if(i.find(r=>typeof r.selector=="object"&&r.selector.toString()==c)){le.warning("不可重复选择");return}const u=yo(()=>xo(c),"选择器非法"),a=u.querySelectorAll(t.rootNode);if(a.length==0){le.success("没有选择到节点");return}le.success(`选择到 ${a.length} 个节点`),i.unshift({selector:u,results:a})}else{if(i.find(r=>typeof r.selector=="string"&&r.selector.toString()==c)){le.warning("不可重复选择");return}const u=[],a=[t.rootNode];for(;a.length>0;){const r=a.pop();pt(r).includes(c)&&u.push(r),a.push(...[...r.children].reverse())}if(u.length==0){le.success("没有搜索到节点");return}le.success(`搜索到 ${u.length} 个节点`),i.unshift({selector:c,results:u})}}),o=ne(!0);return(c,u)=>(G(),ae(Qt,{initialValue:{top:90,right:390},class:"z-1"},{default:N(({onRef:a})=>[oe("div",hr,[oe("div",gr,[_(m(go),{value:o.value,"onUpdate:value":u[0]||(u[0]=r=>o.value=r)},{default:N(()=>[_(m(Ft),null,{default:N(()=>[_(m(It),{value:!1},{default:N(()=>[O(" 字符搜索 ")]),_:1}),_(m(It),{value:!0},{default:N(()=>[O(" 选择器查询 ")]),_:1})]),_:1})]),_:1},8,["value"]),oe("div",{"flex-1":"","cursor-move":"",ref:a},null,512)]),_(m(po),null,{default:N(()=>[_(m(vo),{value:s.value,"onUpdate:value":u[1]||(u[1]=r=>s.value=r),placeholder:o.value?"请输入选择器":"请输入字符",onKeyup:Qn(m(d),["enter"]),inputProps:{class:"gkd_code"}},null,8,["value","placeholder","onKeyup"]),_(m(ft),{onClick:m(d)},{default:N(()=>[O(te(o.value?"查询":"搜索"),1)]),_:1},8,["onClick"])]),_:1}),vr,_(m(To),null,{default:N(()=>[(G(!0),$e(vt,null,gt(m(i),(r,f)=>(G(),ae(m(Lo),{key:r.selector.toString()},{header:N(()=>[oe("span",pr,te((typeof r.selector=="string"?"字符搜索":"选择器查询")+"："+r.selector.toString()),1)]),"header-extra":N(()=>[O(te(r.results.length+"个节点")+" ",1),br,_(m(ft),{onClick:eo(h=>m(i).splice(f,1),["stop"])},{default:N(()=>[O(" 删除 ")]),_:2},1032,["onClick"])]),default:N(()=>[_(m(Ft),{style:{"max-height":"400px","overflow-y":"scroll","padding-bottom":"10px"}},{default:N(()=>[(G(!0),$e(vt,null,gt(r.results,h=>(G(),ae(m(ft),{key:h.id,onClick:p=>c.onUpdateFocusNode(h),size:"small"},{default:N(()=>[O(te(m(pt)(h)),1)]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1}))}}),yr={flex:"","flex-col":""},xr=z({__name:"WindowCard",props:{snapshot:{},rootNode:{},focusNode:{},onUpdateFocusNode:{type:Function,default:()=>()=>{}}},setup(e){const t=e,s=ne([]);he(async()=>{var h;if(!t.focusNode)return;const a=t.focusNode.id;let r=t.focusNode.parent;if(!r)return;const f=new Set(s.value);for(;r;)f.add(r.id),r=r.parent;f.size!=s.value.length&&(s.value=[...f],await Ze(),(h=i.value)==null||h.scrollTo({key:a}))});const i=ne(),d=(a,r,f)=>{},o=(a,r)=>{var f;return r.id===((f=t.focusNode)==null?void 0:f.id)},c=a=>{var r;return{onClick:()=>{t.onUpdateFocusNode(a.option)},style:{color:a.option.id==((r=t.focusNode)==null?void 0:r.id)?"#00F":void 0}}},u=a=>pt(a.option);return(a,r)=>(G(),$e("div",yr,[_(m(Xt),{size:"small",striped:"",singleLine:!1,class:"table-fixed"},{default:N(()=>[_(m(Vo),null,{default:N(()=>[_(m(Qe),null,{default:N(()=>[_(m(ue),{class:"w-150px"},{default:N(()=>[O(" Device ")]),_:1}),_(m(ue),{class:"w-110px"},{default:N(()=>[O(" Name ")]),_:1}),_(m(ue),{class:"w-110px"},{default:N(()=>[O(" VersionName ")]),_:1}),_(m(ue),{class:"w-110px"},{default:N(()=>[O(" VersionCode ")]),_:1}),_(m(ue),{class:"w-240px"},{default:N(()=>[O(" AppId ")]),_:1}),_(m(ue),null,{default:N(()=>[O(" ActivityId ")]),_:1}),_(m(ue),{class:"w-175px"},{default:N(()=>[O(" 操作 ")]),_:1})]),_:1})]),_:1}),_(m(Gt),null,{default:N(()=>[_(m(Qe),null,{default:N(()=>[_(m(fe),{class:"whitespace-nowrap"},{default:N(()=>[O(te(`${m(At)(a.snapshot).manufacturer} Android ${m(At)(a.snapshot).release||""}`),1)]),_:1}),_(m(fe),{class:"whitespace-nowrap",onClick:r[0]||(r[0]=f=>m(Ee)(a.snapshot.appName))},{default:N(()=>[_(m(Le),null,{default:N(()=>[O(te(a.snapshot.appName),1)]),_:1})]),_:1}),_(m(fe),{class:"whitespace-nowrap",onClick:r[1]||(r[1]=f=>m(Ee)(a.snapshot.appVersionName))},{default:N(()=>[_(m(Le),null,{default:N(()=>[O(te(a.snapshot.appVersionName),1)]),_:1})]),_:1}),_(m(fe),{class:"whitespace-nowrap",onClick:r[2]||(r[2]=f=>m(Ee)(a.snapshot.appVersionCode.toString()))},{default:N(()=>[_(m(Le),null,{default:N(()=>[O(te(a.snapshot.appVersionCode),1)]),_:1})]),_:1}),_(m(fe),{class:"whitespace-nowrap",onClick:r[3]||(r[3]=f=>m(Ee)(a.snapshot.appId))},{default:N(()=>[_(m(Le),null,{default:N(()=>[O(te(a.snapshot.appId),1)]),_:1})]),_:1}),_(m(fe),{onClick:r[4]||(r[4]=f=>m(Ee)(a.snapshot.activityId)),class:"break-words"},{default:N(()=>[_(m(Le),null,{default:N(()=>[O(te(a.snapshot.activityId),1)]),_:1})]),_:1}),_(m(fe),null,{default:N(()=>[jt(a.$slots,"default",{},void 0,!0)]),_:3})]),_:3})]),_:3})]),_:3}),_(m(lr),{ref_key:"treeRef",ref:i,virtualScroll:"","onUpdate:checkedKeys":d,keyField:"id",defaultExpandedKeys:s.value,data:[a.rootNode],filter:o,nodeProps:c,renderLabel:u},null,8,["defaultExpandedKeys","data","filter","nodeProps","renderLabel"])]))}});const kr=Co(xr,[["__scopeId","data-v-3d1285da"]]),Cr={"h-full":"",flex:"","gap-5px":"","p-5px":"","box-border":""},Bt=5e3,Tr=z({__name:"SnapshotPage",setup(e){const t=to(),s=no(),i=ko(),d=$(()=>String(t.params.snapshotId||"")),o=$(()=>{const h=Number(t.params.maxShowSize||"");return 1<=h&&h<=Bt?h:Bt}),c=ne(""),u=ne();he(async()=>{const h=await Dn.getItem(d.value);if(!h){le.error("快照数据缺失");return}h.nodes.length>o.value&&(le.warning(`当前展示最大节点数量为${o.value}
之后的${h.nodes.length-o.value}个节点将被丢弃
使用showSize查询参数可以修改展示数量`),h.nodes=h.nodes.slice(0,o.value));const p=await Tn.getItem(d.value);if(!p){le.create("截屏数据缺失");return}c.value=URL.createObjectURL(new Blob([p])),u.value=h,a.value=bo(h.nodes),i.value="快照-"+h.appName||h.appId});const a=ne(),r=ne(),f=async()=>{le.success("删除成功,即将回到首页"),await En(2e3),s.replace({path:"/"})};return(h,p)=>(G(),$e("div",Cr,[c.value&&u.value?(G(),ae(fr,{key:0,url:c.value,snapshot:u.value,rootNode:a.value,focusNode:r.value,onUpdateFocusNode:p[0]||(p[0]=v=>r.value=v)},null,8,["url","snapshot","rootNode","focusNode"])):Oe("",!0),u.value&&a.value?(G(),ae(kr,{key:1,rootNode:a.value,snapshot:u.value,focusNode:r.value,onUpdateFocusNode:p[1]||(p[1]=v=>r.value=v),class:"flex-1"},{default:N(()=>[u.value?(G(),ae(Kn,{key:0,snapshot:u.value,onDelete:f,showPreview:!1},null,8,["snapshot"])):Oe("",!0)]),_:1},8,["rootNode","snapshot","focusNode"])):Oe("",!0),r.value?(G(),ae(ir,{key:2,focusNode:r.value},null,8,["focusNode"])):Oe("",!0),a.value?(G(),ae(mr,{key:3,rootNode:a.value,onUpdateFocusNode:p[2]||(p[2]=v=>r.value=v)},null,8,["rootNode"])):Oe("",!0)]))}});export{Tr as default};
//# sourceMappingURL=SnapshotPage-dc30e243.js.map
