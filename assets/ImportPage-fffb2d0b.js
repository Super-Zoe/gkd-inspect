import{d as m,al as f,am as h,s as c,a5 as d,f as g,J as v,K as w,h as _,t as x,o as R}from"./index-3b977556.js";import{t as S}from"./check-44032eaf.js";import{m as y,e as i,u as l,a as U,l as n,n as b,k,q as B,j as I}from"./storage-08f70e23.js";import{a as P}from"./import-dac57f27.js";import"./file_type-9a7ead53.js";const q={class:"h-[calc(100%-10px)]",flex:"","gap-5px":"","p-5px":"","flex-col":"","flex-items-center":""},C=m({__name:"ImportPage",setup(D){const u=f(),o=h(),a=String(u.query.url||""),p=c(!0),r=c("加载中...");return d(async()=>{if(!S(a)){y.error("非法URL参数"),await i(1e3),o.replace({path:"/"});return}await i(1e3);const s=l[a];if(s)if(await U.getItem(s)){o.replace({name:"snapshot",params:{snapshotId:s}});return}else delete l[a];n.start();try{const[t]=await P(a)??[];if(t.status=="fulfilled"){n.finish();const e=t.value;e!=null&&e.id?(l[a]=e.id,a.match(b)?k[e.id]=a:a.match(B)&&(I[e.id]=a),p.value=!1,await i(500),o.replace({name:"snapshot",params:{snapshotId:e.id}})):r.value="获取资源失败"}else throw t.reason}catch{n.error(),r.value="加载资源失败"}}),(s,t)=>(R(),g("div",q,[v(_("div",{"mt-40px":""},x(r.value),513),[[w,p.value]])]))}});export{C as default};
//# sourceMappingURL=ImportPage-fffb2d0b.js.map
