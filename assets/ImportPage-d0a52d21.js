import{d as m,an as h,ao as f,s as c,a6 as d,t as g,f as v,K as w,L as _,h as x,l as R,o as S}from"./index-9a74ec84.js";import{m as b,j as i,u as l,a as y,n,q as I,e as U,r as B,b as k}from"./storage-25ae3853.js";import{a as L}from"./import-27273a86.js";import"./jszip.min-14bc980b.js";const q={class:"h-[calc(100%-10px)]",flex:"","gap-5px":"","p-5px":"","flex-col":"","flex-items-center":""},C=m({__name:"ImportPage",setup(D){const u=h(),o=f(),a=String(u.query.url||""),p=c(!0),r=c("加载中...");return d(async()=>{if(!g(a)){b.error("非法URL参数"),await i(1e3),o.replace({path:"/"});return}await i(1e3);const s=l[a];if(s)if(await y.getItem(s)){o.replace({name:"snapshot",params:{snapshotId:s}});return}else delete l[a];n.start();try{const[t]=await L(a)??[];if(t.status=="fulfilled"){n.finish();const e=t.value;e!=null&&e.id?(l[a]=e.id,a.match(I)?U[e.id]=a:a.match(B)&&(k[e.id]=a),p.value=!1,await i(500),o.replace({name:"snapshot",params:{snapshotId:e.id}})):r.value="获取资源失败"}else throw t.reason}catch{n.error(),r.value="加载资源失败"}}),(s,t)=>(S(),v("div",q,[w(x("div",{"mt-40px":""},R(r.value),513),[[_,p.value]])]))}});export{C as default};
//# sourceMappingURL=ImportPage-d0a52d21.js.map
