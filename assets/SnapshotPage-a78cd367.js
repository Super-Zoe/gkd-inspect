import{_ as Kn,e as Tn,f as Dn}from"./ActionCard.vue_vue_type_script_setup_true_lang-d78725ad.js";import{f as ht,c as Pe,m as ae,a as Dt,b as Pn,e as En,h as Ln,i as $n}from"./storage-f6c916c9.js";import{d as B,m as w,n as bt,p as T,q as L,v as G,x as D,y as et,z as V,c as $,A as Ae,B as Ot,C as tt,D as mt,E as yt,G as H,H as Fn,I as A,J as An,K as In,L as Ut,M as zn,O as Y,P as Ne,Q as Bn,S as Pt,T as Mt,U as On,V as ue,W as Un,X as Mn,Y as Vn,Z as Ee,_ as jn,$ as Hn,a0 as st,a1 as Wn,a2 as qn,a3 as ct,a4 as Xn,a5 as Gn,a6 as Yn,a7 as Jn,a8 as ut,w as xe,e as Ue,a9 as Zn,aa as Et,ab as Qn,ac as Qe,a as Vt,s as re,ad as Lt,ae as oe,h as te,af as jt,ag as Ht,ah as eo,ai as to,o as W,g as C,b as R,u as b,k as z,f as Fe,aj as gt,F as vt,t as ee,l as Le,i as no,j as ft,ak as oo,al as ro,am as lo}from"./index-75890407.js";import{e as Me,C as ao,f as io,g as so,h as co,i as $t,V as uo,j as fo,k as Ft,l as ho,m as go,n as vo,o as $e,p as po,c as At,q as It,r as bo,N as mo,a as yo,s as pt,t as zt,v as xo}from"./node-f77e59ee.js";import{e as ko,a as Co,p as wo,u as No}from"./index-e6824f3d.js";import{_ as So}from"./_plugin-vue_export-helper-c27b6911.js";import"./jszip.min-a0084c2f.js";function Wt(e){return typeof e=="string"?`s-${e}`:`n-${e}`}const Ro=B({name:"ChevronLeft",render(){return w("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},w("path",{d:"M10.3536 3.14645C10.5488 3.34171 10.5488 3.65829 10.3536 3.85355L6.20711 8L10.3536 12.1464C10.5488 12.3417 10.5488 12.6583 10.3536 12.8536C10.1583 13.0488 9.84171 13.0488 9.64645 12.8536L5.14645 8.35355C4.95118 8.15829 4.95118 7.84171 5.14645 7.64645L9.64645 3.14645C9.84171 2.95118 10.1583 2.95118 10.3536 3.14645Z",fill:"currentColor"}))}}),_o=B({name:"Switcher",render(){return w("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},w("path",{d:"M12 8l10 8l-10 8z"}))}}),Ko=e=>{const{fontWeight:t,textColor1:c,textColor2:s,textColorDisabled:a,dividerColor:o,fontSize:u}=e;return{titleFontSize:u,titleFontWeight:t,dividerColor:o,titleTextColor:c,titleTextColorDisabled:a,fontSize:u,textColor:s,arrowColor:s,arrowColorDisabled:a,itemMargin:"16px 0 0 0",titlePadding:"16px 0 0 0"}},To={name:"Collapse",common:bt,self:Ko},Do=To,Po=T("collapse","width: 100%;",[T("collapse-item",`
 font-size: var(--n-font-size);
 color: var(--n-text-color);
 transition:
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 margin: var(--n-item-margin);
 `,[L("disabled",[G("header","cursor: not-allowed;",[G("header-main",`
 color: var(--n-title-text-color-disabled);
 `),T("collapse-item-arrow",`
 color: var(--n-arrow-color-disabled);
 `)])]),T("collapse-item","margin-left: 32px;"),D("&:first-child","margin-top: 0;"),D("&:first-child >",[G("header","padding-top: 0;")]),L("left-arrow-placement",[G("header",[T("collapse-item-arrow","margin-right: 4px;")])]),L("right-arrow-placement",[G("header",[T("collapse-item-arrow","margin-left: 4px;")])]),G("content-wrapper",[G("content-inner","padding-top: 16px;"),ht({duration:"0.15s"})]),L("active",[G("header",[L("active",[T("collapse-item-arrow","transform: rotate(90deg);")])])]),D("&:not(:first-child)","border-top: 1px solid var(--n-divider-color);"),G("header",`
 font-size: var(--n-title-font-size);
 display: flex;
 flex-wrap: nowrap;
 align-items: center;
 transition: color .3s var(--n-bezier);
 position: relative;
 padding: var(--n-title-padding);
 color: var(--n-title-text-color);
 cursor: pointer;
 `,[G("header-main",`
 display: flex;
 flex-wrap: nowrap;
 align-items: center;
 font-weight: var(--n-title-font-weight);
 transition: color .3s var(--n-bezier);
 flex: 1;
 color: var(--n-title-text-color);
 `),G("header-extra",`
 display: flex;
 align-items: center;
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
 `),T("collapse-item-arrow",`
 display: flex;
 transition:
 transform .15s var(--n-bezier),
 color .3s var(--n-bezier);
 font-size: 18px;
 color: var(--n-arrow-color);
 `)])])]),Eo=Object.assign(Object.assign({},Ae.props),{defaultExpandedNames:{type:[Array,String],default:null},expandedNames:[Array,String],arrowPlacement:{type:String,default:"left"},accordion:{type:Boolean,default:!1},displayDirective:{type:String,default:"if"},onItemHeaderClick:[Function,Array],"onUpdate:expandedNames":[Function,Array],onUpdateExpandedNames:[Function,Array],onExpandedNamesChange:{type:[Function,Array],validator:()=>!0,default:void 0}}),qt=yt("n-collapse"),Lo=B({name:"Collapse",props:Eo,setup(e,{slots:t}){const{mergedClsPrefixRef:c,inlineThemeDisabled:s,mergedRtlRef:a}=et(e),o=V(e.defaultExpandedNames),u=$(()=>e.expandedNames),i=Me(u,o),r=Ae("Collapse","-collapse",Po,Do,e,c);function l(_){const{"onUpdate:expandedNames":N,onUpdateExpandedNames:k,onExpandedNamesChange:K}=e;k&&H(k,_),N&&H(N,_),K&&H(K,_),o.value=_}function f(_){const{onItemHeaderClick:N}=e;N&&H(N,_)}function h(_,N,k){const{accordion:K}=e,{value:I}=i;if(K)_?(l([N]),f({name:N,expanded:!0,event:k})):(l([]),f({name:N,expanded:!1,event:k}));else if(!Array.isArray(I))l([N]),f({name:N,expanded:!0,event:k});else{const E=I.slice(),M=E.findIndex(Z=>N===Z);~M?(E.splice(M,1),l(E),f({name:N,expanded:!1,event:k})):(E.push(N),l(E),f({name:N,expanded:!0,event:k}))}}Ot(qt,{props:e,mergedClsPrefixRef:c,expandedNamesRef:i,slots:t,toggleItem:h});const v=tt("Collapse",a,c),g=$(()=>{const{common:{cubicBezierEaseInOut:_},self:{titleFontWeight:N,dividerColor:k,titlePadding:K,titleTextColor:I,titleTextColorDisabled:E,textColor:M,arrowColor:Z,fontSize:he,titleFontSize:le,arrowColorDisabled:ke,itemMargin:de}}=r.value;return{"--n-font-size":he,"--n-bezier":_,"--n-text-color":M,"--n-divider-color":k,"--n-title-padding":K,"--n-title-font-size":le,"--n-title-text-color":I,"--n-title-text-color-disabled":E,"--n-title-font-weight":N,"--n-arrow-color":Z,"--n-arrow-color-disabled":ke,"--n-item-margin":de}}),S=s?mt("collapse",void 0,g,e):void 0;return{rtlEnabled:v,mergedTheme:r,mergedClsPrefix:c,cssVars:s?void 0:g,themeClass:S==null?void 0:S.themeClass,onRender:S==null?void 0:S.onRender}},render(){var e;return(e=this.onRender)===null||e===void 0||e.call(this),w("div",{class:[`${this.mergedClsPrefix}-collapse`,this.rtlEnabled&&`${this.mergedClsPrefix}-collapse--rtl`,this.themeClass],style:this.cssVars},this.$slots)}}),$o=B({name:"CollapseItemContent",props:{displayDirective:{type:String,required:!0},show:Boolean,clsPrefix:{type:String,required:!0}},setup(e){return{onceTrue:Fn(A(e,"show"))}},render(){return w(Ut,null,{default:()=>{const{show:e,displayDirective:t,onceTrue:c,clsPrefix:s}=this,a=t==="show"&&c,o=w("div",{class:`${s}-collapse-item__content-wrapper`},w("div",{class:`${s}-collapse-item__content-inner`},this.$slots));return a?An(o,[[In,e]]):e?o:null}})}}),Fo={title:String,name:[String,Number],disabled:Boolean,displayDirective:String},Ao=B({name:"CollapseItem",props:Fo,setup(e){const{mergedRtlRef:t}=et(e),c=zn(),s=Y(()=>{var h;return(h=e.name)!==null&&h!==void 0?h:c}),a=Ne(qt);a||Bn("collapse-item","`n-collapse-item` must be placed inside `n-collapse`.");const{expandedNamesRef:o,props:u,mergedClsPrefixRef:i,slots:r}=a,l=$(()=>{const{value:h}=o;if(Array.isArray(h)){const{value:v}=s;return!~h.findIndex(g=>g===v)}else if(h){const{value:v}=s;return v!==h}return!0});return{rtlEnabled:tt("Collapse",t,i),collapseSlots:r,randomName:c,mergedClsPrefix:i,collapsed:l,mergedDisplayDirective:$(()=>{const{displayDirective:h}=e;return h||u.displayDirective}),arrowPlacement:$(()=>u.arrowPlacement),handleClick(h){a&&!e.disabled&&a.toggleItem(l.value,s.value,h)}}},render(){const{collapseSlots:e,$slots:t,arrowPlacement:c,collapsed:s,mergedDisplayDirective:a,mergedClsPrefix:o,disabled:u}=this,i=Pt(t.header,{collapsed:s},()=>[this.title]),r=t["header-extra"]||e["header-extra"],l=t.arrow||e.arrow;return w("div",{class:[`${o}-collapse-item`,`${o}-collapse-item--${c}-arrow-placement`,u&&`${o}-collapse-item--disabled`,!s&&`${o}-collapse-item--active`]},w("div",{class:[`${o}-collapse-item__header`,!s&&`${o}-collapse-item__header--active`]},w("div",{class:`${o}-collapse-item__header-main`,onClick:this.handleClick},c==="right"&&i,w("div",{class:`${o}-collapse-item-arrow`,key:this.rtlEnabled?0:1},Pt(l,{collapsed:s},()=>{var f;return[w(Mt,{clsPrefix:o},{default:(f=e.expandIcon)!==null&&f!==void 0?f:()=>this.rtlEnabled?w(Ro,null):w(ao,null)})]})),c==="left"&&i),On(r,{collapsed:s},f=>w("div",{class:`${o}-collapse-item__header-extra`,onClick:this.handleClick},f))),w($o,{clsPrefix:o,displayDirective:a,show:!s},t))}}),Io={thPaddingSmall:"6px",thPaddingMedium:"12px",thPaddingLarge:"12px",tdPaddingSmall:"6px",tdPaddingMedium:"12px",tdPaddingLarge:"12px"},zo=e=>{const{dividerColor:t,cardColor:c,modalColor:s,popoverColor:a,tableHeaderColor:o,tableColorStriped:u,textColor1:i,textColor2:r,borderRadius:l,fontWeightStrong:f,lineHeight:h,fontSizeSmall:v,fontSizeMedium:g,fontSizeLarge:S}=e;return Object.assign(Object.assign({},Io),{fontSizeSmall:v,fontSizeMedium:g,fontSizeLarge:S,lineHeight:h,borderRadius:l,borderColor:ue(c,t),borderColorModal:ue(s,t),borderColorPopover:ue(a,t),tdColor:c,tdColorModal:s,tdColorPopover:a,tdColorStriped:ue(c,u),tdColorStripedModal:ue(s,u),tdColorStripedPopover:ue(a,u),thColor:ue(c,o),thColorModal:ue(s,o),thColorPopover:ue(a,o),thTextColor:i,tdTextColor:r,thFontWeight:f})},Bo={name:"Table",common:bt,self:zo},Oo=Bo,Uo=e=>{const{borderRadiusSmall:t,hoverColor:c,pressedColor:s,primaryColor:a,textColor3:o,textColor2:u,textColorDisabled:i,fontSize:r}=e;return{fontSize:r,nodeBorderRadius:t,nodeColorHover:c,nodeColorPressed:s,nodeColorActive:Vn(a,{alpha:.1}),arrowColor:o,nodeTextColor:u,nodeTextColorDisabled:i,loadingColor:a,dropMarkColor:a}},Mo=Un({name:"Tree",common:bt,peers:{Checkbox:io,Scrollbar:Mn,Empty:so},self:Uo}),Vo=Mo,jo=D([T("table",`
 font-size: var(--n-font-size);
 font-variant-numeric: tabular-nums;
 line-height: var(--n-line-height);
 width: 100%;
 border-radius: var(--n-border-radius) var(--n-border-radius) 0 0;
 text-align: left;
 border-collapse: separate;
 border-spacing: 0;
 overflow: hidden;
 background-color: var(--n-td-color);
 border-color: var(--n-merged-border-color);
 transition:
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 --n-merged-border-color: var(--n-border-color);
 `,[D("th",`
 white-space: nowrap;
 transition:
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 text-align: inherit;
 padding: var(--n-th-padding);
 vertical-align: inherit;
 text-transform: none;
 border: 0px solid var(--n-merged-border-color);
 font-weight: var(--n-th-font-weight);
 color: var(--n-th-text-color);
 background-color: var(--n-th-color);
 border-bottom: 1px solid var(--n-merged-border-color);
 border-right: 1px solid var(--n-merged-border-color);
 `,[D("&:last-child",`
 border-right: 0px solid var(--n-merged-border-color);
 `)]),D("td",`
 transition:
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 padding: var(--n-td-padding);
 color: var(--n-td-text-color);
 background-color: var(--n-td-color);
 border: 0px solid var(--n-merged-border-color);
 border-right: 1px solid var(--n-merged-border-color);
 border-bottom: 1px solid var(--n-merged-border-color);
 `,[D("&:last-child",`
 border-right: 0px solid var(--n-merged-border-color);
 `)]),L("bordered",`
 border: 1px solid var(--n-merged-border-color);
 border-radius: var(--n-border-radius);
 `,[D("tr",[D("&:last-child",[D("td",`
 border-bottom: 0 solid var(--n-merged-border-color);
 `)])])]),L("single-line",[D("th",`
 border-right: 0px solid var(--n-merged-border-color);
 `),D("td",`
 border-right: 0px solid var(--n-merged-border-color);
 `)]),L("single-column",[D("tr",[D("&:not(:last-child)",[D("td",`
 border-bottom: 0px solid var(--n-merged-border-color);
 `)])])]),L("striped",[D("tr:nth-of-type(even)",[D("td","background-color: var(--n-td-color-striped)")])]),Ee("bottom-bordered",[D("tr",[D("&:last-child",[D("td",`
 border-bottom: 0px solid var(--n-merged-border-color);
 `)])])])]),jn(T("table",`
 background-color: var(--n-td-color-modal);
 --n-merged-border-color: var(--n-border-color-modal);
 `,[D("th",`
 background-color: var(--n-th-color-modal);
 `),D("td",`
 background-color: var(--n-td-color-modal);
 `)])),Hn(T("table",`
 background-color: var(--n-td-color-popover);
 --n-merged-border-color: var(--n-border-color-popover);
 `,[D("th",`
 background-color: var(--n-th-color-popover);
 `),D("td",`
 background-color: var(--n-td-color-popover);
 `)]))]),Ho=Object.assign(Object.assign({},Ae.props),{bordered:{type:Boolean,default:!0},bottomBordered:{type:Boolean,default:!0},singleLine:{type:Boolean,default:!0},striped:Boolean,singleColumn:Boolean,size:{type:String,default:"medium"}}),Xt=B({name:"Table",props:Ho,setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:c,mergedRtlRef:s}=et(e),a=Ae("Table","-table",jo,Oo,e,t),o=tt("Table",s,t),u=$(()=>{const{size:r}=e,{self:{borderColor:l,tdColor:f,tdColorModal:h,tdColorPopover:v,thColor:g,thColorModal:S,thColorPopover:_,thTextColor:N,tdTextColor:k,borderRadius:K,thFontWeight:I,lineHeight:E,borderColorModal:M,borderColorPopover:Z,tdColorStriped:he,tdColorStripedModal:le,tdColorStripedPopover:ke,[st("fontSize",r)]:de,[st("tdPadding",r)]:ge,[st("thPadding",r)]:Se},common:{cubicBezierEaseInOut:Ie}}=a.value;return{"--n-bezier":Ie,"--n-td-color":f,"--n-td-color-modal":h,"--n-td-color-popover":v,"--n-td-text-color":k,"--n-border-color":l,"--n-border-color-modal":M,"--n-border-color-popover":Z,"--n-border-radius":K,"--n-font-size":de,"--n-th-color":g,"--n-th-color-modal":S,"--n-th-color-popover":_,"--n-th-font-weight":I,"--n-th-text-color":N,"--n-line-height":E,"--n-td-padding":ge,"--n-th-padding":Se,"--n-td-color-striped":he,"--n-td-color-striped-modal":le,"--n-td-color-striped-popover":ke}}),i=c?mt("table",$(()=>e.size[0]),u,e):void 0;return{rtlEnabled:o,mergedClsPrefix:t,cssVars:c?void 0:u,themeClass:i==null?void 0:i.themeClass,onRender:i==null?void 0:i.onRender}},render(){var e;const{mergedClsPrefix:t}=this;return(e=this.onRender)===null||e===void 0||e.call(this),w("table",{class:[`${t}-table`,this.themeClass,{[`${t}-table--rtl`]:this.rtlEnabled,[`${t}-table--bottom-bordered`]:this.bottomBordered,[`${t}-table--bordered`]:this.bordered,[`${t}-table--single-line`]:this.singleLine,[`${t}-table--single-column`]:this.singleColumn,[`${t}-table--striped`]:this.striped}],style:this.cssVars},this.$slots)}}),fe=B({name:"Th",render(){return w("th",null,this.$slots)}}),Ve=B({name:"Tr",render(){return w("tr",null,this.$slots)}}),ie=B({name:"Td",render(){return w("td",null,this.$slots)}}),Wo=B({name:"Thead",render(){return w("thead",null,this.$slots)}}),Gt=B({name:"Tbody",render(){return w("tbody",null,this.$slots)}}),Yt=yt("n-tree-select"),je=yt("n-tree"),qo=B({name:"NTreeSwitcher",props:{clsPrefix:{type:String,required:!0},expanded:Boolean,selected:Boolean,hide:Boolean,loading:Boolean,onClick:Function},setup(e){const{renderSwitcherIconRef:t}=Ne(je,null);return()=>{const{clsPrefix:c}=e;return w("span",{"data-switcher":!0,class:[`${c}-tree-node-switcher`,e.expanded&&`${c}-tree-node-switcher--expanded`,e.hide&&`${c}-tree-node-switcher--hide`],onClick:e.onClick},w("div",{class:`${c}-tree-node-switcher__icon`},w(Wn,null,{default:()=>{if(e.loading)return w(qn,{clsPrefix:c,key:"loading",radius:85,strokeWidth:20});const{value:s}=t;return s?s({expanded:e.expanded,selected:e.selected}):w(Mt,{clsPrefix:c,key:"switcher"},{default:()=>w(_o,null)})}})))}}}),Xo=B({name:"NTreeNodeCheckbox",props:{clsPrefix:{type:String,required:!0},right:Boolean,focusable:Boolean,disabled:Boolean,checked:Boolean,indeterminate:Boolean,onCheck:Function},setup(e){const t=Ne(je);function c(a){const{onCheck:o}=e;o&&o(a)}function s(a){e.indeterminate?c(!1):c(a)}return{handleUpdateValue:s,mergedTheme:t.mergedThemeRef}},render(){const{clsPrefix:e,mergedTheme:t,checked:c,indeterminate:s,disabled:a,focusable:o,handleUpdateValue:u}=this;return w("span",{class:[`${e}-tree-node-checkbox`,this.right&&`${e}-tree-node-checkbox--right`],"data-checkbox":!0},w(co,{focusable:o,disabled:a,theme:t.peers.Checkbox,themeOverrides:t.peerOverrides.Checkbox,checked:c,indeterminate:s,onUpdateChecked:u}))}}),Go=B({name:"TreeNodeContent",props:{clsPrefix:{type:String,required:!0},disabled:Boolean,checked:Boolean,selected:Boolean,onClick:Function,onDragstart:Function,tmNode:{type:Object,required:!0},nodeProps:Object},setup(e){const{renderLabelRef:t,renderPrefixRef:c,renderSuffixRef:s,labelFieldRef:a}=Ne(je),o=V(null);function u(r){const{onClick:l}=e;l&&l(r)}function i(r){u(r)}return{selfRef:o,renderLabel:t,renderPrefix:c,renderSuffix:s,labelField:a,handleClick:i}},render(){const{clsPrefix:e,labelField:t,nodeProps:c,checked:s=!1,selected:a=!1,renderLabel:o,renderPrefix:u,renderSuffix:i,handleClick:r,onDragstart:l,tmNode:{rawNode:f,rawNode:{prefix:h,suffix:v,[t]:g}}}=this;return w("span",Object.assign({},c,{ref:"selfRef",class:[`${e}-tree-node-content`,c==null?void 0:c.class],onClick:r,draggable:l===void 0?void 0:!0,onDragstart:l}),u||h?w("div",{class:`${e}-tree-node-content__prefix`},u?u({option:f,selected:a,checked:s}):ct(h)):null,w("div",{class:`${e}-tree-node-content__text`},o?o({option:f,selected:a,checked:s}):ct(g)),i||v?w("div",{class:`${e}-tree-node-content__suffix`},i?i({option:f,selected:a,checked:s}):ct(v)):null)}});function Bt({position:e,offsetLevel:t,indent:c,el:s}){const a={position:"absolute",boxSizing:"border-box",right:0};if(e==="inside")a.left=0,a.top=0,a.bottom=0,a.borderRadius="inherit",a.boxShadow="inset 0 0 0 2px var(--n-drop-mark-color)";else{const o=e==="before"?"top":"bottom";a[o]=0,a.left=`${s.offsetLeft+6-t*c}px`,a.height="2px",a.backgroundColor="var(--n-drop-mark-color)",a.transformOrigin=o,a.borderRadius="1px",a.transform=e==="before"?"translateY(-4px)":"translateY(4px)"}return w("div",{style:a})}function Yo({dropPosition:e,node:t}){return t.isLeaf===!1||t.children?!0:e!=="inside"}function Jo(e){return $(()=>e.leafOnly?"child":e.checkStrategy)}function ye(e,t){return!!e.rawNode[t]}function Jt(e,t,c,s){e==null||e.forEach(a=>{c(a),Jt(a[t],t,c,s),s(a)})}function Zo(e,t,c,s,a){const o=new Set,u=new Set,i=[];return Jt(e,s,r=>{if(i.push(r),a(t,r)){u.add(r[c]);for(let l=i.length-2;l>=0;--l)if(!o.has(i[l][c]))o.add(i[l][c]);else return}},()=>{i.pop()}),{expandedKeys:Array.from(o),highlightKeySet:u}}if(Xn&&Image){const e=new Image;e.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}function Qo(e,t,c,s,a){const o=new Set,u=new Set,i=new Set,r=[],l=[],f=[];function h(g){g.forEach(S=>{if(f.push(S),t(c,S)){o.add(S[s]),i.add(S[s]);for(let N=f.length-2;N>=0;--N){const k=f[N][s];if(!u.has(k))u.add(k),o.has(k)&&o.delete(k);else break}}const _=S[a];_&&h(_),f.pop()})}h(e);function v(g,S){g.forEach(_=>{const N=_[s],k=o.has(N),K=u.has(N);if(!k&&!K)return;const I=_[a];if(I)if(k)S.push(_);else{r.push(N);const E=Object.assign(Object.assign({},_),{[a]:[]});S.push(E),v(I,E[a])}else S.push(_)})}return v(e,l),{filteredTree:l,highlightKeySet:i,expandedKeys:r}}const er=B({name:"TreeNode",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(e){const t=Ne(je),{droppingNodeParentRef:c,droppingMouseNodeRef:s,draggingNodeRef:a,droppingPositionRef:o,droppingOffsetLevelRef:u,nodePropsRef:i,indentRef:r,blockLineRef:l,checkboxPlacementRef:f,checkOnClickRef:h,disabledFieldRef:v}=t,g=Y(()=>!!e.tmNode.rawNode.checkboxDisabled),S=Y(()=>ye(e.tmNode,v.value)),_=Y(()=>t.disabledRef.value||S.value),N=$(()=>{const{value:m}=i;if(m)return m({option:e.tmNode.rawNode})}),k=V(null),K={value:null};Gn(()=>{K.value=k.value.$el});function I(){const{tmNode:m}=e;if(!m.isLeaf&&!m.shallowLoaded){if(!t.loadingKeysRef.value.has(m.key))t.loadingKeysRef.value.add(m.key);else return;const{onLoadRef:{value:P}}=t;P&&P(m.rawNode).then(O=>{O!==!1&&t.handleSwitcherClick(m)}).finally(()=>{t.loadingKeysRef.value.delete(m.key)})}else t.handleSwitcherClick(m)}const E=Y(()=>!S.value&&t.selectableRef.value&&(t.internalTreeSelect?t.mergedCheckStrategyRef.value!=="child"||t.multipleRef.value&&t.cascadeRef.value||e.tmNode.isLeaf:!0)),M=Y(()=>t.checkableRef.value&&(t.cascadeRef.value||t.mergedCheckStrategyRef.value!=="child"||e.tmNode.isLeaf)),Z=Y(()=>t.displayedCheckedKeysRef.value.includes(e.tmNode.key)),he=Y(()=>{const{value:m}=M;if(!m)return!1;const{value:P}=h;return typeof P=="boolean"?P:P(e.tmNode.rawNode)});function le(m){const{value:P}=t.expandOnClickRef,{value:O}=E,{value:Re}=he;if(!O&&!P&&!Re||$t(m,"checkbox")||$t(m,"switcher"))return;const{tmNode:He}=e;O&&t.handleSelect(He),P&&!He.isLeaf&&I(),Re&&ge(!Z.value)}function ke(m){var P,O;l.value||(_.value||le(m),(O=(P=N.value)===null||P===void 0?void 0:P.onClick)===null||O===void 0||O.call(P,m))}function de(m){var P,O;l.value&&(_.value||le(m),(O=(P=N.value)===null||P===void 0?void 0:P.onClick)===null||O===void 0||O.call(P,m))}function ge(m){t.handleCheck(e.tmNode,m)}function Se(m){t.handleDragStart({event:m,node:e.tmNode})}function Ie(m){m.currentTarget===m.target&&t.handleDragEnter({event:m,node:e.tmNode})}function ne(m){m.preventDefault(),t.handleDragOver({event:m,node:e.tmNode})}function ve(m){t.handleDragEnd({event:m,node:e.tmNode})}function pe(m){m.currentTarget===m.target&&t.handleDragLeave({event:m,node:e.tmNode})}function nt(m){m.preventDefault(),o.value!==null&&t.handleDrop({event:m,node:e.tmNode,dropPosition:o.value})}return{showDropMark:Y(()=>{const{value:m}=a;if(!m)return;const{value:P}=o;if(!P)return;const{value:O}=s;if(!O)return;const{tmNode:Re}=e;return Re.key===O.key}),showDropMarkAsParent:Y(()=>{const{value:m}=c;if(!m)return!1;const{tmNode:P}=e,{value:O}=o;return O==="before"||O==="after"?m.key===P.key:!1}),pending:Y(()=>t.pendingNodeKeyRef.value===e.tmNode.key),loading:Y(()=>t.loadingKeysRef.value.has(e.tmNode.key)),highlight:Y(()=>{var m;return(m=t.highlightKeySetRef.value)===null||m===void 0?void 0:m.has(e.tmNode.key)}),checked:Z,indeterminate:Y(()=>t.displayedIndeterminateKeysRef.value.includes(e.tmNode.key)),selected:Y(()=>t.mergedSelectedKeysRef.value.includes(e.tmNode.key)),expanded:Y(()=>t.mergedExpandedKeysRef.value.includes(e.tmNode.key)),disabled:_,checkable:M,mergedCheckOnClick:he,checkboxDisabled:g,selectable:E,expandOnClick:t.expandOnClickRef,internalScrollable:t.internalScrollableRef,draggable:t.draggableRef,blockLine:l,nodeProps:N,checkboxFocusable:t.internalCheckboxFocusableRef,droppingPosition:o,droppingOffsetLevel:u,indent:r,checkboxPlacement:f,contentInstRef:k,contentElRef:K,handleCheck:ge,handleDrop:nt,handleDragStart:Se,handleDragEnter:Ie,handleDragOver:ne,handleDragEnd:ve,handleDragLeave:pe,handleLineClick:de,handleContentClick:ke,handleSwitcherClick:I}},render(){const{tmNode:e,clsPrefix:t,checkable:c,expandOnClick:s,selectable:a,selected:o,checked:u,highlight:i,draggable:r,blockLine:l,indent:f,disabled:h,pending:v,internalScrollable:g,nodeProps:S,checkboxPlacement:_}=this,N=r&&!h?{onDragenter:this.handleDragEnter,onDragleave:this.handleDragLeave,onDragend:this.handleDragEnd,onDrop:this.handleDrop,onDragover:this.handleDragOver}:void 0,k=g?Wt(e.key):void 0,K=_==="right",I=c?w(Xo,{right:K,focusable:this.checkboxFocusable,disabled:h||this.checkboxDisabled,clsPrefix:t,checked:this.checked,indeterminate:this.indeterminate,onCheck:this.handleCheck}):null;return w("div",Object.assign({class:`${t}-tree-node-wrapper`},N),w("div",Object.assign({},l?S:void 0,{class:[`${t}-tree-node`,{[`${t}-tree-node--selected`]:o,[`${t}-tree-node--checkable`]:c,[`${t}-tree-node--highlight`]:i,[`${t}-tree-node--pending`]:v,[`${t}-tree-node--disabled`]:h,[`${t}-tree-node--selectable`]:a,[`${t}-tree-node--clickable`]:a||s||this.mergedCheckOnClick},S==null?void 0:S.class],"data-key":k,draggable:r&&l,onClick:this.handleLineClick,onDragstart:r&&l&&!h?this.handleDragStart:void 0}),Yn(e.level,w("div",{class:`${t}-tree-node-indent`},w("div",{style:{width:`${f}px`}}))),w(qo,{clsPrefix:t,expanded:this.expanded,selected:o,loading:this.loading,hide:e.isLeaf,onClick:this.handleSwitcherClick}),K?null:I,w(Go,{ref:"contentInstRef",clsPrefix:t,checked:u,selected:o,onClick:this.handleContentClick,nodeProps:l?void 0:S,onDragstart:r&&!l&&!h?this.handleDragStart:void 0,tmNode:e}),r?this.showDropMark?Bt({el:this.contentElRef.value,position:this.droppingPosition,offsetLevel:this.droppingOffsetLevel,indent:f}):this.showDropMarkAsParent?Bt({el:this.contentElRef.value,position:"inside",offsetLevel:this.droppingOffsetLevel,indent:f}):null:null,K?I:null))}}),Zt=er;function tr({props:e,fNodesRef:t,mergedExpandedKeysRef:c,mergedSelectedKeysRef:s,handleSelect:a,handleSwitcherClick:o}){const{value:u}=s,i=Ne(Yt,null),r=i?i.pendingNodeKeyRef:V(u.length?u[u.length-1]:null);function l(f){if(!e.keyboard)return;const{value:h}=r;if(h===null){if((f.key==="ArrowDown"||f.key==="ArrowUp")&&f.preventDefault(),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(f.key)&&h===null){const{value:v}=t;let g=0;for(;g<v.length;){if(!v[g].disabled){r.value=v[g].key;break}g+=1}}}else{const{value:v}=t;let g=v.findIndex(S=>S.key===h);if(!~g)return;if(f.key==="Enter")a(v[g]);else if(f.key==="ArrowDown")for(f.preventDefault(),g+=1;g<v.length;){if(!v[g].disabled){r.value=v[g].key;break}g+=1}else if(f.key==="ArrowUp")for(f.preventDefault(),g-=1;g>=0;){if(!v[g].disabled){r.value=v[g].key;break}g-=1}else if(f.key==="ArrowLeft"){const S=v[g];if(S.isLeaf||!c.value.includes(h)){const _=S.getParent();_&&(r.value=_.key)}else o(S)}else if(f.key==="ArrowRight"){const S=v[g];if(S.isLeaf)return;if(!c.value.includes(h))o(S);else for(g+=1;g<v.length;){if(!v[g].disabled){r.value=v[g].key;break}g+=1}}}}return{pendingNodeKeyRef:r,handleKeydown:l}}const nr=B({name:"TreeMotionWrapper",props:{clsPrefix:{type:String,required:!0},height:Number,nodes:{type:Array,required:!0},mode:{type:String,required:!0},onAfterEnter:{type:Function,required:!0}},render(){const{clsPrefix:e}=this;return w(Ut,{onAfterEnter:this.onAfterEnter,appear:!0,reverse:this.mode==="collapse"},{default:()=>w("div",{class:[`${e}-tree-motion-wrapper`,`${e}-tree-motion-wrapper--${this.mode}`],style:{height:Jn(this.height)}},this.nodes.map(t=>w(Zt,{clsPrefix:e,tmNode:t})))})}}),or=T("tree",`
 font-size: var(--n-font-size);
 outline: none;
`,[D("ul, li",`
 margin: 0;
 padding: 0;
 list-style: none;
 `),D(">",[T("tree-node",[D("&:first-child",{marginTop:0})])]),T("tree-node-indent",`
 flex-grow: 0;
 flex-shrink: 0;
 height: 0;
 `),T("tree-motion-wrapper",[L("expand",[ht({duration:"0.2s"})]),L("collapse",[ht({duration:"0.2s",reverse:!0})])]),T("tree-node-wrapper",`
 box-sizing: border-box;
 padding: 3px 0;
 `),T("tree-node",`
 transform: translate3d(0,0,0);
 position: relative;
 display: flex;
 border-radius: var(--n-node-border-radius);
 transition: background-color .3s var(--n-bezier);
 `,[L("highlight",[T("tree-node-content",[G("text",{borderBottomColor:"var(--n-node-text-color-disabled)"})])]),L("disabled",[T("tree-node-content",`
 color: var(--n-node-text-color-disabled);
 cursor: not-allowed;
 `)]),Ee("disabled",[L("clickable",[T("tree-node-content",`
 cursor: pointer;
 `)])])]),L("block-node",[T("tree-node-content",`
 flex: 1;
 min-width: 0;
 `)]),Ee("block-line",[T("tree-node",[Ee("disabled",[T("tree-node-content",[D("&:hover",{backgroundColor:"var(--n-node-color-hover)"})]),L("selectable",[T("tree-node-content",[D("&:active",{backgroundColor:"var(--n-node-color-pressed)"})])]),L("pending",[T("tree-node-content",`
 background-color: var(--n-node-color-hover);
 `)]),L("selected",[T("tree-node-content",{backgroundColor:"var(--n-node-color-active)"})])])])]),L("block-line",[T("tree-node",[Ee("disabled",[D("&:hover",{backgroundColor:"var(--n-node-color-hover)"}),L("pending",`
 background-color: var(--n-node-color-hover);
 `),L("selectable",[Ee("selected",[D("&:active",{backgroundColor:"var(--n-node-color-pressed)"})])]),L("selected",{backgroundColor:"var(--n-node-color-active)"})]),L("disabled",`
 cursor: not-allowed;
 `)])]),T("tree-node-switcher",`
 cursor: pointer;
 display: inline-flex;
 flex-shrink: 0;
 height: 24px;
 width: 24px;
 align-items: center;
 justify-content: center;
 transition: transform .15s var(--n-bezier);
 vertical-align: bottom;
 `,[G("icon",`
 position: relative;
 height: 14px;
 width: 14px;
 display: flex;
 color: var(--n-arrow-color);
 transition: color .3s var(--n-bezier);
 font-size: 14px;
 `,[T("icon",[ut()]),T("base-loading",`
 color: var(--n-loading-color);
 position: absolute;
 left: 0;
 top: 0;
 right: 0;
 bottom: 0;
 `,[ut()]),T("base-icon",[ut()])]),L("hide",{visibility:"hidden"}),L("expanded",{transform:"rotate(90deg)"})]),T("tree-node-checkbox",`
 display: inline-flex;
 height: 24px;
 width: 16px;
 vertical-align: bottom;
 align-items: center;
 justify-content: center;
 margin-right: 4px;
 `,[L("right","margin-left: 4px;")]),L("checkable",[T("tree-node-content",`
 padding: 0 6px;
 `)]),T("tree-node-content",`
 position: relative;
 display: inline-flex;
 align-items: center;
 min-height: 24px;
 box-sizing: border-box;
 line-height: 1.5;
 vertical-align: bottom;
 padding: 0 6px 0 4px;
 cursor: default;
 border-radius: var(--n-node-border-radius);
 text-decoration-color: #0000;
 text-decoration-line: underline;
 color: var(--n-node-text-color);
 transition:
 color .3s var(--n-bezier),
 text-decoration-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[D("&:last-child",{marginBottom:0}),G("prefix",`
 display: inline-flex;
 margin-right: 8px;
 `),G("text",`
 border-bottom: 1px solid #0000;
 transition: border-color .3s var(--n-bezier);
 flex-grow: 1;
 max-width: 100%;
 `),G("suffix",`
 display: inline-flex;
 `)]),G("empty","margin: auto;")]);var rr=globalThis&&globalThis.__awaiter||function(e,t,c,s){function a(o){return o instanceof c?o:new c(function(u){u(o)})}return new(c||(c=Promise))(function(o,u){function i(f){try{l(s.next(f))}catch(h){u(h)}}function r(f){try{l(s.throw(f))}catch(h){u(h)}}function l(f){f.done?o(f.value):a(f.value).then(i,r)}l((s=s.apply(e,t||[])).next())})};const Ze=30;function lr(e,t,c,s){return{getIsGroup(){return!1},getKey(o){return o[e]},getChildren:s||(o=>o[t]),getDisabled(o){return!!(o[c]||o.checkboxDisabled)}}}const ar={allowCheckingNotLoaded:Boolean,filter:Function,defaultExpandAll:Boolean,expandedKeys:Array,keyField:{type:String,default:"key"},labelField:{type:String,default:"label"},childrenField:{type:String,default:"children"},disabledField:{type:String,default:"disabled"},defaultExpandedKeys:{type:Array,default:()=>[]},indeterminateKeys:Array,renderSwitcherIcon:Function,onUpdateIndeterminateKeys:[Function,Array],"onUpdate:indeterminateKeys":[Function,Array],onUpdateExpandedKeys:[Function,Array],"onUpdate:expandedKeys":[Function,Array]},ir=Object.assign(Object.assign(Object.assign(Object.assign({},Ae.props),{accordion:Boolean,showIrrelevantNodes:{type:Boolean,default:!0},data:{type:Array,default:()=>[]},expandOnDragenter:{type:Boolean,default:!0},expandOnClick:Boolean,checkOnClick:{type:[Boolean,Function],default:!1},cancelable:{type:Boolean,default:!0},checkable:Boolean,draggable:Boolean,blockNode:Boolean,blockLine:Boolean,disabled:Boolean,checkedKeys:Array,defaultCheckedKeys:{type:Array,default:()=>[]},selectedKeys:Array,defaultSelectedKeys:{type:Array,default:()=>[]},multiple:Boolean,pattern:{type:String,default:""},onLoad:Function,cascade:Boolean,selectable:{type:Boolean,default:!0},indent:{type:Number,default:16},allowDrop:{type:Function,default:Yo},animated:{type:Boolean,default:!0},checkboxPlacement:{type:String,default:"left"},virtualScroll:Boolean,watchProps:Array,renderLabel:Function,renderPrefix:Function,renderSuffix:Function,nodeProps:Function,keyboard:{type:Boolean,default:!0},getChildren:Function,onDragenter:[Function,Array],onDragleave:[Function,Array],onDragend:[Function,Array],onDragstart:[Function,Array],onDragover:[Function,Array],onDrop:[Function,Array],onUpdateCheckedKeys:[Function,Array],"onUpdate:checkedKeys":[Function,Array],onUpdateSelectedKeys:[Function,Array],"onUpdate:selectedKeys":[Function,Array]}),ar),{internalTreeSelect:Boolean,internalScrollable:Boolean,internalScrollablePadding:String,internalRenderEmpty:Function,internalHighlightKeySet:Object,internalUnifySelectCheck:Boolean,internalCheckboxFocusable:{type:Boolean,default:!0},internalFocusable:{type:Boolean,default:!0},checkStrategy:{type:String,default:"all"},leafOnly:Boolean}),dr=B({name:"Tree",props:ir,setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:c,mergedRtlRef:s}=et(e),a=tt("Tree",s,t),o=Ae("Tree","-tree",or,Vo,e,t),u=V(null),i=V(null),r=V(null);function l(){var n;return(n=r.value)===null||n===void 0?void 0:n.listElRef}function f(){var n;return(n=r.value)===null||n===void 0?void 0:n.itemsElRef}const h=$(()=>{const{filter:n}=e;if(n)return n;const{labelField:d}=e;return(p,y)=>{if(!p.length)return!0;const x=y[d];return typeof x=="string"?x.toLowerCase().includes(p.toLowerCase()):!1}}),v=$(()=>{const{pattern:n}=e;return n?!n.length||!h.value?{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}:Qo(e.data,h.value,n,e.keyField,e.childrenField):{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}}),g=$(()=>fo(e.showIrrelevantNodes?e.data:v.value.filteredTree,lr(e.keyField,e.childrenField,e.disabledField,e.getChildren))),S=Ne(Yt,null),_=e.internalTreeSelect?S.dataTreeMate:g,{watchProps:N}=e,k=V([]);N!=null&&N.includes("defaultCheckedKeys")?xe(()=>{k.value=e.defaultCheckedKeys}):k.value=e.defaultCheckedKeys;const K=A(e,"checkedKeys"),I=Me(K,k),E=$(()=>_.value.getCheckedKeys(I.value,{cascade:e.cascade,allowNotLoaded:e.allowCheckingNotLoaded})),M=Jo(e),Z=$(()=>E.value.checkedKeys),he=$(()=>{const{indeterminateKeys:n}=e;return n!==void 0?n:E.value.indeterminateKeys}),le=V([]);N!=null&&N.includes("defaultSelectedKeys")?xe(()=>{le.value=e.defaultSelectedKeys}):le.value=e.defaultSelectedKeys;const ke=A(e,"selectedKeys"),de=Me(ke,le),ge=V([]),Se=n=>{ge.value=e.defaultExpandAll?_.value.getNonLeafKeys():n===void 0?e.defaultExpandedKeys:n};N!=null&&N.includes("defaultExpandedKeys")?xe(()=>{Se(void 0)}):xe(()=>{Se(e.defaultExpandedKeys)});const Ie=A(e,"expandedKeys"),ne=Me(Ie,ge),ve=$(()=>g.value.getFlattenedNodes(ne.value)),{pendingNodeKeyRef:pe,handleKeydown:nt}=tr({props:e,mergedSelectedKeysRef:de,fNodesRef:ve,mergedExpandedKeysRef:ne,handleSelect:at,handleSwitcherClick:Nt});let m=null,P=null;const O=V(new Set),Re=$(()=>e.internalHighlightKeySet||v.value.highlightKeySet),He=Me(Re,O),We=V(new Set),en=$(()=>ne.value.filter(n=>!We.value.has(n)));let xt=0;const ze=V(null),qe=V(null),Xe=V(null),Ge=V(null),Ye=V(0),tn=$(()=>{const{value:n}=qe;return n?n.parent:null});Ue(A(e,"data"),()=>{We.value.clear(),pe.value=null,Oe()},{deep:!1});let ot=!1;const rt=()=>{ot=!0,Qe(()=>{ot=!1})};let Be;Ue(A(e,"pattern"),(n,d)=>{if(e.showIrrelevantNodes)if(Be=void 0,n){const{expandedKeys:p,highlightKeySet:y}=Zo(e.data,e.pattern,e.keyField,e.childrenField,h.value);O.value=y,rt(),Ke(p,Q(p),{node:null,action:"filter"})}else O.value=new Set;else if(!n.length)Be!==void 0&&(rt(),Ke(Be,Q(Be),{node:null,action:"filter"}));else{d.length||(Be=ne.value);const{expandedKeys:p}=v.value;p!==void 0&&(rt(),Ke(p,Q(p),{node:null,action:"filter"}))}});function kt(n){return rr(this,void 0,void 0,function*(){const{onLoad:d}=e;if(!d){yield Promise.resolve();return}const{value:p}=We;if(!p.has(n.key)){p.add(n.key);try{(yield d(n.rawNode))===!1&&Te()}catch(y){console.error(y),Te()}p.delete(n.key)}})}xe(()=>{var n;const{value:d}=g;if(!d)return;const{getNode:p}=d;(n=ne.value)===null||n===void 0||n.forEach(y=>{const x=p(y);x&&!x.shallowLoaded&&kt(x)})});const _e=V(!1),be=V([]);Ue(en,(n,d)=>{if(!e.animated||ot){Qe(Je);return}const p=new Set(d);let y=null,x=null;for(const U of n)if(!p.has(U)){if(y!==null)return;y=U}const q=new Set(n);for(const U of d)if(!q.has(U)){if(x!==null)return;x=U}if(y===null&&x===null)return;const{virtualScroll:j}=e,ce=(j?r.value.listElRef:u.value).offsetHeight,we=Math.ceil(ce/Ze)+1;let se;if(y!==null&&(se=d),x!==null&&(se===void 0?se=n:se=se.filter(U=>U!==x)),_e.value=!0,be.value=g.value.getFlattenedNodes(se),y!==null){const U=be.value.findIndex(X=>X.key===y);if(~U){const X=be.value[U].children;if(X){const me=Ft(X,n);be.value.splice(U+1,0,{__motion:!0,mode:"expand",height:j?me.length*Ze:void 0,nodes:j?me.slice(0,we):me})}}}if(x!==null){const U=be.value.findIndex(X=>X.key===x);if(~U){const X=be.value[U].children;if(!X)return;_e.value=!0;const me=Ft(X,n);be.value.splice(U+1,0,{__motion:!0,mode:"collapse",height:j?me.length*Ze:void 0,nodes:j?me.slice(0,we):me})}}});const nn=$(()=>ho(ve.value)),on=$(()=>_e.value?be.value:ve.value);function Je(){const{value:n}=i;n&&n.sync()}function rn(){_e.value=!1,e.virtualScroll&&Qe(Je)}function Q(n){const{getNode:d}=_.value;return n.map(p=>{var y;return((y=d(p))===null||y===void 0?void 0:y.rawNode)||null})}function Ke(n,d,p){const{"onUpdate:expandedKeys":y,onUpdateExpandedKeys:x}=e;ge.value=n,y&&H(y,n,d,p),x&&H(x,n,d,p)}function Ct(n,d,p){const{"onUpdate:checkedKeys":y,onUpdateCheckedKeys:x}=e;k.value=n,x&&H(x,n,d,p),y&&H(y,n,d,p)}function ln(n,d){const{"onUpdate:indeterminateKeys":p,onUpdateIndeterminateKeys:y}=e;p&&H(p,n,d),y&&H(y,n,d)}function lt(n,d,p){const{"onUpdate:selectedKeys":y,onUpdateSelectedKeys:x}=e;le.value=n,x&&H(x,n,d,p),y&&H(y,n,d,p)}function an(n){const{onDragenter:d}=e;d&&H(d,n)}function dn(n){const{onDragleave:d}=e;d&&H(d,n)}function sn(n){const{onDragend:d}=e;d&&H(d,n)}function cn(n){const{onDragstart:d}=e;d&&H(d,n)}function un(n){const{onDragover:d}=e;d&&H(d,n)}function fn(n){const{onDrop:d}=e;d&&H(d,n)}function Oe(){hn(),Ce()}function hn(){ze.value=null}function Ce(){Ye.value=0,qe.value=null,Xe.value=null,Ge.value=null,Te()}function Te(){m&&(window.clearTimeout(m),m=null),P=null}function wt(n,d){if(e.disabled||ye(n,e.disabledField))return;if(e.internalUnifySelectCheck&&!e.multiple){at(n);return}const p=d?"check":"uncheck",{checkedKeys:y,indeterminateKeys:x}=_.value[p](n.key,Z.value,{cascade:e.cascade,checkStrategy:M.value,allowNotLoaded:e.allowCheckingNotLoaded});Ct(y,Q(y),{node:n.rawNode,action:p}),ln(x,Q(x))}function gn(n){if(e.disabled)return;const{key:d}=n,{value:p}=ne,y=p.findIndex(x=>x===d);if(~y){const x=Array.from(p);x.splice(y,1),Ke(x,Q(x),{node:n.rawNode,action:"collapse"})}else{const x=g.value.getNode(d);if(!x||x.isLeaf)return;let q;if(e.accordion){const j=new Set(n.siblings.map(({key:ce})=>ce));q=p.filter(ce=>!j.has(ce)),q.push(d)}else q=p.concat(d);Ke(q,Q(q),{node:n.rawNode,action:"expand"})}}function Nt(n){e.disabled||_e.value||gn(n)}function at(n){if(!(e.disabled||!e.selectable)){if(pe.value=n.key,e.internalUnifySelectCheck){const{value:{checkedKeys:d,indeterminateKeys:p}}=E;e.multiple?wt(n,!(d.includes(n.key)||p.includes(n.key))):Ct([n.key],Q([n.key]),{node:n.rawNode,action:"check"})}if(e.multiple){const d=Array.from(de.value),p=d.findIndex(y=>y===n.key);~p?e.cancelable&&d.splice(p,1):~p||d.push(n.key),lt(d,Q(d),{node:n.rawNode,action:~p?"unselect":"select"})}else de.value.includes(n.key)?e.cancelable&&lt([],[],{node:n.rawNode,action:"unselect"}):lt([n.key],Q([n.key]),{node:n.rawNode,action:"select"})}}function vn(n){if(m&&(window.clearTimeout(m),m=null),n.isLeaf)return;P=n.key;const d=()=>{if(P!==n.key)return;const{value:p}=Xe;if(p&&p.key===n.key&&!ne.value.includes(n.key)){const y=ne.value.concat(n.key);Ke(y,Q(y),{node:n.rawNode,action:"expand"})}m=null,P=null};n.shallowLoaded?m=window.setTimeout(()=>{d()},1e3):m=window.setTimeout(()=>{kt(n).then(()=>{d()})},1e3)}function pn({event:n,node:d}){!e.draggable||e.disabled||ye(d,e.disabledField)||(St({event:n,node:d},!1),an({event:n,node:d.rawNode}))}function bn({event:n,node:d}){!e.draggable||e.disabled||ye(d,e.disabledField)||dn({event:n,node:d.rawNode})}function mn(n){n.target===n.currentTarget&&Ce()}function yn({event:n,node:d}){Oe(),!(!e.draggable||e.disabled||ye(d,e.disabledField))&&sn({event:n,node:d.rawNode})}function xn({event:n,node:d}){!e.draggable||e.disabled||ye(d,e.disabledField)||(xt=n.clientX,ze.value=d,cn({event:n,node:d.rawNode}))}function St({event:n,node:d},p=!0){var y;if(!e.draggable||e.disabled||ye(d,e.disabledField))return;const{value:x}=ze;if(!x)return;const{allowDrop:q,indent:j}=e;p&&un({event:n,node:d.rawNode});const ce=n.currentTarget,{height:we,top:se}=ce.getBoundingClientRect(),U=n.clientY-se;let X;q({node:d.rawNode,dropPosition:"inside",phase:"drag"})?U<=8?X="before":U>=we-8?X="after":X="inside":U<=we/2?X="before":X="after";const{value:_n}=nn;let F,J;const it=_n(d.key);if(it===null){Ce();return}let _t=!1;X==="inside"?(F=d,J="inside"):X==="before"?d.isFirstChild?(F=d,J="before"):(F=ve.value[it-1],J="after"):(F=d,J="after"),!F.isLeaf&&ne.value.includes(F.key)&&(_t=!0,J==="after"&&(F=ve.value[it+1],F?J="before":(F=d,J="inside")));const Kt=F;if(Xe.value=Kt,!_t&&x.isLastChild&&x.key===F.key&&(J="after"),J==="after"){let Tt=xt-n.clientX,dt=0;for(;Tt>=j/2&&F.parent!==null&&F.isLastChild&&dt<1;)Tt-=j,dt+=1,F=F.parent;Ye.value=dt}else Ye.value=0;if((x.contains(F)||J==="inside"&&((y=x.parent)===null||y===void 0?void 0:y.key)===F.key)&&!(x.key===Kt.key&&x.key===F.key)){Ce();return}if(!q({node:F.rawNode,dropPosition:J,phase:"drag"})){Ce();return}if(x.key===F.key)Te();else if(P!==F.key)if(J==="inside"){if(e.expandOnDragenter){if(vn(F),!F.shallowLoaded&&P!==F.key){Oe();return}}else if(!F.shallowLoaded){Oe();return}}else Te();else J!=="inside"&&Te();Ge.value=J,qe.value=F}function kn({event:n,node:d,dropPosition:p}){if(!e.draggable||e.disabled||ye(d,e.disabledField))return;const{value:y}=ze,{value:x}=qe,{value:q}=Ge;if(!(!y||!x||!q)&&e.allowDrop({node:x.rawNode,dropPosition:q,phase:"drag"})&&y.key!==x.key){if(q==="before"){const j=y.getNext({includeDisabled:!0});if(j&&j.key===x.key){Ce();return}}if(q==="after"){const j=y.getPrev({includeDisabled:!0});if(j&&j.key===x.key){Ce();return}}fn({event:n,node:x.rawNode,dragNode:y.rawNode,dropPosition:p}),Oe()}}function Cn(){Je()}function wn(){Je()}function Nn(n){var d;if(e.virtualScroll||e.internalScrollable){const{value:p}=i;if(!((d=p==null?void 0:p.containerRef)===null||d===void 0)&&d.contains(n.relatedTarget))return;pe.value=null}else{const{value:p}=u;if(p!=null&&p.contains(n.relatedTarget))return;pe.value=null}}Ue(pe,n=>{var d,p;if(n!==null){if(e.virtualScroll)(d=r.value)===null||d===void 0||d.scrollTo({key:n});else if(e.internalScrollable){const{value:y}=i;if(y===null)return;const x=(p=y.contentRef)===null||p===void 0?void 0:p.querySelector(`[data-key="${Wt(n)}"]`);if(!x)return;y.scrollTo({el:x})}}}),Ot(je,{loadingKeysRef:We,highlightKeySetRef:He,displayedCheckedKeysRef:Z,displayedIndeterminateKeysRef:he,mergedSelectedKeysRef:de,mergedExpandedKeysRef:ne,mergedThemeRef:o,mergedCheckStrategyRef:M,nodePropsRef:A(e,"nodeProps"),disabledRef:A(e,"disabled"),checkableRef:A(e,"checkable"),selectableRef:A(e,"selectable"),expandOnClickRef:A(e,"expandOnClick"),onLoadRef:A(e,"onLoad"),draggableRef:A(e,"draggable"),blockLineRef:A(e,"blockLine"),indentRef:A(e,"indent"),cascadeRef:A(e,"cascade"),checkOnClickRef:A(e,"checkOnClick"),checkboxPlacementRef:e.checkboxPlacement,droppingMouseNodeRef:Xe,droppingNodeParentRef:tn,draggingNodeRef:ze,droppingPositionRef:Ge,droppingOffsetLevelRef:Ye,fNodesRef:ve,pendingNodeKeyRef:pe,disabledFieldRef:A(e,"disabledField"),internalScrollableRef:A(e,"internalScrollable"),internalCheckboxFocusableRef:A(e,"internalCheckboxFocusable"),internalTreeSelect:e.internalTreeSelect,renderLabelRef:A(e,"renderLabel"),renderPrefixRef:A(e,"renderPrefix"),renderSuffixRef:A(e,"renderSuffix"),renderSwitcherIconRef:A(e,"renderSwitcherIcon"),labelFieldRef:A(e,"labelField"),multipleRef:A(e,"multiple"),handleSwitcherClick:Nt,handleDragEnd:yn,handleDragEnter:pn,handleDragLeave:bn,handleDragStart:xn,handleDrop:kn,handleDragOver:St,handleSelect:at,handleCheck:wt});function Sn(n){var d;(d=r.value)===null||d===void 0||d.scrollTo(n)}const Rn={handleKeydown:nt,scrollTo:Sn,getCheckedData:()=>{if(!e.checkable)return{keys:[],options:[]};const{checkedKeys:n}=E.value;return{keys:n,options:Q(n)}},getIndeterminateData:()=>{if(!e.checkable)return{keys:[],options:[]};const{indeterminateKeys:n}=E.value;return{keys:n,options:Q(n)}}},Rt=$(()=>{const{common:{cubicBezierEaseInOut:n},self:{fontSize:d,nodeBorderRadius:p,nodeColorHover:y,nodeColorPressed:x,nodeColorActive:q,arrowColor:j,loadingColor:ce,nodeTextColor:we,nodeTextColorDisabled:se,dropMarkColor:U}}=o.value;return{"--n-arrow-color":j,"--n-loading-color":ce,"--n-bezier":n,"--n-font-size":d,"--n-node-border-radius":p,"--n-node-color-active":q,"--n-node-color-hover":y,"--n-node-color-pressed":x,"--n-node-text-color":we,"--n-node-text-color-disabled":se,"--n-drop-mark-color":U}}),De=c?mt("tree",void 0,Rt,e):void 0;return Object.assign(Object.assign({},Rn),{mergedClsPrefix:t,mergedTheme:o,rtlEnabled:a,fNodes:on,aip:_e,selfElRef:u,virtualListInstRef:r,scrollbarInstRef:i,handleFocusout:Nn,handleDragLeaveTree:mn,handleScroll:Cn,getScrollContainer:l,getScrollContent:f,handleAfterEnter:rn,handleResize:wn,cssVars:c?void 0:Rt,themeClass:De==null?void 0:De.themeClass,onRender:De==null?void 0:De.onRender})},render(){var e;const{fNodes:t,internalRenderEmpty:c}=this;if(!t.length&&c)return c();const{mergedClsPrefix:s,blockNode:a,blockLine:o,draggable:u,disabled:i,internalFocusable:r,checkable:l,handleKeydown:f,rtlEnabled:h,handleFocusout:v}=this,g=r&&!i,S=g?"0":void 0,_=[`${s}-tree`,h&&`${s}-tree--rtl`,l&&`${s}-tree--checkable`,(o||a)&&`${s}-tree--block-node`,o&&`${s}-tree--block-line`],N=K=>"__motion"in K?w(nr,{height:K.height,nodes:K.nodes,clsPrefix:s,mode:K.mode,onAfterEnter:this.handleAfterEnter}):w(Zt,{key:K.key,tmNode:K,clsPrefix:s});if(this.virtualScroll){const{mergedTheme:K,internalScrollablePadding:I}=this,E=Zn(I||"0");return w(Et,{ref:"scrollbarInstRef",onDragleave:u?this.handleDragLeaveTree:void 0,container:this.getScrollContainer,content:this.getScrollContent,class:_,theme:K.peers.Scrollbar,themeOverrides:K.peerOverrides.Scrollbar,tabindex:S,onKeydown:g?f:void 0,onFocusout:g?v:void 0},{default:()=>{var M;return(M=this.onRender)===null||M===void 0||M.call(this),w(uo,{ref:"virtualListInstRef",items:this.fNodes,itemSize:Ze,ignoreItemResize:this.aip,paddingTop:E.top,paddingBottom:E.bottom,class:this.themeClass,style:[this.cssVars,{paddingLeft:E.left,paddingRight:E.right}],onScroll:this.handleScroll,onResize:this.handleResize,showScrollbar:!1,itemResizable:!0},{default:({item:Z})=>N(Z)})}})}const{internalScrollable:k}=this;return _.push(this.themeClass),(e=this.onRender)===null||e===void 0||e.call(this),k?w(Et,{class:_,tabindex:S,onKeydown:g?f:void 0,onFocusout:g?v:void 0,style:this.cssVars,contentStyle:{padding:this.internalScrollablePadding}},{default:()=>w("div",{onDragleave:u?this.handleDragLeaveTree:void 0,ref:"selfElRef"},this.fNodes.map(N))}):w("div",{class:_,tabindex:S,ref:"selfElRef",style:this.cssVars,onKeydown:g?f:void 0,onFocusout:g?v:void 0,onDragleave:u?this.handleDragLeaveTree:void 0},t.length?t.map(N):Qn(this.$slots.empty,()=>[w(go,{class:`${s}-tree__empty`,theme:this.mergedTheme.peers.Empty,themeOverrides:this.mergedTheme.peerOverrides.Empty})]))}}),Qt=B({__name:"DraggableCard",props:{initialValue:{default:()=>({})}},setup(e){const t=e,c=t.initialValue.left!==void 0,s=t.initialValue.top!==void 0,a={x:(c?t.initialValue.left:t.initialValue.right)??0,y:(s?t.initialValue.top:t.initialValue.bottom)??0},o=Vt({...a}),u=$(()=>{const k=c?`left:${o.x}px;`:`right:${o.x}px;`,K=s?`top:${o.y}px;`:`bottom:${o.y}px;`;return k+K});let i;const r=k=>{i=k,a.x=o.x,a.y=o.y},l=k=>{if(!v.value||!i)return;const K=k.clientX-i.clientX,I=k.clientY-i.clientY;o.x=a.x+(c?K:-K),o.y=a.y+(s?I:-I)},f=()=>{i=void 0},h=re(),v=re(),g=k=>{i&&k.preventDefault()},S=["transition-top,bottom,left,right-500"],_=()=>{if(!v.value)return;const{top:k,bottom:K,left:I,right:E}=v.value.getBoundingClientRect();if(E<0||I>window.innerWidth||K<0||k>window.innerHeight){o.x=a.x,o.y=a.y,f();const M=h.value;M&&(M.classList.add(...S),setTimeout(()=>{M.classList.remove(...S)},550))}};window.addEventListener("pointermove",l),window.addEventListener("pointerup",_),document.addEventListener("selectstart",g),Lt(()=>{window.removeEventListener("pointermove",l),window.removeEventListener("pointerup",_),document.removeEventListener("selectstart",g),f()}),Ue(v,(k,K)=>{k&&(k.addEventListener("pointerdown",r),k.addEventListener("pointerup",f)),K&&(K.removeEventListener("pointerdown",r),K.removeEventListener("pointerup",f))}),Lt(()=>{v.value&&(v.value.removeEventListener("pointerdown",r),v.value.removeEventListener("pointerup",f))});const N=k=>{k instanceof HTMLElement?v.value=k:v.value=void 0};return(k,K)=>(W(),oe(to,{to:"body"},[te("div",{fixed:"",ref_key:"box",ref:h,style:Ht([k.$attrs.style,u.value]),class:eo(k.$attrs.class)},[jt(k.$slots,"default",{onRef:N})],6)]))}});const sr=["onClick"],cr=B({__name:"AttrCard",props:{focusNode:{}},setup(e){const t=e,c=["text","desc"],s=$(()=>Object.entries(t.focusNode.attr).map(([a,o])=>{const u={name:a,value:JSON.stringify(o)};return c.includes(a)?[u,{name:a+".length",value:JSON.stringify((o==null?void 0:o.length)??null)}]:u}).flat());return(a,o)=>(W(),oe(Qt,{initialValue:{top:75,right:10}},{default:C(({onRef:u})=>[R(b(Xt),{size:"small",striped:"",singleLine:!1,class:"gkd_code",themeOverrides:{thPaddingSmall:"2px 4px",tdPaddingSmall:"2px 4px"}},{default:C(()=>[te("thead",{"cursor-move":"",ref:u},[R(b(Ve),null,{default:C(()=>[R(b(fe),null,{default:C(()=>[z(" Name ")]),_:1}),R(b(fe),null,{default:C(()=>[z(" Value ")]),_:1})]),_:1})],512),R(b(Gt),null,{default:C(()=>[(W(!0),Fe(vt,null,gt(s.value,i=>(W(),oe(b(Ve),{key:i.name},{default:C(()=>[R(b(ie),null,{default:C(()=>[te("span",{onClick:r=>b(Pe)(`${i.name}=${i.value}`)},ee(i.name),9,sr)]),_:2},1024),R(b(ie),null,{default:C(()=>[R(b($e),{style:{width:"250px"}},{default:C(()=>[z(ee(i.value),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),a.focusNode.quickFind!==void 0?(W(),oe(b(Ve),{key:0},{default:C(()=>[R(b(ie),null,{default:C(()=>[z(" quickFind ")]),_:1}),R(b(ie),null,{default:C(()=>[R(b(vo),null,{trigger:C(()=>[te("span",null,ee(JSON.stringify(a.focusNode.quickFind)),1)]),default:C(()=>[z(" 此节点是否可使用 quickFind ")]),_:1})]),_:1})]),_:1})):Le("",!0)]),_:1})]),_:2},1024)]),_:1}))}}),ur={flex:"","flex-col":"",relative:"","h-full":""},fr=["src"],hr=te("div",{absolute:"","left-0":"","top-0":"","bottom-0":"","right-0":"","b-solid":"","b-1px":"","b-red":""},null,-1),gr=[hr],vr=B({__name:"ScreenshotCard",props:{url:{},snapshot:{},rootNode:{},focusNode:{},onUpdateFocusNode:{type:Function,default:()=>()=>{}}},setup(e){const t=e,c=re(),s=re();xe(()=>{if(!t.rootNode)return;const u=s.value,i=c.value;if(!u||!i)return;const r=i.getBoundingClientRect(),l=r.width/i.naturalWidth*i.naturalHeight,f=(r.height-l)/2,h=(u.clientX-r.left)/r.width*i.naturalWidth,v=(u.clientY-r.top-f)/l*i.naturalHeight,g=po(t.snapshot.nodes,h,v);g&&t.onUpdateFocusNode(g)});const a=u=>`${u*100}%`,o=$(()=>{var f;const u=c.value,i=(f=t.focusNode)==null?void 0:f.attr;if(!t.focusNode||!u||!i)return"";const r=u.getBoundingClientRect(),l=r.width/u.naturalWidth*u.naturalHeight;return{left:`calc(${a(i.left/u.naturalWidth)} - 2px)`,width:`calc(${a((i.right-i.left)/u.naturalWidth)} + 2px)`,top:`calc(${a((i.top/u.naturalHeight*l+(r.height-l)/2)/r.height)} - 2px)`,height:`calc(${a((i.bottom-i.top)/u.naturalHeight*l/r.height)} + 2px)`}});return(u,i)=>(W(),Fe("div",ur,[te("img",{ref_key:"imgRef",ref:c,src:u.url,onClick:i[0]||(i[0]=r=>s.value=r),"cursor-crosshair":"","h-full":"","object-contain":"",style:{"max-width":"max(35vw, 400px)"}},null,8,fr),te("div",{style:Ht(o.value),absolute:"","pointer-events-none":"","transition-all-300":"","b-1px":"","b-blue":"","b-solid":""},gr,4)]))}}),pr={"w-500px":"","bg-white":"","b-1px":"","b-solid":"","b-gray-200":"","rounded-4px":"","p-8px":""},br={flex:"","m-b-4px":""},mr=te("div",{"p-5px":""},null,-1),yr={"break-all":""},xr=te("div",{"p-l-8px":""},null,-1),kr=B({__name:"SearchCard",props:{rootNode:{},onUpdateFocusNode:{type:Function,default:()=>()=>{}}},setup(e){const t=e,c=re(""),s=Vt([]),a=ko(()=>{if(!t.rootNode){ae.error("根节点不存在");return}const u=c.value.trim();if(u)if(o.value){if(s.find(l=>typeof l.selector=="object"&&l.selector.toString()==u)){ae.warning("不可重复选择");return}const i=Co(()=>wo(u),"选择器非法"),r=i.querySelectorAll(t.rootNode);if(r.length==0){ae.success("没有选择到节点");return}ae.success(`选择到 ${r.length} 个节点`),s.unshift({selector:i,results:r})}else{if(s.find(l=>typeof l.selector=="string"&&l.selector.toString()==u)){ae.warning("不可重复选择");return}const i=[],r=[t.rootNode];for(;r.length>0;){const l=r.pop();pt(l).includes(u)&&i.push(l),r.push(...[...l.children].reverse())}if(i.length==0){ae.success("没有搜索到节点");return}ae.success(`搜索到 ${i.length} 个节点`),s.unshift({selector:u,results:i})}}),o=re(!0);return(u,i)=>(W(),oe(Qt,{initialValue:{top:75,right:390},class:"z-1"},{default:C(({onRef:r})=>[te("div",pr,[te("div",br,[R(b(bo),{value:o.value,"onUpdate:value":i[0]||(i[0]=l=>o.value=l)},{default:C(()=>[R(b(At),null,{default:C(()=>[R(b(It),{value:!1},{default:C(()=>[z(" 字符搜索 ")]),_:1}),R(b(It),{value:!0},{default:C(()=>[z(" 选择器查询 ")]),_:1})]),_:1})]),_:1},8,["value"]),te("div",{"flex-1":"","cursor-move":"",ref:r},null,512)]),R(b(yo),null,{default:C(()=>[R(b(mo),{value:c.value,"onUpdate:value":i[1]||(i[1]=l=>c.value=l),placeholder:o.value?"请输入选择器":"请输入字符",onKeyup:no(b(a),["enter"]),inputProps:{class:"gkd_code"}},null,8,["value","placeholder","onKeyup"]),R(b(ft),{onClick:b(a)},{default:C(()=>[z(ee(o.value?"查询":"搜索"),1)]),_:1},8,["onClick"])]),_:1}),mr,R(b(Lo),null,{default:C(()=>[(W(!0),Fe(vt,null,gt(b(s),(l,f)=>(W(),oe(b(Ao),{key:l.selector.toString()},{header:C(()=>[te("span",yr,ee((typeof l.selector=="string"?"字符搜索":"选择器查询")+"："+l.selector.toString()),1)]),"header-extra":C(()=>[z(ee(l.results.length+"个节点")+" ",1),xr,R(b(ft),{onClick:oo(h=>b(s).splice(f,1),["stop"])},{default:C(()=>[z(" 删除 ")]),_:2},1032,["onClick"])]),default:C(()=>[R(b(At),{style:{"max-height":"400px","overflow-y":"scroll","padding-bottom":"10px"}},{default:C(()=>[(W(!0),Fe(vt,null,gt(l.results,h=>(W(),oe(b(ft),{key:h.id,onClick:v=>u.onUpdateFocusNode(h),size:"small"},{default:C(()=>[z(ee(b(pt)(h)),1)]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1}))}}),Cr={flex:"","flex-col":""},wr=B({__name:"WindowCard",props:{snapshot:{},rootNode:{},focusNode:{},onUpdateFocusNode:{type:Function,default:()=>()=>{}}},setup(e){const t=e,c=re([]);xe(async()=>{var h;if(!t.focusNode)return;const r=t.focusNode.id;let l=t.focusNode.parent;if(!l)return;const f=new Set(c.value);for(;l;)f.add(l.id),l=l.parent;f.size!=c.value.length&&(c.value=[...f],await Qe(),(h=s.value)==null||h.scrollTo({key:r}))});const s=re(),a=(r,l,f)=>{},o=(r,l)=>{var f;return l.id===((f=t.focusNode)==null?void 0:f.id)},u=r=>{var l;return{onClick:()=>{t.onUpdateFocusNode(r.option)},style:{color:r.option.id==((l=t.focusNode)==null?void 0:l.id)?"#00F":void 0}}},i=r=>pt(r.option);return(r,l)=>(W(),Fe("div",Cr,[R(b(Xt),{size:"small",striped:"",singleLine:!1,class:"table-fixed",themeOverrides:{thPaddingSmall:"2px 4px",tdPaddingSmall:"2px 4px"}},{default:C(()=>[R(b(Wo),null,{default:C(()=>[R(b(Ve),null,{default:C(()=>[R(b(fe),{class:"w-140px"},{default:C(()=>[z(" Device ")]),_:1}),R(b(fe),{class:"w-100px"},{default:C(()=>[z(" Name ")]),_:1}),R(b(fe),{class:"w-100px"},{default:C(()=>[z(" VersionName ")]),_:1}),R(b(fe),{class:"w-100px"},{default:C(()=>[z(" VersionCode ")]),_:1}),R(b(fe),{class:"w-200px"},{default:C(()=>[z(" AppId ")]),_:1}),R(b(fe),null,{default:C(()=>[z(" ActivityId ")]),_:1}),R(b(fe),{class:"w-175px"},{default:C(()=>[z(" 操作 ")]),_:1})]),_:1})]),_:1}),R(b(Gt),null,{default:C(()=>[R(b(Ve),null,{default:C(()=>[R(b(ie),{class:"whitespace-nowrap"},{default:C(()=>[z(ee(`${b(zt)(r.snapshot).manufacturer} Android ${b(zt)(r.snapshot).release||""}`),1)]),_:1}),R(b(ie),{class:"whitespace-nowrap",onClick:l[0]||(l[0]=f=>b(Pe)(r.snapshot.appName))},{default:C(()=>[R(b($e),null,{default:C(()=>[z(ee(r.snapshot.appName),1)]),_:1})]),_:1}),R(b(ie),{class:"whitespace-nowrap",onClick:l[1]||(l[1]=f=>b(Pe)(r.snapshot.appVersionName))},{default:C(()=>[R(b($e),null,{default:C(()=>[z(ee(r.snapshot.appVersionName),1)]),_:1})]),_:1}),R(b(ie),{class:"whitespace-nowrap",onClick:l[2]||(l[2]=f=>b(Pe)(r.snapshot.appVersionCode.toString()))},{default:C(()=>[R(b($e),null,{default:C(()=>[z(ee(r.snapshot.appVersionCode),1)]),_:1})]),_:1}),R(b(ie),{class:"whitespace-nowrap",onClick:l[3]||(l[3]=f=>b(Pe)(r.snapshot.appId))},{default:C(()=>[R(b($e),null,{default:C(()=>[z(ee(r.snapshot.appId),1)]),_:1})]),_:1}),R(b(ie),{onClick:l[4]||(l[4]=f=>b(Pe)(r.snapshot.activityId)),class:"break-words"},{default:C(()=>[R(b($e),null,{default:C(()=>[z(ee(r.snapshot.activityId),1)]),_:1})]),_:1}),R(b(ie),null,{default:C(()=>[jt(r.$slots,"default",{},void 0,!0)]),_:3})]),_:3})]),_:3})]),_:3}),R(b(dr),{ref_key:"treeRef",ref:s,virtualScroll:"","onUpdate:checkedKeys":a,keyField:"id",defaultExpandedKeys:c.value,data:[r.rootNode],filter:o,nodeProps:u,renderLabel:i},null,8,["defaultExpandedKeys","data","filter","nodeProps","renderLabel"])]))}});const Nr=So(wr,[["__scopeId","data-v-e76dce83"]]),Sr={"h-full":"",flex:"","gap-5px":"","p-5px":"","box-border":""},Lr=B({__name:"SnapshotPage",setup(e){const t=ro(),c=lo(),s=No(),a=$(()=>String(t.params.snapshotId||"")),o=$(()=>{const h=Number(t.query.showSize||"");return!Number.isSafeInteger(h)||h<=0?2e3:h}),u=re(""),i=re();xe(async()=>{const h=await Dt.getItem(a.value);if(!h){ae.error("快照数据缺失");return}Pn()&&setTimeout(async()=>{Tn(h),En[h.id]||Dn(await Dt.getItem(a.value))},1e3),h.nodes.length>o.value&&(ae.warning(`当前展示节点数量为${o.value}
之后的${h.nodes.length-o.value}个节点将被丢弃
使用showSize查询参数可以修改展示数量`),h.nodes=h.nodes.slice(0,o.value));const v=await Ln.getItem(a.value);if(!v){ae.create("截屏数据缺失");return}u.value=URL.createObjectURL(new Blob([v])),i.value=h,r.value=xo(h.nodes),s.value="快照-"+h.appName||h.appId});const r=re(),l=re(),f=async()=>{ae.success("删除成功,即将回到首页"),await $n(2e3),c.replace({path:"/"})};return(h,v)=>(W(),Fe("div",Sr,[u.value&&i.value?(W(),oe(vr,{key:0,url:u.value,snapshot:i.value,rootNode:r.value,focusNode:l.value,onUpdateFocusNode:v[0]||(v[0]=g=>l.value=g)},null,8,["url","snapshot","rootNode","focusNode"])):Le("",!0),i.value&&r.value?(W(),oe(Nr,{key:1,rootNode:r.value,snapshot:i.value,focusNode:l.value,onUpdateFocusNode:v[1]||(v[1]=g=>l.value=g),class:"flex-1"},{default:C(()=>[i.value?(W(),oe(Kn,{key:0,snapshot:i.value,onDelete:f,showPreview:!1},null,8,["snapshot"])):Le("",!0)]),_:1},8,["rootNode","snapshot","focusNode"])):Le("",!0),l.value?(W(),oe(cr,{key:2,focusNode:l.value},null,8,["focusNode"])):Le("",!0),r.value?(W(),oe(kr,{key:3,rootNode:r.value,onUpdateFocusNode:v[2]||(v[2]=g=>l.value=g)},null,8,["rootNode"])):Le("",!0)]))}});export{Lr as default};
//# sourceMappingURL=SnapshotPage-a78cd367.js.map
