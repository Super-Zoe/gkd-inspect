import{_ as En,e as Fn,f as An}from"./ActionCard.vue_vue_type_script_setup_true_lang-c58889a2.js";import{f as vt,c as Ae,m as ue,a as Et,b as In,e as zn,h as On,i as Ft}from"./storage-b48f8d2f.js";import{d as M,m as y,n as kt,p as P,q as F,v as Y,x as K,y as nt,z as W,c as A,A as Oe,B as Vt,C as ot,D as wt,E as Ct,G as q,H as Bn,I as z,J as Wt,K as qt,L as Xt,M as Mn,O as G,P as $e,Q as Un,S as At,T as Yt,U as Hn,V as ge,W as jn,X as Vn,Y as Wn,Z as _e,_ as qn,$ as Xn,a0 as ct,a1 as Yn,a2 as Gn,a3 as ut,a4 as Jn,a5 as Zn,a6 as Qn,a7 as Gt,a8 as eo,w as we,e as We,a9 as ft,aa as Ve,ab as It,ac as to,ad as tt,a as Jt,s as Z,ae as zt,af as te,h as U,ag as Zt,ah as pt,ai as no,aj as oo,o as V,g as S,u as m,b as _,k as j,l as Ie,f as ze,ak as bt,F as mt,t as re,i as ro,j as ht,al as lo,am as ao,an as io}from"./index-11d103be.js";import{e as qe,C as so,f as co,g as uo,h as fo,i as Ot,V as ho,j as go,k as Bt,l as vo,m as po,n as bo,d as Qt,o as Ke,p as mo,c as Mt,q as Ut,r as yo,N as xo,a as ko,s as yt,t as Ht,v as wo}from"./node-7dd46893.js";import{e as Co,a as No,p as So,u as Ro}from"./index-8697cba2.js";import{_ as _o}from"./_plugin-vue_export-helper-c27b6911.js";import"./jszip.min-9dbcba6b.js";function en(e){return typeof e=="string"?`s-${e}`:`n-${e}`}const Ko=M({name:"ChevronLeft",render(){return y("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},y("path",{d:"M10.3536 3.14645C10.5488 3.34171 10.5488 3.65829 10.3536 3.85355L6.20711 8L10.3536 12.1464C10.5488 12.3417 10.5488 12.6583 10.3536 12.8536C10.1583 13.0488 9.84171 13.0488 9.64645 12.8536L5.14645 8.35355C4.95118 8.15829 4.95118 7.84171 5.14645 7.64645L9.64645 3.14645C9.84171 2.95118 10.1583 2.95118 10.3536 3.14645Z",fill:"currentColor"}))}}),$o=M({name:"Switcher",render(){return y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},y("path",{d:"M12 8l10 8l-10 8z"}))}}),Po=e=>{const{fontWeight:t,textColor1:s,textColor2:c,textColorDisabled:a,dividerColor:r,fontSize:g}=e;return{titleFontSize:g,titleFontWeight:t,dividerColor:r,titleTextColor:s,titleTextColorDisabled:a,fontSize:g,textColor:c,arrowColor:c,arrowColorDisabled:a,itemMargin:"16px 0 0 0",titlePadding:"16px 0 0 0"}},To={name:"Collapse",common:kt,self:Po},Lo=To,Do=P("collapse","width: 100%;",[P("collapse-item",`
 font-size: var(--n-font-size);
 color: var(--n-text-color);
 transition:
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 margin: var(--n-item-margin);
 `,[F("disabled",[Y("header","cursor: not-allowed;",[Y("header-main",`
 color: var(--n-title-text-color-disabled);
 `),P("collapse-item-arrow",`
 color: var(--n-arrow-color-disabled);
 `)])]),P("collapse-item","margin-left: 32px;"),K("&:first-child","margin-top: 0;"),K("&:first-child >",[Y("header","padding-top: 0;")]),F("left-arrow-placement",[Y("header",[P("collapse-item-arrow","margin-right: 4px;")])]),F("right-arrow-placement",[Y("header",[P("collapse-item-arrow","margin-left: 4px;")])]),Y("content-wrapper",[Y("content-inner","padding-top: 16px;"),vt({duration:"0.15s"})]),F("active",[Y("header",[F("active",[P("collapse-item-arrow","transform: rotate(90deg);")])])]),K("&:not(:first-child)","border-top: 1px solid var(--n-divider-color);"),Y("header",`
 font-size: var(--n-title-font-size);
 display: flex;
 flex-wrap: nowrap;
 align-items: center;
 transition: color .3s var(--n-bezier);
 position: relative;
 padding: var(--n-title-padding);
 color: var(--n-title-text-color);
 cursor: pointer;
 `,[Y("header-main",`
 display: flex;
 flex-wrap: nowrap;
 align-items: center;
 font-weight: var(--n-title-font-weight);
 transition: color .3s var(--n-bezier);
 flex: 1;
 color: var(--n-title-text-color);
 `),Y("header-extra",`
 display: flex;
 align-items: center;
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
 `),P("collapse-item-arrow",`
 display: flex;
 transition:
 transform .15s var(--n-bezier),
 color .3s var(--n-bezier);
 font-size: 18px;
 color: var(--n-arrow-color);
 `)])])]),Eo=Object.assign(Object.assign({},Oe.props),{defaultExpandedNames:{type:[Array,String],default:null},expandedNames:[Array,String],arrowPlacement:{type:String,default:"left"},accordion:{type:Boolean,default:!1},displayDirective:{type:String,default:"if"},onItemHeaderClick:[Function,Array],"onUpdate:expandedNames":[Function,Array],onUpdateExpandedNames:[Function,Array],onExpandedNamesChange:{type:[Function,Array],validator:()=>!0,default:void 0}}),tn=Ct("n-collapse"),Fo=M({name:"Collapse",props:Eo,setup(e,{slots:t}){const{mergedClsPrefixRef:s,inlineThemeDisabled:c,mergedRtlRef:a}=nt(e),r=W(e.defaultExpandedNames),g=A(()=>e.expandedNames),h=qe(g,r),l=Oe("Collapse","-collapse",Do,Lo,e,s);function u(R){const{"onUpdate:expandedNames":k,onUpdateExpandedNames:b,onExpandedNamesChange:T}=e;b&&q(b,R),k&&q(k,R),T&&q(T,R),r.value=R}function o(R){const{onItemHeaderClick:k}=e;k&&q(k,R)}function d(R,k,b){const{accordion:T}=e,{value:$}=h;if(T)R?(u([k]),o({name:k,expanded:!0,event:b})):(u([]),o({name:k,expanded:!1,event:b}));else if(!Array.isArray($))u([k]),o({name:k,expanded:!0,event:b});else{const E=$.slice(),H=E.findIndex(J=>k===J);~H?(E.splice(H,1),u(E),o({name:k,expanded:!1,event:b})):(E.push(k),u(E),o({name:k,expanded:!0,event:b}))}}Vt(tn,{props:e,mergedClsPrefixRef:s,expandedNamesRef:h,slots:t,toggleItem:d});const f=ot("Collapse",a,s),v=A(()=>{const{common:{cubicBezierEaseInOut:R},self:{titleFontWeight:k,dividerColor:b,titlePadding:T,titleTextColor:$,titleTextColorDisabled:E,textColor:H,arrowColor:J,fontSize:fe,titleFontSize:de,arrowColorDisabled:pe,itemMargin:he}}=l.value;return{"--n-font-size":fe,"--n-bezier":R,"--n-text-color":H,"--n-divider-color":b,"--n-title-padding":T,"--n-title-font-size":de,"--n-title-text-color":$,"--n-title-text-color-disabled":E,"--n-title-font-weight":k,"--n-arrow-color":J,"--n-arrow-color-disabled":pe,"--n-item-margin":he}}),C=c?wt("collapse",void 0,v,e):void 0;return{rtlEnabled:f,mergedTheme:l,mergedClsPrefix:s,cssVars:c?void 0:v,themeClass:C==null?void 0:C.themeClass,onRender:C==null?void 0:C.onRender}},render(){var e;return(e=this.onRender)===null||e===void 0||e.call(this),y("div",{class:[`${this.mergedClsPrefix}-collapse`,this.rtlEnabled&&`${this.mergedClsPrefix}-collapse--rtl`,this.themeClass],style:this.cssVars},this.$slots)}}),Ao=M({name:"CollapseItemContent",props:{displayDirective:{type:String,required:!0},show:Boolean,clsPrefix:{type:String,required:!0}},setup(e){return{onceTrue:Bn(z(e,"show"))}},render(){return y(Xt,null,{default:()=>{const{show:e,displayDirective:t,onceTrue:s,clsPrefix:c}=this,a=t==="show"&&s,r=y("div",{class:`${c}-collapse-item__content-wrapper`},y("div",{class:`${c}-collapse-item__content-inner`},this.$slots));return a?Wt(r,[[qt,e]]):e?r:null}})}}),Io={title:String,name:[String,Number],disabled:Boolean,displayDirective:String},zo=M({name:"CollapseItem",props:Io,setup(e){const{mergedRtlRef:t}=nt(e),s=Mn(),c=G(()=>{var d;return(d=e.name)!==null&&d!==void 0?d:s}),a=$e(tn);a||Un("collapse-item","`n-collapse-item` must be placed inside `n-collapse`.");const{expandedNamesRef:r,props:g,mergedClsPrefixRef:h,slots:l}=a,u=A(()=>{const{value:d}=r;if(Array.isArray(d)){const{value:f}=c;return!~d.findIndex(v=>v===f)}else if(d){const{value:f}=c;return f!==d}return!0});return{rtlEnabled:ot("Collapse",t,h),collapseSlots:l,randomName:s,mergedClsPrefix:h,collapsed:u,mergedDisplayDirective:A(()=>{const{displayDirective:d}=e;return d||g.displayDirective}),arrowPlacement:A(()=>g.arrowPlacement),handleClick(d){a&&!e.disabled&&a.toggleItem(u.value,c.value,d)}}},render(){const{collapseSlots:e,$slots:t,arrowPlacement:s,collapsed:c,mergedDisplayDirective:a,mergedClsPrefix:r,disabled:g}=this,h=At(t.header,{collapsed:c},()=>[this.title]),l=t["header-extra"]||e["header-extra"],u=t.arrow||e.arrow;return y("div",{class:[`${r}-collapse-item`,`${r}-collapse-item--${s}-arrow-placement`,g&&`${r}-collapse-item--disabled`,!c&&`${r}-collapse-item--active`]},y("div",{class:[`${r}-collapse-item__header`,!c&&`${r}-collapse-item__header--active`]},y("div",{class:`${r}-collapse-item__header-main`,onClick:this.handleClick},s==="right"&&h,y("div",{class:`${r}-collapse-item-arrow`,key:this.rtlEnabled?0:1},At(u,{collapsed:c},()=>{var o;return[y(Yt,{clsPrefix:r},{default:(o=e.expandIcon)!==null&&o!==void 0?o:()=>this.rtlEnabled?y(Ko,null):y(so,null)})]})),s==="left"&&h),Hn(l,{collapsed:c},o=>y("div",{class:`${r}-collapse-item__header-extra`,onClick:this.handleClick},o))),y(Ao,{clsPrefix:r,displayDirective:a,show:!c},t))}}),Oo={thPaddingSmall:"6px",thPaddingMedium:"12px",thPaddingLarge:"12px",tdPaddingSmall:"6px",tdPaddingMedium:"12px",tdPaddingLarge:"12px"},Bo=e=>{const{dividerColor:t,cardColor:s,modalColor:c,popoverColor:a,tableHeaderColor:r,tableColorStriped:g,textColor1:h,textColor2:l,borderRadius:u,fontWeightStrong:o,lineHeight:d,fontSizeSmall:f,fontSizeMedium:v,fontSizeLarge:C}=e;return Object.assign(Object.assign({},Oo),{fontSizeSmall:f,fontSizeMedium:v,fontSizeLarge:C,lineHeight:d,borderRadius:u,borderColor:ge(s,t),borderColorModal:ge(c,t),borderColorPopover:ge(a,t),tdColor:s,tdColorModal:c,tdColorPopover:a,tdColorStriped:ge(s,g),tdColorStripedModal:ge(c,g),tdColorStripedPopover:ge(a,g),thColor:ge(s,r),thColorModal:ge(c,r),thColorPopover:ge(a,r),thTextColor:h,tdTextColor:l,thFontWeight:o})},Mo={name:"Table",common:kt,self:Bo},Uo=Mo,Ho=e=>{const{borderRadiusSmall:t,hoverColor:s,pressedColor:c,primaryColor:a,textColor3:r,textColor2:g,textColorDisabled:h,fontSize:l}=e;return{fontSize:l,lineHeight:"1.5",nodeHeight:"30px",nodeWrapperPadding:"3px 0",nodeBorderRadius:t,nodeColorHover:s,nodeColorPressed:c,nodeColorActive:Wn(a,{alpha:.1}),arrowColor:r,nodeTextColor:g,nodeTextColorDisabled:h,loadingColor:a,dropMarkColor:a}},jo=jn({name:"Tree",common:kt,peers:{Checkbox:co,Scrollbar:Vn,Empty:uo},self:Ho}),Vo=jo,Wo=K([P("table",`
 font-size: var(--n-font-size);
 font-variant-numeric: tabular-nums;
 line-height: var(--n-line-height);
 width: 100%;
 border-radius: var(--n-border-radius) var(--n-border-radius) 0 0;
 text-align: left;
 border-collapse: separate;
 border-spacing: 0;
 overflow: hidden;
 background-color: var(--n-td-color);
 border-color: var(--n-merged-border-color);
 transition:
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 --n-merged-border-color: var(--n-border-color);
 `,[K("th",`
 white-space: nowrap;
 transition:
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 text-align: inherit;
 padding: var(--n-th-padding);
 vertical-align: inherit;
 text-transform: none;
 border: 0px solid var(--n-merged-border-color);
 font-weight: var(--n-th-font-weight);
 color: var(--n-th-text-color);
 background-color: var(--n-th-color);
 border-bottom: 1px solid var(--n-merged-border-color);
 border-right: 1px solid var(--n-merged-border-color);
 `,[K("&:last-child",`
 border-right: 0px solid var(--n-merged-border-color);
 `)]),K("td",`
 transition:
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 padding: var(--n-td-padding);
 color: var(--n-td-text-color);
 background-color: var(--n-td-color);
 border: 0px solid var(--n-merged-border-color);
 border-right: 1px solid var(--n-merged-border-color);
 border-bottom: 1px solid var(--n-merged-border-color);
 `,[K("&:last-child",`
 border-right: 0px solid var(--n-merged-border-color);
 `)]),F("bordered",`
 border: 1px solid var(--n-merged-border-color);
 border-radius: var(--n-border-radius);
 `,[K("tr",[K("&:last-child",[K("td",`
 border-bottom: 0 solid var(--n-merged-border-color);
 `)])])]),F("single-line",[K("th",`
 border-right: 0px solid var(--n-merged-border-color);
 `),K("td",`
 border-right: 0px solid var(--n-merged-border-color);
 `)]),F("single-column",[K("tr",[K("&:not(:last-child)",[K("td",`
 border-bottom: 0px solid var(--n-merged-border-color);
 `)])])]),F("striped",[K("tr:nth-of-type(even)",[K("td","background-color: var(--n-td-color-striped)")])]),_e("bottom-bordered",[K("tr",[K("&:last-child",[K("td",`
 border-bottom: 0px solid var(--n-merged-border-color);
 `)])])])]),qn(P("table",`
 background-color: var(--n-td-color-modal);
 --n-merged-border-color: var(--n-border-color-modal);
 `,[K("th",`
 background-color: var(--n-th-color-modal);
 `),K("td",`
 background-color: var(--n-td-color-modal);
 `)])),Xn(P("table",`
 background-color: var(--n-td-color-popover);
 --n-merged-border-color: var(--n-border-color-popover);
 `,[K("th",`
 background-color: var(--n-th-color-popover);
 `),K("td",`
 background-color: var(--n-td-color-popover);
 `)]))]),qo=Object.assign(Object.assign({},Oe.props),{bordered:{type:Boolean,default:!0},bottomBordered:{type:Boolean,default:!0},singleLine:{type:Boolean,default:!0},striped:Boolean,singleColumn:Boolean,size:{type:String,default:"medium"}}),nn=M({name:"Table",props:qo,setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:s,mergedRtlRef:c}=nt(e),a=Oe("Table","-table",Wo,Uo,e,t),r=ot("Table",c,t),g=A(()=>{const{size:l}=e,{self:{borderColor:u,tdColor:o,tdColorModal:d,tdColorPopover:f,thColor:v,thColorModal:C,thColorPopover:R,thTextColor:k,tdTextColor:b,borderRadius:T,thFontWeight:$,lineHeight:E,borderColorModal:H,borderColorPopover:J,tdColorStriped:fe,tdColorStripedModal:de,tdColorStripedPopover:pe,[ct("fontSize",l)]:he,[ct("tdPadding",l)]:Ce,[ct("thPadding",l)]:Ne},common:{cubicBezierEaseInOut:Be}}=a.value;return{"--n-bezier":Be,"--n-td-color":o,"--n-td-color-modal":d,"--n-td-color-popover":f,"--n-td-text-color":b,"--n-border-color":u,"--n-border-color-modal":H,"--n-border-color-popover":J,"--n-border-radius":T,"--n-font-size":he,"--n-th-color":v,"--n-th-color-modal":C,"--n-th-color-popover":R,"--n-th-font-weight":$,"--n-th-text-color":k,"--n-line-height":E,"--n-td-padding":Ce,"--n-th-padding":Ne,"--n-td-color-striped":fe,"--n-td-color-striped-modal":de,"--n-td-color-striped-popover":pe}}),h=s?wt("table",A(()=>e.size[0]),g,e):void 0;return{rtlEnabled:r,mergedClsPrefix:t,cssVars:s?void 0:g,themeClass:h==null?void 0:h.themeClass,onRender:h==null?void 0:h.onRender}},render(){var e;const{mergedClsPrefix:t}=this;return(e=this.onRender)===null||e===void 0||e.call(this),y("table",{class:[`${t}-table`,this.themeClass,{[`${t}-table--rtl`]:this.rtlEnabled,[`${t}-table--bottom-bordered`]:this.bottomBordered,[`${t}-table--bordered`]:this.bordered,[`${t}-table--single-line`]:this.singleLine,[`${t}-table--single-column`]:this.singleColumn,[`${t}-table--striped`]:this.striped}],style:this.cssVars},this.$slots)}}),Re=M({name:"Th",render(){return y("th",null,this.$slots)}}),xt=M({name:"Tr",render(){return y("tr",null,this.$slots)}}),ve=M({name:"Td",render(){return y("td",null,this.$slots)}}),Xo=M({name:"Thead",render(){return y("thead",null,this.$slots)}}),on=M({name:"Tbody",render(){return y("tbody",null,this.$slots)}}),rn=Ct("n-tree-select"),Xe=Ct("n-tree"),Yo=M({name:"NTreeSwitcher",props:{clsPrefix:{type:String,required:!0},indent:{type:Number,required:!0},expanded:Boolean,selected:Boolean,hide:Boolean,loading:Boolean,onClick:Function,tmNode:{type:Object,required:!0}},setup(e){const{renderSwitcherIconRef:t}=$e(Xe,null);return()=>{const{clsPrefix:s,expanded:c,hide:a,indent:r,onClick:g}=e;return y("span",{"data-switcher":!0,class:[`${s}-tree-node-switcher`,c&&`${s}-tree-node-switcher--expanded`,a&&`${s}-tree-node-switcher--hide`],style:{width:`${r}px`},onClick:g},y("div",{class:`${s}-tree-node-switcher__icon`},y(Yn,null,{default:()=>{if(e.loading)return y(Gn,{clsPrefix:s,key:"loading",radius:85,strokeWidth:20});const{value:h}=t;return h?h({expanded:e.expanded,selected:e.selected,option:e.tmNode.rawNode}):y(Yt,{clsPrefix:s,key:"switcher"},{default:()=>y($o,null)})}})))}}}),Go=M({name:"NTreeNodeCheckbox",props:{clsPrefix:{type:String,required:!0},indent:{type:Number,required:!0},right:Boolean,focusable:Boolean,disabled:Boolean,checked:Boolean,indeterminate:Boolean,onCheck:Function},setup(e){const t=$e(Xe);function s(a){const{onCheck:r}=e;r&&r(a)}function c(a){s(a)}return{handleUpdateValue:c,mergedTheme:t.mergedThemeRef}},render(){const{clsPrefix:e,mergedTheme:t,checked:s,indeterminate:c,disabled:a,focusable:r,indent:g,handleUpdateValue:h}=this;return y("span",{class:[`${e}-tree-node-checkbox`,this.right&&`${e}-tree-node-checkbox--right`],style:{width:`${g}px`},"data-checkbox":!0},y(fo,{focusable:r,disabled:a,theme:t.peers.Checkbox,themeOverrides:t.peerOverrides.Checkbox,checked:s,indeterminate:c,onUpdateChecked:h}))}}),Jo=M({name:"TreeNodeContent",props:{clsPrefix:{type:String,required:!0},disabled:Boolean,checked:Boolean,selected:Boolean,onClick:Function,onDragstart:Function,tmNode:{type:Object,required:!0},nodeProps:Object},setup(e){const{renderLabelRef:t,renderPrefixRef:s,renderSuffixRef:c,labelFieldRef:a}=$e(Xe),r=W(null);function g(l){const{onClick:u}=e;u&&u(l)}function h(l){g(l)}return{selfRef:r,renderLabel:t,renderPrefix:s,renderSuffix:c,labelField:a,handleClick:h}},render(){const{clsPrefix:e,labelField:t,nodeProps:s,checked:c=!1,selected:a=!1,renderLabel:r,renderPrefix:g,renderSuffix:h,handleClick:l,onDragstart:u,tmNode:{rawNode:o,rawNode:{prefix:d,suffix:f,[t]:v}}}=this;return y("span",Object.assign({},s,{ref:"selfRef",class:[`${e}-tree-node-content`,s==null?void 0:s.class],onClick:l,draggable:u===void 0?void 0:!0,onDragstart:u}),g||d?y("div",{class:`${e}-tree-node-content__prefix`},g?g({option:o,selected:a,checked:c}):ut(d)):null,y("div",{class:`${e}-tree-node-content__text`},r?r({option:o,selected:a,checked:c}):ut(v)),h||f?y("div",{class:`${e}-tree-node-content__suffix`},h?h({option:o,selected:a,checked:c}):ut(f)):null)}});function jt({position:e,offsetLevel:t,indent:s,el:c}){const a={position:"absolute",boxSizing:"border-box",right:0};if(e==="inside")a.left=0,a.top=0,a.bottom=0,a.borderRadius="inherit",a.boxShadow="inset 0 0 0 2px var(--n-drop-mark-color)";else{const r=e==="before"?"top":"bottom";a[r]=0,a.left=`${c.offsetLeft+6-t*s}px`,a.height="2px",a.backgroundColor="var(--n-drop-mark-color)",a.transformOrigin=r,a.borderRadius="1px",a.transform=e==="before"?"translateY(-4px)":"translateY(4px)"}return y("div",{style:a})}function Zo({dropPosition:e,node:t}){return t.isLeaf===!1||t.children?!0:e!=="inside"}function Qo(e){return A(()=>e.leafOnly?"child":e.checkStrategy)}function ke(e,t){return!!e.rawNode[t]}function ln(e,t,s,c){e==null||e.forEach(a=>{s(a),ln(a[t],t,s,c),c(a)})}function er(e,t,s,c,a){const r=new Set,g=new Set,h=[];return ln(e,c,l=>{if(h.push(l),a(t,l)){g.add(l[s]);for(let u=h.length-2;u>=0;--u)if(!r.has(h[u][s]))r.add(h[u][s]);else return}},()=>{h.pop()}),{expandedKeys:Array.from(r),highlightKeySet:g}}if(Jn&&Image){const e=new Image;e.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}function tr(e,t,s,c,a){const r=new Set,g=new Set,h=new Set,l=[],u=[],o=[];function d(v){v.forEach(C=>{if(o.push(C),t(s,C)){r.add(C[c]),h.add(C[c]);for(let k=o.length-2;k>=0;--k){const b=o[k][c];if(!g.has(b))g.add(b),r.has(b)&&r.delete(b);else break}}const R=C[a];R&&d(R),o.pop()})}d(e);function f(v,C){v.forEach(R=>{const k=R[c],b=r.has(k),T=g.has(k);if(!b&&!T)return;const $=R[a];if($)if(b)C.push(R);else{l.push(k);const E=Object.assign(Object.assign({},R),{[a]:[]});C.push(E),f($,E[a])}else C.push(R)})}return f(e,u),{filteredTree:u,highlightKeySet:h,expandedKeys:l}}const nr=M({name:"TreeNode",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(e){const t=$e(Xe),{droppingNodeParentRef:s,droppingMouseNodeRef:c,draggingNodeRef:a,droppingPositionRef:r,droppingOffsetLevelRef:g,nodePropsRef:h,indentRef:l,blockLineRef:u,checkboxPlacementRef:o,checkOnClickRef:d,disabledFieldRef:f,showLineRef:v}=t,C=G(()=>!!e.tmNode.rawNode.checkboxDisabled),R=G(()=>ke(e.tmNode,f.value)),k=G(()=>t.disabledRef.value||R.value),b=A(()=>{const{value:x}=h;if(x)return x({option:e.tmNode.rawNode})}),T=W(null),$={value:null};Zn(()=>{$.value=T.value.$el});function E(){const{tmNode:x}=e;if(!x.isLeaf&&!x.shallowLoaded){if(!t.loadingKeysRef.value.has(x.key))t.loadingKeysRef.value.add(x.key);else return;const{onLoadRef:{value:L}}=t;L&&L(x.rawNode).then(O=>{O!==!1&&t.handleSwitcherClick(x)}).finally(()=>{t.loadingKeysRef.value.delete(x.key)})}else t.handleSwitcherClick(x)}const H=G(()=>!R.value&&t.selectableRef.value&&(t.internalTreeSelect?t.mergedCheckStrategyRef.value!=="child"||t.multipleRef.value&&t.cascadeRef.value||e.tmNode.isLeaf:!0)),J=G(()=>t.checkableRef.value&&(t.cascadeRef.value||t.mergedCheckStrategyRef.value!=="child"||e.tmNode.isLeaf)),fe=G(()=>t.displayedCheckedKeysRef.value.includes(e.tmNode.key)),de=G(()=>{const{value:x}=J;if(!x)return!1;const{value:L}=d,{tmNode:O}=e;return typeof L=="boolean"?!O.disabled&&L:L(e.tmNode.rawNode)});function pe(x){const{value:L}=t.expandOnClickRef,{value:O}=H,{value:Q}=de;if(!O&&!L&&!Q||Ot(x,"checkbox")||Ot(x,"switcher"))return;const{tmNode:Ye}=e;O&&t.handleSelect(Ye),L&&!Ye.isLeaf&&E(),Q&&Ne(!fe.value)}function he(x){var L,O;u.value||(k.value||pe(x),(O=(L=b.value)===null||L===void 0?void 0:L.onClick)===null||O===void 0||O.call(L,x))}function Ce(x){var L,O;u.value&&(k.value||pe(x),(O=(L=b.value)===null||L===void 0?void 0:L.onClick)===null||O===void 0||O.call(L,x))}function Ne(x){t.handleCheck(e.tmNode,x)}function Be(x){t.handleDragStart({event:x,node:e.tmNode})}function le(x){x.currentTarget===x.target&&t.handleDragEnter({event:x,node:e.tmNode})}function be(x){x.preventDefault(),t.handleDragOver({event:x,node:e.tmNode})}function me(x){t.handleDragEnd({event:x,node:e.tmNode})}function rt(x){x.currentTarget===x.target&&t.handleDragLeave({event:x,node:e.tmNode})}function se(x){x.preventDefault(),r.value!==null&&t.handleDrop({event:x,node:e.tmNode,dropPosition:r.value})}const ye=A(()=>{const{clsPrefix:x}=e,{value:L}=l;if(v.value){const O=[];let Q=e.tmNode.parent;for(;Q;)Q.isLastChild?O.push(y("div",{class:`${x}-tree-node-indent`},y("div",{style:{width:`${L}px`}}))):O.push(y("div",{class:[`${x}-tree-node-indent`,`${x}-tree-node-indent--show-line`]},y("div",{style:{width:`${L}px`}}))),Q=Q.parent;return O.reverse()}else return Qn(e.tmNode.level,y("div",{class:`${e.clsPrefix}-tree-node-indent`},y("div",{style:{width:`${L}px`}})))});return{showDropMark:G(()=>{const{value:x}=a;if(!x)return;const{value:L}=r;if(!L)return;const{value:O}=c;if(!O)return;const{tmNode:Q}=e;return Q.key===O.key}),showDropMarkAsParent:G(()=>{const{value:x}=s;if(!x)return!1;const{tmNode:L}=e,{value:O}=r;return O==="before"||O==="after"?x.key===L.key:!1}),pending:G(()=>t.pendingNodeKeyRef.value===e.tmNode.key),loading:G(()=>t.loadingKeysRef.value.has(e.tmNode.key)),highlight:G(()=>{var x;return(x=t.highlightKeySetRef.value)===null||x===void 0?void 0:x.has(e.tmNode.key)}),checked:fe,indeterminate:G(()=>t.displayedIndeterminateKeysRef.value.includes(e.tmNode.key)),selected:G(()=>t.mergedSelectedKeysRef.value.includes(e.tmNode.key)),expanded:G(()=>t.mergedExpandedKeysRef.value.includes(e.tmNode.key)),disabled:k,checkable:J,mergedCheckOnClick:de,checkboxDisabled:C,selectable:H,expandOnClick:t.expandOnClickRef,internalScrollable:t.internalScrollableRef,draggable:t.draggableRef,blockLine:u,nodeProps:b,checkboxFocusable:t.internalCheckboxFocusableRef,droppingPosition:r,droppingOffsetLevel:g,indent:l,checkboxPlacement:o,showLine:v,contentInstRef:T,contentElRef:$,indentNodes:ye,handleCheck:Ne,handleDrop:se,handleDragStart:Be,handleDragEnter:le,handleDragOver:be,handleDragEnd:me,handleDragLeave:rt,handleLineClick:Ce,handleContentClick:he,handleSwitcherClick:E}},render(){const{tmNode:e,clsPrefix:t,checkable:s,expandOnClick:c,selectable:a,selected:r,checked:g,highlight:h,draggable:l,blockLine:u,indent:o,indentNodes:d,disabled:f,pending:v,internalScrollable:C,nodeProps:R,checkboxPlacement:k}=this,b=l&&!f?{onDragenter:this.handleDragEnter,onDragleave:this.handleDragLeave,onDragend:this.handleDragEnd,onDrop:this.handleDrop,onDragover:this.handleDragOver}:void 0,T=C?en(e.key):void 0,$=k==="right",E=s?y(Go,{indent:o,right:$,focusable:this.checkboxFocusable,disabled:f||this.checkboxDisabled,clsPrefix:t,checked:this.checked,indeterminate:this.indeterminate,onCheck:this.handleCheck}):null;return y("div",Object.assign({class:`${t}-tree-node-wrapper`},b),y("div",Object.assign({},u?R:void 0,{class:[`${t}-tree-node`,{[`${t}-tree-node--selected`]:r,[`${t}-tree-node--checkable`]:s,[`${t}-tree-node--highlight`]:h,[`${t}-tree-node--pending`]:v,[`${t}-tree-node--disabled`]:f,[`${t}-tree-node--selectable`]:a,[`${t}-tree-node--clickable`]:a||c||this.mergedCheckOnClick},R==null?void 0:R.class],"data-key":T,draggable:l&&u,onClick:this.handleLineClick,onDragstart:l&&u&&!f?this.handleDragStart:void 0}),d,e.isLeaf&&this.showLine?y("div",{class:[`${t}-tree-node-indent`,`${t}-tree-node-indent--show-line`,e.isLeaf&&`${t}-tree-node-indent--is-leaf`,e.isLastChild&&`${t}-tree-node-indent--last-child`]},y("div",{style:{width:`${o}px`}})):y(Yo,{clsPrefix:t,expanded:this.expanded,selected:r,loading:this.loading,hide:e.isLeaf,tmNode:this.tmNode,indent:o,onClick:this.handleSwitcherClick}),$?null:E,y(Jo,{ref:"contentInstRef",clsPrefix:t,checked:g,selected:r,onClick:this.handleContentClick,nodeProps:u?void 0:R,onDragstart:l&&!u&&!f?this.handleDragStart:void 0,tmNode:e}),l?this.showDropMark?jt({el:this.contentElRef.value,position:this.droppingPosition,offsetLevel:this.droppingOffsetLevel,indent:o}):this.showDropMarkAsParent?jt({el:this.contentElRef.value,position:"inside",offsetLevel:this.droppingOffsetLevel,indent:o}):null:null,$?E:null))}}),an=nr;function or({props:e,fNodesRef:t,mergedExpandedKeysRef:s,mergedSelectedKeysRef:c,handleSelect:a,handleSwitcherClick:r}){const{value:g}=c,h=$e(rn,null),l=h?h.pendingNodeKeyRef:W(g.length?g[g.length-1]:null);function u(o){if(!e.keyboard)return;const{value:d}=l;if(d===null){if((o.key==="ArrowDown"||o.key==="ArrowUp")&&o.preventDefault(),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(o.key)&&d===null){const{value:f}=t;let v=0;for(;v<f.length;){if(!f[v].disabled){l.value=f[v].key;break}v+=1}}}else{const{value:f}=t;let v=f.findIndex(C=>C.key===d);if(!~v)return;if(o.key==="Enter")a(f[v]);else if(o.key==="ArrowDown")for(o.preventDefault(),v+=1;v<f.length;){if(!f[v].disabled){l.value=f[v].key;break}v+=1}else if(o.key==="ArrowUp")for(o.preventDefault(),v-=1;v>=0;){if(!f[v].disabled){l.value=f[v].key;break}v-=1}else if(o.key==="ArrowLeft"){const C=f[v];if(C.isLeaf||!s.value.includes(d)){const R=C.getParent();R&&(l.value=R.key)}else r(C)}else if(o.key==="ArrowRight"){const C=f[v];if(C.isLeaf)return;if(!s.value.includes(d))r(C);else for(v+=1;v<f.length;){if(!f[v].disabled){l.value=f[v].key;break}v+=1}}}}return{pendingNodeKeyRef:l,handleKeydown:u}}const rr=M({name:"TreeMotionWrapper",props:{clsPrefix:{type:String,required:!0},height:Number,nodes:{type:Array,required:!0},mode:{type:String,required:!0},onAfterEnter:{type:Function,required:!0}},render(){const{clsPrefix:e}=this;return y(Xt,{onAfterEnter:this.onAfterEnter,appear:!0,reverse:this.mode==="collapse"},{default:()=>y("div",{class:[`${e}-tree-motion-wrapper`,`${e}-tree-motion-wrapper--${this.mode}`],style:{height:Gt(this.height)}},this.nodes.map(t=>y(an,{clsPrefix:e,tmNode:t})))})}}),gt=eo(),lr=P("tree",`
 font-size: var(--n-font-size);
 outline: none;
`,[K("ul, li",`
 margin: 0;
 padding: 0;
 list-style: none;
 `),K(">",[P("tree-node",[K("&:first-child","margin-top: 0;")])]),P("tree-motion-wrapper",[F("expand",[vt({duration:"0.2s"})]),F("collapse",[vt({duration:"0.2s",reverse:!0})])]),P("tree-node-wrapper",`
 box-sizing: border-box;
 padding: var(--n-node-wrapper-padding);
 `),P("tree-node",`
 transform: translate3d(0,0,0);
 position: relative;
 display: flex;
 border-radius: var(--n-node-border-radius);
 transition: background-color .3s var(--n-bezier);
 `,[F("highlight",[P("tree-node-content",[Y("text","border-bottom-color: var(--n-node-text-color-disabled);")])]),F("disabled",[P("tree-node-content",`
 color: var(--n-node-text-color-disabled);
 cursor: not-allowed;
 `)]),_e("disabled",[F("clickable",[P("tree-node-content",`
 cursor: pointer;
 `)])])]),F("block-node",[P("tree-node-content",`
 flex: 1;
 min-width: 0;
 `)]),_e("block-line",[P("tree-node",[_e("disabled",[P("tree-node-content",[K("&:hover","background: var(--n-node-color-hover);")]),F("selectable",[P("tree-node-content",[K("&:active","background: var(--n-node-color-pressed);")])]),F("pending",[P("tree-node-content",`
 background: var(--n-node-color-hover);
 `)]),F("selected",[P("tree-node-content","background: var(--n-node-color-active);")])])])]),F("block-line",[P("tree-node",[_e("disabled",[K("&:hover","background: var(--n-node-color-hover);"),F("pending",`
 background: var(--n-node-color-hover);
 `),F("selectable",[_e("selected",[K("&:active","background: var(--n-node-color-pressed);")])]),F("selected","background: var(--n-node-color-active);")]),F("disabled",`
 cursor: not-allowed;
 `)])]),P("tree-node-indent",`
 flex-grow: 0;
 flex-shrink: 0;
 `,[F("show-line","position: relative",[K("&::before",`
 position: absolute;
 left: 50%;
 border-left: 1px solid var(--n-border-color);
 transition: border-color .3s var(--n-bezier);
 transform: translate(-50%);
 content: "";
 top: var(--n-line-offset-top);
 bottom: var(--n-line-offset-bottom);
 `),F("last-child",[K("&::before",`
 bottom: 50%;
 `)]),F("is-leaf",[K("&::after",`
 position: absolute;
 content: "";
 left: calc(50% + 0.5px);
 right: 0;
 bottom: 50%;
 transition: border-color .3s var(--n-bezier);
 border-bottom: 1px solid var(--n-border-color);
 `)])]),_e("show-line","height: 0;")]),P("tree-node-switcher",`
 cursor: pointer;
 display: inline-flex;
 flex-shrink: 0;
 height: var(--n-node-content-height);
 align-items: center;
 justify-content: center;
 transition: transform .15s var(--n-bezier);
 vertical-align: bottom;
 `,[Y("icon",`
 position: relative;
 height: 14px;
 width: 14px;
 display: flex;
 color: var(--n-arrow-color);
 transition: color .3s var(--n-bezier);
 font-size: 14px;
 `,[P("icon",[gt]),P("base-loading",`
 color: var(--n-loading-color);
 position: absolute;
 left: 0;
 top: 0;
 right: 0;
 bottom: 0;
 `,[gt]),P("base-icon",[gt])]),F("hide","visibility: hidden;"),F("expanded","transform: rotate(90deg);")]),P("tree-node-checkbox",`
 display: inline-flex;
 height: var(--n-node-content-height);
 vertical-align: bottom;
 align-items: center;
 justify-content: center;
 `),P("tree-node-content",`
 user-select: none;
 position: relative;
 display: inline-flex;
 align-items: center;
 min-height: var(--n-node-content-height);
 box-sizing: border-box;
 line-height: var(--n-line-height);
 vertical-align: bottom;
 padding: 0 6px 0 4px;
 cursor: default;
 border-radius: var(--n-node-border-radius);
 color: var(--n-node-text-color);
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[K("&:last-child","margin-bottom: 0;"),Y("prefix",`
 display: inline-flex;
 margin-right: 8px;
 `),Y("text",`
 border-bottom: 1px solid #0000;
 transition: border-color .3s var(--n-bezier);
 flex-grow: 1;
 max-width: 100%;
 `),Y("suffix",`
 display: inline-flex;
 `)]),Y("empty","margin: auto;")]);var ar=globalThis&&globalThis.__awaiter||function(e,t,s,c){function a(r){return r instanceof s?r:new s(function(g){g(r)})}return new(s||(s=Promise))(function(r,g){function h(o){try{u(c.next(o))}catch(d){g(d)}}function l(o){try{u(c.throw(o))}catch(d){g(d)}}function u(o){o.done?r(o.value):a(o.value).then(h,l)}u((c=c.apply(e,t||[])).next())})};function ir(e,t,s,c){return{getIsGroup(){return!1},getKey(r){return r[e]},getChildren:c||(r=>r[t]),getDisabled(r){return!!(r[s]||r.checkboxDisabled)}}}const dr={allowCheckingNotLoaded:Boolean,filter:Function,defaultExpandAll:Boolean,expandedKeys:Array,keyField:{type:String,default:"key"},labelField:{type:String,default:"label"},childrenField:{type:String,default:"children"},disabledField:{type:String,default:"disabled"},defaultExpandedKeys:{type:Array,default:()=>[]},indeterminateKeys:Array,renderSwitcherIcon:Function,onUpdateIndeterminateKeys:[Function,Array],"onUpdate:indeterminateKeys":[Function,Array],onUpdateExpandedKeys:[Function,Array],"onUpdate:expandedKeys":[Function,Array]},sr=Object.assign(Object.assign(Object.assign(Object.assign({},Oe.props),{accordion:Boolean,showIrrelevantNodes:{type:Boolean,default:!0},data:{type:Array,default:()=>[]},expandOnDragenter:{type:Boolean,default:!0},expandOnClick:Boolean,checkOnClick:{type:[Boolean,Function],default:!1},cancelable:{type:Boolean,default:!0},checkable:Boolean,draggable:Boolean,blockNode:Boolean,blockLine:Boolean,showLine:Boolean,disabled:Boolean,checkedKeys:Array,defaultCheckedKeys:{type:Array,default:()=>[]},selectedKeys:Array,defaultSelectedKeys:{type:Array,default:()=>[]},multiple:Boolean,pattern:{type:String,default:""},onLoad:Function,cascade:Boolean,selectable:{type:Boolean,default:!0},scrollbarProps:Object,indent:{type:Number,default:24},allowDrop:{type:Function,default:Zo},animated:{type:Boolean,default:!0},checkboxPlacement:{type:String,default:"left"},virtualScroll:Boolean,watchProps:Array,renderLabel:Function,renderPrefix:Function,renderSuffix:Function,nodeProps:Function,keyboard:{type:Boolean,default:!0},getChildren:Function,onDragenter:[Function,Array],onDragleave:[Function,Array],onDragend:[Function,Array],onDragstart:[Function,Array],onDragover:[Function,Array],onDrop:[Function,Array],onUpdateCheckedKeys:[Function,Array],"onUpdate:checkedKeys":[Function,Array],onUpdateSelectedKeys:[Function,Array],"onUpdate:selectedKeys":[Function,Array]}),dr),{internalTreeSelect:Boolean,internalScrollable:Boolean,internalScrollablePadding:String,internalRenderEmpty:Function,internalHighlightKeySet:Object,internalUnifySelectCheck:Boolean,internalCheckboxFocusable:{type:Boolean,default:!0},internalFocusable:{type:Boolean,default:!0},checkStrategy:{type:String,default:"all"},leafOnly:Boolean}),cr=M({name:"Tree",props:sr,setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:s,mergedRtlRef:c}=nt(e),a=ot("Tree",c,t),r=Oe("Tree","-tree",lr,Vo,e,t),g=W(null),h=W(null),l=W(null);function u(){var n;return(n=l.value)===null||n===void 0?void 0:n.listElRef}function o(){var n;return(n=l.value)===null||n===void 0?void 0:n.itemsElRef}const d=A(()=>{const{filter:n}=e;if(n)return n;const{labelField:i}=e;return(p,N)=>{if(!p.length)return!0;const w=N[i];return typeof w=="string"?w.toLowerCase().includes(p.toLowerCase()):!1}}),f=A(()=>{const{pattern:n}=e;return n?!n.length||!d.value?{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}:tr(e.data,d.value,n,e.keyField,e.childrenField):{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}}),v=A(()=>go(e.showIrrelevantNodes?e.data:f.value.filteredTree,ir(e.keyField,e.childrenField,e.disabledField,e.getChildren))),C=$e(rn,null),R=e.internalTreeSelect?C.dataTreeMate:v,{watchProps:k}=e,b=W([]);k!=null&&k.includes("defaultCheckedKeys")?we(()=>{b.value=e.defaultCheckedKeys}):b.value=e.defaultCheckedKeys;const T=z(e,"checkedKeys"),$=qe(T,b),E=A(()=>R.value.getCheckedKeys($.value,{cascade:e.cascade,allowNotLoaded:e.allowCheckingNotLoaded})),H=Qo(e),J=A(()=>E.value.checkedKeys),fe=A(()=>{const{indeterminateKeys:n}=e;return n!==void 0?n:E.value.indeterminateKeys}),de=W([]);k!=null&&k.includes("defaultSelectedKeys")?we(()=>{de.value=e.defaultSelectedKeys}):de.value=e.defaultSelectedKeys;const pe=z(e,"selectedKeys"),he=qe(pe,de),Ce=W([]),Ne=n=>{Ce.value=e.defaultExpandAll?R.value.getNonLeafKeys():n===void 0?e.defaultExpandedKeys:n};k!=null&&k.includes("defaultExpandedKeys")?we(()=>{Ne(void 0)}):we(()=>{Ne(e.defaultExpandedKeys)});const Be=z(e,"expandedKeys"),le=qe(Be,Ce),be=A(()=>v.value.getFlattenedNodes(le.value)),{pendingNodeKeyRef:me,handleKeydown:rt}=or({props:e,mergedSelectedKeysRef:he,fNodesRef:be,mergedExpandedKeysRef:le,handleSelect:dt,handleSwitcherClick:Kt});let se=null,ye=null;const x=W(new Set),L=A(()=>e.internalHighlightKeySet||f.value.highlightKeySet),O=qe(L,x),Q=W(new Set),Ye=A(()=>le.value.filter(n=>!Q.value.has(n)));let Nt=0;const Me=W(null),Ge=W(null),Je=W(null),Ze=W(null),Qe=W(0),sn=A(()=>{const{value:n}=Ge;return n?n.parent:null});We(z(e,"data"),()=>{Q.value.clear(),me.value=null,He()},{deep:!1});let lt=!1;const at=()=>{lt=!0,tt(()=>{lt=!1})};let Ue;We(z(e,"pattern"),(n,i)=>{if(e.showIrrelevantNodes)if(Ue=void 0,n){const{expandedKeys:p,highlightKeySet:N}=er(e.data,e.pattern,e.keyField,e.childrenField,d.value);x.value=N,at(),Te(p,ne(p),{node:null,action:"filter"})}else x.value=new Set;else if(!n.length)Ue!==void 0&&(at(),Te(Ue,ne(Ue),{node:null,action:"filter"}));else{i.length||(Ue=le.value);const{expandedKeys:p}=f.value;p!==void 0&&(at(),Te(p,ne(p),{node:null,action:"filter"}))}});function St(n){return ar(this,void 0,void 0,function*(){const{onLoad:i}=e;if(!i){yield Promise.resolve();return}const{value:p}=Q;if(!p.has(n.key)){p.add(n.key);try{(yield i(n.rawNode))===!1&&Le()}catch(N){console.error(N),Le()}p.delete(n.key)}})}we(()=>{var n;const{value:i}=v;if(!i)return;const{getNode:p}=i;(n=le.value)===null||n===void 0||n.forEach(N=>{const w=p(N);w&&!w.shallowLoaded&&St(w)})});const Pe=W(!1),xe=W([]);We(Ye,(n,i)=>{if(!e.animated||lt){tt(et);return}const p=Ve(r.value.self.nodeHeight),N=new Set(i);let w=null,B=null;for(const I of n)if(!N.has(I)){if(w!==null)return;w=I}const ee=new Set(n);for(const I of i)if(!ee.has(I)){if(B!==null)return;B=I}if(w===null&&B===null)return;const{virtualScroll:oe}=e,Ee=(oe?l.value.listElRef:g.value).offsetHeight,Fe=Math.ceil(Ee/p)+1;let ae;if(w!==null&&(ae=i),B!==null&&(ae===void 0?ae=n:ae=ae.filter(I=>I!==B)),Pe.value=!0,xe.value=v.value.getFlattenedNodes(ae),w!==null){const I=xe.value.findIndex(ie=>ie.key===w);if(~I){const ie=xe.value[I].children;if(ie){const ce=Bt(ie,n);xe.value.splice(I+1,0,{__motion:!0,mode:"expand",height:oe?ce.length*p:void 0,nodes:oe?ce.slice(0,Fe):ce})}}}if(B!==null){const I=xe.value.findIndex(ie=>ie.key===B);if(~I){const ie=xe.value[I].children;if(!ie)return;Pe.value=!0;const ce=Bt(ie,n);xe.value.splice(I+1,0,{__motion:!0,mode:"collapse",height:oe?ce.length*p:void 0,nodes:oe?ce.slice(0,Fe):ce})}}});const cn=A(()=>vo(be.value)),un=A(()=>Pe.value?xe.value:be.value);function et(){const{value:n}=h;n&&n.sync()}function fn(){Pe.value=!1,e.virtualScroll&&tt(et)}function ne(n){const{getNode:i}=R.value;return n.map(p=>{var N;return((N=i(p))===null||N===void 0?void 0:N.rawNode)||null})}function Te(n,i,p){const{"onUpdate:expandedKeys":N,onUpdateExpandedKeys:w}=e;Ce.value=n,N&&q(N,n,i,p),w&&q(w,n,i,p)}function Rt(n,i,p){const{"onUpdate:checkedKeys":N,onUpdateCheckedKeys:w}=e;b.value=n,w&&q(w,n,i,p),N&&q(N,n,i,p)}function hn(n,i){const{"onUpdate:indeterminateKeys":p,onUpdateIndeterminateKeys:N}=e;p&&q(p,n,i),N&&q(N,n,i)}function it(n,i,p){const{"onUpdate:selectedKeys":N,onUpdateSelectedKeys:w}=e;de.value=n,w&&q(w,n,i,p),N&&q(N,n,i,p)}function gn(n){const{onDragenter:i}=e;i&&q(i,n)}function vn(n){const{onDragleave:i}=e;i&&q(i,n)}function pn(n){const{onDragend:i}=e;i&&q(i,n)}function bn(n){const{onDragstart:i}=e;i&&q(i,n)}function mn(n){const{onDragover:i}=e;i&&q(i,n)}function yn(n){const{onDrop:i}=e;i&&q(i,n)}function He(){xn(),Se()}function xn(){Me.value=null}function Se(){Qe.value=0,Ge.value=null,Je.value=null,Ze.value=null,Le()}function Le(){se&&(window.clearTimeout(se),se=null),ye=null}function _t(n,i){if(e.disabled||ke(n,e.disabledField))return;if(e.internalUnifySelectCheck&&!e.multiple){dt(n);return}const p=i?"check":"uncheck",{checkedKeys:N,indeterminateKeys:w}=R.value[p](n.key,J.value,{cascade:e.cascade,checkStrategy:H.value,allowNotLoaded:e.allowCheckingNotLoaded});Rt(N,ne(N),{node:n.rawNode,action:p}),hn(w,ne(w))}function kn(n){if(e.disabled)return;const{key:i}=n,{value:p}=le,N=p.findIndex(w=>w===i);if(~N){const w=Array.from(p);w.splice(N,1),Te(w,ne(w),{node:n.rawNode,action:"collapse"})}else{const w=v.value.getNode(i);if(!w||w.isLeaf)return;let B;if(e.accordion){const ee=new Set(n.siblings.map(({key:oe})=>oe));B=p.filter(oe=>!ee.has(oe)),B.push(i)}else B=p.concat(i);Te(B,ne(B),{node:n.rawNode,action:"expand"})}}function Kt(n){e.disabled||Pe.value||kn(n)}function dt(n){if(!(e.disabled||!e.selectable)){if(me.value=n.key,e.internalUnifySelectCheck){const{value:{checkedKeys:i,indeterminateKeys:p}}=E;e.multiple?_t(n,!(i.includes(n.key)||p.includes(n.key))):Rt([n.key],ne([n.key]),{node:n.rawNode,action:"check"})}if(e.multiple){const i=Array.from(he.value),p=i.findIndex(N=>N===n.key);~p?e.cancelable&&i.splice(p,1):~p||i.push(n.key),it(i,ne(i),{node:n.rawNode,action:~p?"unselect":"select"})}else he.value.includes(n.key)?e.cancelable&&it([],[],{node:n.rawNode,action:"unselect"}):it([n.key],ne([n.key]),{node:n.rawNode,action:"select"})}}function wn(n){if(se&&(window.clearTimeout(se),se=null),n.isLeaf)return;ye=n.key;const i=()=>{if(ye!==n.key)return;const{value:p}=Je;if(p&&p.key===n.key&&!le.value.includes(n.key)){const N=le.value.concat(n.key);Te(N,ne(N),{node:n.rawNode,action:"expand"})}se=null,ye=null};n.shallowLoaded?se=window.setTimeout(()=>{i()},1e3):se=window.setTimeout(()=>{St(n).then(()=>{i()})},1e3)}function Cn({event:n,node:i}){!e.draggable||e.disabled||ke(i,e.disabledField)||($t({event:n,node:i},!1),gn({event:n,node:i.rawNode}))}function Nn({event:n,node:i}){!e.draggable||e.disabled||ke(i,e.disabledField)||vn({event:n,node:i.rawNode})}function Sn(n){n.target===n.currentTarget&&Se()}function Rn({event:n,node:i}){He(),!(!e.draggable||e.disabled||ke(i,e.disabledField))&&pn({event:n,node:i.rawNode})}function _n({event:n,node:i}){!e.draggable||e.disabled||ke(i,e.disabledField)||(Nt=n.clientX,Me.value=i,bn({event:n,node:i.rawNode}))}function $t({event:n,node:i},p=!0){var N;if(!e.draggable||e.disabled||ke(i,e.disabledField))return;const{value:w}=Me;if(!w)return;const{allowDrop:B,indent:ee}=e;p&&mn({event:n,node:i.rawNode});const oe=n.currentTarget,{height:Ee,top:Fe}=oe.getBoundingClientRect(),ae=n.clientY-Fe;let I;B({node:i.rawNode,dropPosition:"inside",phase:"drag"})?ae<=8?I="before":ae>=Ee-8?I="after":I="inside":ae<=Ee/2?I="before":I="after";const{value:ce}=cn;let D,X;const je=ce(i.key);if(je===null){Se();return}let Tt=!1;I==="inside"?(D=i,X="inside"):I==="before"?i.isFirstChild?(D=i,X="before"):(D=be.value[je-1],X="after"):(D=i,X="after"),!D.isLeaf&&le.value.includes(D.key)&&(Tt=!0,X==="after"&&(D=be.value[je+1],D?X="before":(D=i,X="inside")));const Lt=D;if(Je.value=Lt,!Tt&&w.isLastChild&&w.key===D.key&&(X="after"),X==="after"){let Dt=Nt-n.clientX,st=0;for(;Dt>=ee/2&&D.parent!==null&&D.isLastChild&&st<1;)Dt-=ee,st+=1,D=D.parent;Qe.value=st}else Qe.value=0;if((w.contains(D)||X==="inside"&&((N=w.parent)===null||N===void 0?void 0:N.key)===D.key)&&!(w.key===Lt.key&&w.key===D.key)){Se();return}if(!B({node:D.rawNode,dropPosition:X,phase:"drag"})){Se();return}if(w.key===D.key)Le();else if(ye!==D.key)if(X==="inside"){if(e.expandOnDragenter){if(wn(D),!D.shallowLoaded&&ye!==D.key){He();return}}else if(!D.shallowLoaded){He();return}}else Le();else X!=="inside"&&Le();Ze.value=X,Ge.value=D}function Kn({event:n,node:i,dropPosition:p}){if(!e.draggable||e.disabled||ke(i,e.disabledField))return;const{value:N}=Me,{value:w}=Ge,{value:B}=Ze;if(!(!N||!w||!B)&&e.allowDrop({node:w.rawNode,dropPosition:B,phase:"drag"})&&N.key!==w.key){if(B==="before"){const ee=N.getNext({includeDisabled:!0});if(ee&&ee.key===w.key){Se();return}}if(B==="after"){const ee=N.getPrev({includeDisabled:!0});if(ee&&ee.key===w.key){Se();return}}yn({event:n,node:w.rawNode,dragNode:N.rawNode,dropPosition:p}),He()}}function $n(){et()}function Pn(){et()}function Tn(n){var i;if(e.virtualScroll||e.internalScrollable){const{value:p}=h;if(!((i=p==null?void 0:p.containerRef)===null||i===void 0)&&i.contains(n.relatedTarget))return;me.value=null}else{const{value:p}=g;if(p!=null&&p.contains(n.relatedTarget))return;me.value=null}}We(me,n=>{var i,p;if(n!==null){if(e.virtualScroll)(i=l.value)===null||i===void 0||i.scrollTo({key:n});else if(e.internalScrollable){const{value:N}=h;if(N===null)return;const w=(p=N.contentRef)===null||p===void 0?void 0:p.querySelector(`[data-key="${en(n)}"]`);if(!w)return;N.scrollTo({el:w})}}}),Vt(Xe,{loadingKeysRef:Q,highlightKeySetRef:O,displayedCheckedKeysRef:J,displayedIndeterminateKeysRef:fe,mergedSelectedKeysRef:he,mergedExpandedKeysRef:le,mergedThemeRef:r,mergedCheckStrategyRef:H,nodePropsRef:z(e,"nodeProps"),disabledRef:z(e,"disabled"),checkableRef:z(e,"checkable"),selectableRef:z(e,"selectable"),expandOnClickRef:z(e,"expandOnClick"),onLoadRef:z(e,"onLoad"),draggableRef:z(e,"draggable"),blockLineRef:z(e,"blockLine"),indentRef:z(e,"indent"),cascadeRef:z(e,"cascade"),checkOnClickRef:z(e,"checkOnClick"),checkboxPlacementRef:e.checkboxPlacement,droppingMouseNodeRef:Je,droppingNodeParentRef:sn,draggingNodeRef:Me,droppingPositionRef:Ze,droppingOffsetLevelRef:Qe,fNodesRef:be,pendingNodeKeyRef:me,showLineRef:z(e,"showLine"),disabledFieldRef:z(e,"disabledField"),internalScrollableRef:z(e,"internalScrollable"),internalCheckboxFocusableRef:z(e,"internalCheckboxFocusable"),internalTreeSelect:e.internalTreeSelect,renderLabelRef:z(e,"renderLabel"),renderPrefixRef:z(e,"renderPrefix"),renderSuffixRef:z(e,"renderSuffix"),renderSwitcherIconRef:z(e,"renderSwitcherIcon"),labelFieldRef:z(e,"labelField"),multipleRef:z(e,"multiple"),handleSwitcherClick:Kt,handleDragEnd:Rn,handleDragEnter:Cn,handleDragLeave:Nn,handleDragStart:_n,handleDrop:Kn,handleDragOver:$t,handleSelect:dt,handleCheck:_t});function Ln(n){var i;(i=l.value)===null||i===void 0||i.scrollTo(n)}const Dn={handleKeydown:rt,scrollTo:Ln,getCheckedData:()=>{if(!e.checkable)return{keys:[],options:[]};const{checkedKeys:n}=E.value;return{keys:n,options:ne(n)}},getIndeterminateData:()=>{if(!e.checkable)return{keys:[],options:[]};const{indeterminateKeys:n}=E.value;return{keys:n,options:ne(n)}}},Pt=A(()=>{const{common:{cubicBezierEaseInOut:n},self:{fontSize:i,nodeBorderRadius:p,nodeColorHover:N,nodeColorPressed:w,nodeColorActive:B,arrowColor:ee,loadingColor:oe,nodeTextColor:Ee,nodeTextColorDisabled:Fe,dropMarkColor:ae,nodeWrapperPadding:I,nodeHeight:ie,lineHeight:ce}}=r.value,D=ft(I,"top"),X=ft(I,"bottom"),je=Gt(Ve(ie)-Ve(D)-Ve(X));return{"--n-arrow-color":ee,"--n-loading-color":oe,"--n-bezier":n,"--n-font-size":i,"--n-node-border-radius":p,"--n-node-color-active":B,"--n-node-color-hover":N,"--n-node-color-pressed":w,"--n-node-text-color":Ee,"--n-node-text-color-disabled":Fe,"--n-drop-mark-color":ae,"--n-node-wrapper-padding":I,"--n-line-offset-top":`-${D}`,"--n-line-offset-bottom":`-${X}`,"--n-node-content-height":je,"--n-line-height":ce}}),De=s?wt("tree",void 0,Pt,e):void 0;return Object.assign(Object.assign({},Dn),{mergedClsPrefix:t,mergedTheme:r,rtlEnabled:a,fNodes:un,aip:Pe,selfElRef:g,virtualListInstRef:l,scrollbarInstRef:h,handleFocusout:Tn,handleDragLeaveTree:Sn,handleScroll:$n,getScrollContainer:u,getScrollContent:o,handleAfterEnter:fn,handleResize:Pn,cssVars:s?void 0:Pt,themeClass:De==null?void 0:De.themeClass,onRender:De==null?void 0:De.onRender})},render(){var e;const{fNodes:t,internalRenderEmpty:s}=this;if(!t.length&&s)return s();const{mergedClsPrefix:c,blockNode:a,blockLine:r,draggable:g,disabled:h,internalFocusable:l,checkable:u,handleKeydown:o,rtlEnabled:d,handleFocusout:f,scrollbarProps:v}=this,C=l&&!h,R=C?"0":void 0,k=[`${c}-tree`,d&&`${c}-tree--rtl`,u&&`${c}-tree--checkable`,(r||a)&&`${c}-tree--block-node`,r&&`${c}-tree--block-line`],b=$=>"__motion"in $?y(rr,{height:$.height,nodes:$.nodes,clsPrefix:c,mode:$.mode,onAfterEnter:this.handleAfterEnter}):y(an,{key:$.key,tmNode:$,clsPrefix:c});if(this.virtualScroll){const{mergedTheme:$,internalScrollablePadding:E}=this,H=ft(E||"0");return y(It,Object.assign({},v,{ref:"scrollbarInstRef",onDragleave:g?this.handleDragLeaveTree:void 0,container:this.getScrollContainer,content:this.getScrollContent,class:k,theme:$.peers.Scrollbar,themeOverrides:$.peerOverrides.Scrollbar,tabindex:R,onKeydown:C?o:void 0,onFocusout:C?f:void 0}),{default:()=>{var J;return(J=this.onRender)===null||J===void 0||J.call(this),y(ho,{ref:"virtualListInstRef",items:this.fNodes,itemSize:Ve($.self.nodeHeight),ignoreItemResize:this.aip,paddingTop:H.top,paddingBottom:H.bottom,class:this.themeClass,style:[this.cssVars,{paddingLeft:H.left,paddingRight:H.right}],onScroll:this.handleScroll,onResize:this.handleResize,showScrollbar:!1,itemResizable:!0},{default:({item:fe})=>b(fe)})}})}const{internalScrollable:T}=this;return k.push(this.themeClass),(e=this.onRender)===null||e===void 0||e.call(this),T?y(It,Object.assign({},v,{class:k,tabindex:R,onKeydown:C?o:void 0,onFocusout:C?f:void 0,style:this.cssVars,contentStyle:{padding:this.internalScrollablePadding}}),{default:()=>y("div",{onDragleave:g?this.handleDragLeaveTree:void 0,ref:"selfElRef"},this.fNodes.map(b))}):y("div",{class:k,tabindex:R,ref:"selfElRef",style:this.cssVars,onKeydown:C?o:void 0,onFocusout:C?f:void 0,onDragleave:g?this.handleDragLeaveTree:void 0},t.length?t.map(b):to(this.$slots.empty,()=>[y(po,{class:`${c}-tree__empty`,theme:this.mergedTheme.peers.Empty,themeOverrides:this.mergedTheme.peerOverrides.Empty})]))}}),dn=M({__name:"DraggableCard",props:{initialValue:{default:()=>({})}},setup(e){const t=e,s=t.initialValue.left!==void 0,c=t.initialValue.top!==void 0,a={x:(s?t.initialValue.left:t.initialValue.right)??0,y:(c?t.initialValue.top:t.initialValue.bottom)??0},r=Jt({...a}),g=A(()=>{const b=s?`left:${r.x}px;`:`right:${r.x}px;`,T=c?`top:${r.y}px;`:`bottom:${r.y}px;`;return b+T});let h;const l=b=>{h=b,a.x=r.x,a.y=r.y},u=b=>{if(!f.value||!h)return;const T=b.clientX-h.clientX,$=b.clientY-h.clientY;r.x=a.x+(s?T:-T),r.y=a.y+(c?$:-$)},o=()=>{h=void 0},d=Z(),f=Z(),v=b=>{h&&b.preventDefault()},C=["transition-top,bottom,left,right-500"],R=()=>{if(!f.value)return;const{top:b,bottom:T,left:$,right:E}=f.value.getBoundingClientRect();if(E<0||$>window.innerWidth||T<0||b>window.innerHeight){r.x=a.x,r.y=a.y,o();const H=d.value;H&&(H.classList.add(...C),setTimeout(()=>{H.classList.remove(...C)},550))}};window.addEventListener("pointermove",u),window.addEventListener("pointerup",R),document.addEventListener("selectstart",v),zt(()=>{window.removeEventListener("pointermove",u),window.removeEventListener("pointerup",R),document.removeEventListener("selectstart",v),o()}),We(f,(b,T)=>{b&&(b.addEventListener("pointerdown",l),b.addEventListener("pointerup",o)),T&&(T.removeEventListener("pointerdown",l),T.removeEventListener("pointerup",o))}),zt(()=>{f.value&&(f.value.removeEventListener("pointerdown",l),f.value.removeEventListener("pointerup",o))});const k=b=>{b instanceof HTMLElement?f.value=b:f.value=void 0};return(b,T)=>(V(),te(oo,{to:"body"},[U("div",{fixed:"",ref_key:"box",ref:d,style:pt([b.$attrs.style,g.value]),class:no(b.$attrs.class)},[Zt(b.$slots,"default",{onRef:k})],6)]))}});const ur={flex:"","p-4px":"","gap-10px":"",style:{background:"#e6e6e6"}},fr=U("svg",{viewBox:"0 0 1024 1024"},[U("path",{d:"M722.500267 330.888533l-273.408 273.408-147.729067-147.729066a42.018133 42.018133 0 1 0-59.426133 59.426133l177.425066 177.493333a41.984 41.984 0 0 0 59.426134 0L781.9264 390.314667a42.001067 42.001067 0 0 0-59.392-59.426134h-0.034133zM78.506667 783.496533a508.279467 508.279467 0 0 0 319.0784 226.986667C530.773333 1041.066667 667.886933 1017.924267 783.701333 945.390933a508.279467 508.279467 0 0 0 226.986667-319.0784 508.279467 508.279467 0 0 0-65.058133-386.116266C848.554667 85.367467 681.710933 0.341333 511.214933 0.341333a508.6208 508.6208 0 0 0-270.813866 77.960534A36.864 36.864 0 0 0 279.552 140.629333C484.113067 12.288 755.029333 74.581333 883.268267 279.278933a434.9952 434.9952 0 0 1 55.739733 330.5472 435.029333 435.029333 0 0 1-194.3552 273.134934 435.746133 435.746133 0 0 1-330.581333 55.773866A435.165867 435.165867 0 0 1 140.936533 744.379733a436.770133 436.770133 0 0 1-5.666133-456.055466 36.829867 36.829867 0 0 0-63.317333-37.546667A510.1568 510.1568 0 0 0 78.506667 783.530667v-0.034134z"})],-1),hr=["onClick"],gr=M({__name:"AttrCard",props:{focusNode:{}},setup(e){const t=e,s=["text","desc"],c=A(()=>Object.entries(t.focusNode.attr).map(([a,r])=>{const g={name:a,value:JSON.stringify(r)};return s.includes(a)?[g,{name:a+".length",value:JSON.stringify((r==null?void 0:r.length)??null)}]:g}).flat());return(a,r)=>(V(),te(dn,{initialValue:{top:75,right:10}},{default:S(({onRef:g})=>[U("div",ur,[a.focusNode.quickFind?(V(),te(m(bo),{key:0},{trigger:S(()=>[_(m(Qt),{size:"16"},{default:S(()=>[fr]),_:1})]),default:S(()=>[j(" 可快速查找 ")]),_:1})):Ie("",!0),U("div",{"h-16px":"","flex-1":"",ref:g,"cursor-move":""},null,512)]),_(m(nn),{size:"small",striped:"",singleLine:!1,class:"gkd_code",themeOverrides:{thPaddingSmall:"1px 3px",tdPaddingSmall:"1px 3px"}},{default:S(()=>[_(m(on),null,{default:S(()=>[(V(!0),ze(mt,null,bt(c.value,h=>(V(),te(m(xt),{key:h.name},{default:S(()=>[_(m(ve),null,{default:S(()=>[U("span",{onClick:l=>m(Ae)(`${h.name}=${h.value}`)},re(h.name),9,hr)]),_:2},1024),_(m(ve),null,{default:S(()=>[h.name=="id"?(V(),te(m(Ke),{key:0,style:{width:"180px","min-width":"max(12vw, 180px)",direction:"rtl","text-align":"left"}},{default:S(()=>[j(re(h.value),1)]),_:2},1024)):(V(),te(m(Ke),{key:1,style:{width:"180px","min-width":"max(12vw, 180px)"}},{default:S(()=>[j(re(h.value),1)]),_:2},1024))]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),vr={flex:"","flex-col":"",relative:"","h-full":""},pr=["src"],br=U("div",{absolute:"","left-0":"","top-0":"","bottom-0":"","right-0":"","b-solid":"","b-1px":"","b-red":""},null,-1),mr=[br],yr={class:"left-[calc(100%+4px)]",absolute:"","top-0":"","overflow-hidden":"","z-1":"","bg-white":"","h-200px":"","w-200px":"","border-1px":"","border-indigo-600":"","border-dashed":""},xr=["src"],kr={absolute:"","left-2px":"","top-2px":"",class:"leading-[1]",style:{"background-color":"rgba(256, 256, 256, 0.7)"}},wr=U("div",{class:"top-[calc(50%-1px)]",absolute:"","left-0":"","right-0":"","h-1px":"","bg-repeat-x":"","mix-blend-difference":"",style:{background:`linear-gradient(
            to left,
            transparent 0%,
            transparent 50%,
            #fff 50%,
            #fff 100%
          )`,"background-size":"10px 1px"}},null,-1),Cr=U("div",{class:"left-[calc(50%-1px)]",absolute:"","top-0":"","bottom-0":"","w-1px":"","bg-repeat-y":"","mix-blend-difference":"",style:{background:`linear-gradient(
            to top,
            transparent 0%,
            transparent 50%,
            #fff 50%,
            #fff 100%
          )`,"background-size":"1px 10px"}},null,-1),Nr=M({__name:"ScreenshotCard",props:{url:{},snapshot:{},rootNode:{},focusNode:{},onUpdateFocusNode:{type:Function,default:()=>()=>{}}},setup(e){const t=e,s=Z(),c=Z();we(()=>{if(!t.rootNode)return;const o=c.value,d=s.value;if(!o||!d)return;const f=d.getBoundingClientRect(),v=f.width/d.naturalWidth*d.naturalHeight,C=(f.height-v)/2,R=(o.clientX-f.left)/f.width*d.naturalWidth,k=(o.clientY-f.top-C)/v*d.naturalHeight,b=mo(t.snapshot.nodes,R,k);b&&t.onUpdateFocusNode(b)});const a=o=>`${o*100}%`,r=A(()=>{var C;const o=s.value,d=(C=t.focusNode)==null?void 0:C.attr;if(!t.focusNode||!o||!d)return"";const f=o.getBoundingClientRect(),v=f.width/o.naturalWidth*o.naturalHeight;return{left:`calc(${a(d.left/o.naturalWidth)} - 2px)`,width:`calc(${a((d.right-d.left)/o.naturalWidth)} + 2px)`,top:`calc(${a((d.top/o.naturalHeight*v+(f.height-v)/2)/f.height)} - 2px)`,height:`calc(${a((d.bottom-d.top)/o.naturalHeight*v/f.height)} + 2px)`}}),g=Z(!1),h=Z({ox:0,oy:0}),l=o=>{const d=s.value;if(!d)return;const f=d.getBoundingClientRect(),v=f.width/d.naturalWidth*d.naturalHeight,C=(f.height-v)/2,R=(o.clientX-f.left)/f.width*d.naturalWidth,k=(o.clientY-f.top-C)/v*d.naturalHeight;h.value={ox:R,oy:k},u.value={left:-(R-.1*d.naturalWidth)/d.naturalWidth*1e3+"px",top:-(k-.1*d.naturalWidth)/d.naturalWidth*1e3+"px"}},u=Z({left:"0",top:"0"});return(o,d)=>(V(),ze("div",vr,[U("img",{ref_key:"imgRef",ref:s,src:o.url,onClick:d[0]||(d[0]=f=>c.value=f),"cursor-crosshair":"","h-full":"","object-contain":"",style:{"max-width":"max(35vw, 400px)"},onMouseover:d[1]||(d[1]=f=>g.value=!0),onMouseleave:d[2]||(d[2]=f=>g.value=!1),onMousemove:l},null,40,pr),U("div",{style:pt(r.value),absolute:"","pointer-events-none":"","transition-all-300":"","b-1px":"","b-blue":"","b-solid":""},mr,4),Wt(U("div",yr,[U("img",{src:o.url,"object-contain":"",absolute:"","left-0":"","top-0":"",style:pt(u.value),"w-1000px":""},null,12,xr),U("div",kr,re(`${h.value.ox.toFixed(0)},${h.value.oy.toFixed(0)}`),1),wr,Cr],512),[[qt,g.value]])]))}}),Sr={"w-480px":"","bg-white":"","b-1px":"","b-solid":"","b-gray-200":"","rounded-4px":"","p-8px":"",style:{"min-width":"max(25vw, 480px)"}},Rr={flex:"","m-b-4px":""},_r=U("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},[U("path",{d:"M29 27.586l-7.552-7.552a11.018 11.018 0 1 0-1.414 1.414L27.586 29zM4 13a9 9 0 1 1 9 9a9.01 9.01 0 0 1-9-9z",fill:"currentColor"})],-1),Kr=U("div",{"p-5px":""},null,-1),$r={"break-all":""},Pr=U("div",{"p-l-8px":""},null,-1),Tr=M({__name:"SearchCard",props:{rootNode:{},onUpdateFocusNode:{type:Function,default:()=>()=>{}}},setup(e){const t=e,s=Z(""),c=Jt([]),a=Co(()=>{if(!t.rootNode){ue.error("根节点不存在");return}const h=s.value.trim();if(h)if(r.value){const l=No(()=>So(h),"选择器非法");if(c.find(o=>typeof o.selector=="object"&&o.selector.toString()==l.toString())){ue.warning("不可重复选择");return}const u=l.querySelectorAll(t.rootNode);if(u.length==0){ue.success("没有选择到节点");return}ue.success(`选择到 ${u.length} 个节点`),c.unshift({selector:l,results:u})}else{if(c.find(o=>typeof o.selector=="string"&&o.selector.toString()==h)){ue.warning("不可重复选择");return}const l=[],u=[t.rootNode];for(;u.length>0;){const o=u.pop();yt(o).includes(h)&&l.push(o),u.push(...[...o.children].reverse())}if(l.length==0){ue.success("没有搜索到节点");return}ue.success(`搜索到 ${l.length} 个节点`),c.unshift({selector:h,results:l})}}),r=Z(!0),g=window.innerWidth/100;return(h,l)=>(V(),te(dn,{initialValue:{top:75,right:Math.max(315,12*g+135)},class:"z-1"},{default:S(({onRef:u})=>[U("div",Sr,[U("div",Rr,[_(m(yo),{value:r.value,"onUpdate:value":l[0]||(l[0]=o=>r.value=o)},{default:S(()=>[_(m(Mt),null,{default:S(()=>[_(m(Ut),{value:!1},{default:S(()=>[j(" 字符搜索 ")]),_:1}),_(m(Ut),{value:!0},{default:S(()=>[j(" 选择器查询 ")]),_:1})]),_:1})]),_:1},8,["value"]),U("div",{"flex-1":"","cursor-move":"",ref:u},null,512)]),_(m(ko),null,{default:S(()=>[_(m(xo),{value:s.value,"onUpdate:value":l[1]||(l[1]=o=>s.value=o),placeholder:r.value?"请输入选择器":"请输入字符",onKeyup:ro(m(a),["enter"]),inputProps:{class:"gkd_code"}},null,8,["value","placeholder","onKeyup"]),_(m(ht),{onClick:m(a)},{icon:S(()=>[_(m(Qt),null,{default:S(()=>[_r]),_:1})]),_:1},8,["onClick"])]),_:1}),Kr,_(m(Fo),null,{default:S(()=>[(V(!0),ze(mt,null,bt(m(c),(o,d)=>(V(),te(m(zo),{key:o.selector.toString()},{header:S(()=>[U("span",$r,re((typeof o.selector=="string"?"字符搜索":"选择器查询")+"："+o.selector.toString()),1)]),"header-extra":S(()=>[j(re(o.results.length+"个节点")+" ",1),Pr,_(m(ht),{onClick:lo(f=>m(c).splice(d,1),["stop"])},{default:S(()=>[j(" 删除 ")]),_:2},1032,["onClick"])]),default:S(()=>[_(m(Mt),{style:{"max-height":"400px","overflow-y":"scroll","padding-bottom":"10px"}},{default:S(()=>[(V(!0),ze(mt,null,bt(o.results,f=>(V(),te(m(ht),{key:f.id,onClick:v=>h.onUpdateFocusNode(f),size:"small"},{default:S(()=>[j(re(m(yt)(f)),1)]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1},8,["initialValue"]))}}),Lr={flex:"","flex-col":""},Dr=M({__name:"WindowCard",props:{snapshot:{},rootNode:{},focusNode:{},onUpdateFocusNode:{type:Function,default:()=>()=>{}}},setup(e){const t=e,s=Z([]);we(async()=>{var d;if(!t.focusNode)return;const l=t.focusNode.id;let u=t.focusNode.parent;if(!u)return;const o=new Set(s.value);for(;u;)o.add(u.id),u=u.parent;o.size!=s.value.length&&(s.value=[...o],await tt(),(d=c.value)==null||d.scrollTo({key:l}))});const c=Z(),a=(l,u,o)=>{},r=(l,u)=>{var o;return u.id===((o=t.focusNode)==null?void 0:o.id)},g=l=>{var u;return{onClick:()=>{t.onUpdateFocusNode(l.option)},style:{color:l.option.id==((u=t.focusNode)==null?void 0:u.id)?"#00F":void 0}}},h=l=>yt(l.option);return(l,u)=>(V(),ze("div",Lr,[_(m(nn),{size:"small",striped:"",singleLine:!1,class:"table-fixed",themeOverrides:{thPaddingSmall:"2px 4px",tdPaddingSmall:"2px 4px"}},{default:S(()=>[_(m(Xo),null,{default:S(()=>[_(m(xt),null,{default:S(()=>[_(m(Re),{class:"w-140px"},{default:S(()=>[j(" Device ")]),_:1}),_(m(Re),{class:"w-100px"},{default:S(()=>[j(" Name ")]),_:1}),_(m(Re),{class:"w-100px"},{default:S(()=>[j(" VersionName ")]),_:1}),_(m(Re),{class:"w-100px"},{default:S(()=>[j(" VersionCode ")]),_:1}),_(m(Re),{class:"w-150px"},{default:S(()=>[j(" AppId ")]),_:1}),_(m(Re),null,{default:S(()=>[j(" ActivityId ")]),_:1}),_(m(Re),{class:"w-175px"},{default:S(()=>[j(" 操作 ")]),_:1})]),_:1})]),_:1}),_(m(on),null,{default:S(()=>[_(m(xt),null,{default:S(()=>[_(m(ve),{class:"whitespace-nowrap"},{default:S(()=>[j(re(`${m(Ht)(l.snapshot).manufacturer} Android ${m(Ht)(l.snapshot).release||""}`),1)]),_:1}),_(m(ve),{class:"whitespace-nowrap",onClick:u[0]||(u[0]=o=>m(Ae)(l.snapshot.appName))},{default:S(()=>[_(m(Ke),null,{default:S(()=>[j(re(l.snapshot.appName),1)]),_:1})]),_:1}),_(m(ve),{class:"whitespace-nowrap",onClick:u[1]||(u[1]=o=>m(Ae)(l.snapshot.appVersionName))},{default:S(()=>[_(m(Ke),null,{default:S(()=>[j(re(l.snapshot.appVersionName),1)]),_:1})]),_:1}),_(m(ve),{class:"whitespace-nowrap",onClick:u[2]||(u[2]=o=>m(Ae)(l.snapshot.appVersionCode.toString()))},{default:S(()=>[_(m(Ke),null,{default:S(()=>[j(re(l.snapshot.appVersionCode),1)]),_:1})]),_:1}),_(m(ve),{class:"whitespace-nowrap",onClick:u[3]||(u[3]=o=>m(Ae)(l.snapshot.appId))},{default:S(()=>[_(m(Ke),null,{default:S(()=>[j(re(l.snapshot.appId),1)]),_:1})]),_:1}),_(m(ve),{onClick:u[4]||(u[4]=o=>m(Ae)(l.snapshot.activityId)),class:"break-words"},{default:S(()=>[_(m(Ke),null,{default:S(()=>[j(re(l.snapshot.activityId),1)]),_:1})]),_:1}),_(m(ve),null,{default:S(()=>[Zt(l.$slots,"default",{},void 0,!0)]),_:3})]),_:3})]),_:3})]),_:3}),_(m(cr),{ref_key:"treeRef",ref:c,virtualScroll:"",showLine:"","onUpdate:checkedKeys":a,keyField:"id",defaultExpandedKeys:s.value,data:[l.rootNode],filter:r,nodeProps:g,renderLabel:h,style:{"--n-border-color":"rgb(239, 239, 245)"}},null,8,["defaultExpandedKeys","data","filter","nodeProps","renderLabel"])]))}});const Er=_o(Dr,[["__scopeId","data-v-102e2160"]]),Fr={"h-full":"",flex:"","gap-5px":"","p-5px":"","box-border":""},Hr=M({__name:"SnapshotPage",setup(e){const t=ao(),s=io(),c=Ro(),a=A(()=>String(t.params.snapshotId||"")),r=A(()=>{const d=Number(t.query.showSize||"");return!Number.isSafeInteger(d)||d<=0?2e3:d}),g=Z(""),h=Z();we(async()=>{const d=await Et.getItem(a.value);if(!d){ue.error("快照数据缺失");return}In()&&setTimeout(async()=>{Fn(d),zn[d.id]||An(await Et.getItem(a.value))},1e3),d.nodes.length>r.value&&(ue.warning(`当前展示节点数量为${r.value}
之后的${d.nodes.length-r.value}个节点将被丢弃
使用showSize查询参数可以修改展示数量`),d.nodes=d.nodes.slice(0,r.value));const f=await On.getItem(a.value);if(!f){ue.create("截屏数据缺失");return}g.value=URL.createObjectURL(new Blob([f],{type:"image/png"})),h.value=d,l.value=wo(d.nodes),c.value="快照-"+d.appName||d.appId,await Ft(500),u.value||(u.value=l.value)});const l=Z(),u=Z(),o=async()=>{ue.success("删除成功,即将回到首页"),await Ft(2e3),s.replace({path:"/"})};return(d,f)=>(V(),ze("div",Fr,[g.value&&h.value?(V(),te(Nr,{key:0,url:g.value,snapshot:h.value,rootNode:l.value,focusNode:u.value,onUpdateFocusNode:f[0]||(f[0]=v=>u.value=v)},null,8,["url","snapshot","rootNode","focusNode"])):Ie("",!0),h.value&&l.value?(V(),te(Er,{key:1,rootNode:l.value,snapshot:h.value,focusNode:u.value,onUpdateFocusNode:f[1]||(f[1]=v=>u.value=v),class:"flex-1"},{default:S(()=>[h.value?(V(),te(En,{key:0,snapshot:h.value,onDelete:o,showPreview:!1},null,8,["snapshot"])):Ie("",!0)]),_:1},8,["rootNode","snapshot","focusNode"])):Ie("",!0),u.value?(V(),te(gr,{key:2,focusNode:u.value},null,8,["focusNode"])):Ie("",!0),l.value?(V(),te(Tr,{key:3,rootNode:l.value,onUpdateFocusNode:f[2]||(f[2]=v=>u.value=v)},null,8,["rootNode"])):Ie("",!0)]))}});export{Hr as default};
//# sourceMappingURL=SnapshotPage-169c7dbb.js.map
